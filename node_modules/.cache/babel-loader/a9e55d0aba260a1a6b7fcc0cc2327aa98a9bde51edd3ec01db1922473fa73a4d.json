{"ast":null,"code":"import React,{useState,useEffect,useCallback,useRef,createContext,useContext}from'react';import{initializeApp}from'firebase/app';import{getAnalytics}from\"firebase/analytics\";import{getAuth,onAuthStateChanged,createUserWithEmailAndPassword,signInWithEmailAndPassword,signOut,GoogleAuthProvider,signInWithPopup,getAdditionalUserInfo}from'firebase/auth';import{getFirestore,collection,getDocs,doc,getDoc,addDoc,updateDoc,deleteDoc,query,where,onSnapshot,setDoc}from'firebase/firestore';import{getStorage,ref,uploadBytes,getDownloadURL,deleteObject}from'firebase/storage';import{ShoppingCart,User,Star,Menu,X,Trash2,Plus,Minus,Truck,CreditCard,ShieldCheck,Search,Filter,LogOut,Settings,ArrowRight,Eye,Zap,ImagePlus,AlertCircle,CheckCircle,BarChart,ChevronDown}from'lucide-react';import{motion,AnimatePresence}from'framer-motion';import'./index.css';// Import obrazów dla kategorii\nimport categoryChargers from'./assets/images/category-chargers.jpg';import categoryAdapters from'./assets/images/category-adapters.jpg';import categoryAccessories from'./assets/images/category-accessories.jpg';import categoryBatteries from'./assets/images/category-batteries.jpg';// --- KONFIGURACJA FIREBASE (POPRAWIONA) ---\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const firebaseConfig={apiKey:\"AIzaSyC6L-8owWH1z6Ipf2FZax7gZ7FQOvuSNJs\",authDomain:\"evshop-6719a.firebaseapp.com\",projectId:\"evshop-6719a\",storageBucket:\"evshop-6719a.firebasestorage.app\",messagingSenderId:\"619247072748\",appId:\"1:619247072748:web:ad274f442dba53736cbcc9\",measurementId:\"G-Z80X8YRR4L\"};// Inicjalizacja Firebase\nconst app=initializeApp(firebaseConfig);const analytics=getAnalytics(app);const auth=getAuth(app);const db=getFirestore(app);const storage=getStorage(app);const adminUID=\"s8k8u9l3R3g8h3q2N4y6E5rO9x23\";const logoUrl=`${process.env.PUBLIC_URL}/logo.png`;const defaultProductImageUrl=`${process.env.PUBLIC_URL}/default-product.png`;const heroImageUrl='https://images.unsplash.com/photo-1619623697969-9f15038c1a16?q=80&w=2070&auto=format&fit=crop';const categoriesData=[{name:'Ładowarki',image:categoryChargers},{name:'Adaptery',image:categoryAdapters},{name:'Akcesoria',image:categoryAccessories},{name:'Baterie',image:categoryBatteries}];// --- SAMPLE TESLA PRODUCTS ---\nconst sampleTeslaProducts=[{id:'tesla-wall-connector',name:'Tesla Wall Connector Gen 3',price:2499,category:'Ładowarki',brand:'Tesla',rating:4.9,bestseller:true,description:'Najszybsza ładowarka domowa Tesla z mocą do 11.5 kW. Idealna do codziennego użytku domowego.',imageUrls:['https://images.unsplash.com/photo-1593941707882-a5bac6861d75?q=80&w=800&auto=format&fit=crop','https://images.unsplash.com/photo-1558618666-fcd25c85cd64?q=80&w=800&auto=format&fit=crop']},{id:'tesla-mobile-connector',name:'Tesla Mobile Connector',price:899,category:'Ładowarki',brand:'Tesla',rating:4.8,bestseller:true,description:'Przenośna ładowarka Tesla z adapterami do różnych gniazdek. Niezbędna w każdej podróży.',imageUrls:['https://images.unsplash.com/photo-1609592606436-c0e3d0c4b3b9?q=80&w=800&auto=format&fit=crop','https://images.unsplash.com/photo-1621784377641-2c1a2c7a4b91?q=80&w=800&auto=format&fit=crop']},{id:'tesla-chademo-adapter',name:'Tesla CHAdeMO Adapter',price:1299,category:'Adaptery',brand:'Tesla',rating:4.7,description:'Adapter CHAdeMO umożliwiający ładowanie Tesla na stacjach CHAdeMO o mocy do 50 kW.',imageUrls:['https://images.unsplash.com/photo-1626668011687-8a114d5c1604?q=80&w=800&auto=format&fit=crop']},{id:'tesla-j1772-adapter',name:'Tesla J1772 Adapter',price:399,category:'Adaptery',brand:'Tesla',rating:4.6,description:'Adapter J1772 pozwalający na ładowanie Tesla na publicznych stacjach J1772.',imageUrls:['https://images.unsplash.com/photo-1558618666-fcd25c85cd64?q=80&w=800&auto=format&fit=crop']},{id:'tesla-supercharger-cable',name:'Tesla Supercharger Cable (zapasowy)',price:699,category:'Akcesoria',brand:'Tesla',rating:4.8,description:'Zapasowy kabel do ładowarki Tesla Supercharger. Wytrzymały i niezawodny.',imageUrls:['https://images.unsplash.com/photo-1609592606436-c0e3d0c4b3b9?q=80&w=800&auto=format&fit=crop']},{id:'tesla-powerwall',name:'Tesla Powerwall 2',price:28999,category:'Baterie',brand:'Tesla',rating:4.9,bestseller:true,description:'Domowa bateria Tesla Powerwall 2 o pojemności 13,5 kWh. Zapewnia niezależność energetyczną.',imageUrls:['https://images.unsplash.com/photo-1497435334941-8c899ee9e8e9?q=80&w=800&auto=format&fit=crop']},{id:'tesla-model-s-floor-mats',name:'Tesla Model S - Dywaniki podłogowe',price:459,category:'Akcesoria',brand:'Tesla',rating:4.5,description:'Oryginalne dywaniki podłogowe Tesla Model S. Idealne dopasowanie i wysoka jakość.',imageUrls:['https://images.unsplash.com/photo-1549924231-f129b911e442?q=80&w=800&auto=format&fit=crop']},{id:'tesla-model-3-trunk-mat',name:'Tesla Model 3 - Mata bagażnika',price:299,category:'Akcesoria',brand:'Tesla',rating:4.4,description:'Wodoodporna mata bagażnika dla Tesla Model 3. Chroni przed zabrudzeniem i wilgocią.',imageUrls:['https://images.unsplash.com/photo-1549924231-f129b911e442?q=80&w=800&auto=format&fit=crop']},{id:'tesla-wireless-charger',name:'Tesla Wireless Phone Charger',price:329,category:'Akcesoria',brand:'Tesla',rating:4.3,description:'Bezprzewodowa ładowarka do telefonu Tesla. Kompatybilna z Model S, 3, X i Y.',imageUrls:['https://images.unsplash.com/photo-1594736797933-d0401ba4b7c0?q=80&w=800&auto=format&fit=crop']},{id:'tesla-gen2-mobile-connector',name:'Tesla Gen 2 Mobile Connector Bundle',price:1299,category:'Ładowarki',brand:'Tesla',rating:4.8,description:'Kompletny zestaw Gen 2 Mobile Connector z adapterami NEMA 14-50, 5-15 i J1772.',imageUrls:['https://images.unsplash.com/photo-1609592606436-c0e3d0c4b3b9?q=80&w=800&auto=format&fit=crop']}];// --- API SERWIS (LIVE) ---\n// Funkcje do interakcji z Firebase\nconst api={fetchProducts:async()=>{try{const productsCol=collection(db,'products');const snapshot=await getDocs(productsCol);const firebaseProducts=snapshot.docs.map(doc=>({id:doc.id,...doc.data()}));// Jeśli baza danych jest pusta, zwróć sample produkty Tesla\nif(firebaseProducts.length===0){return sampleTeslaProducts;}// Połącz produkty z Firebase z sample produktami Tesla\nconst allProducts=[...firebaseProducts,...sampleTeslaProducts];// Usuń duplikaty na podstawie ID\nconst uniqueProducts=allProducts.filter((product,index,self)=>index===self.findIndex(p=>p.id===product.id));return uniqueProducts;}catch(error){console.error('Błąd podczas pobierania produktów:',error);// W przypadku błędu, zwróć sample produkty Tesla\nreturn sampleTeslaProducts;}},fetchCategories:async()=>{return categoriesData;},fetchProduct:async id=>{const docRef=doc(db,'products',id);const docSnap=await getDoc(docRef);return docSnap.exists()?{id:docSnap.id,...docSnap.data()}:null;},getReviews:(productId,callback)=>{const reviewsQuery=query(collection(db,`products/${productId}/reviews`));return onSnapshot(reviewsQuery,snapshot=>{const reviews=snapshot.docs.map(doc=>({id:doc.id,...doc.data()}));callback(reviews);});},addReview:async(productId,review)=>{await addDoc(collection(db,`products/${productId}/reviews`),review);},uploadImage:async file=>{const storageRef=ref(storage,`products/${Date.now()}_${file.name}`);await uploadBytes(storageRef,file);return getDownloadURL(storageRef);},deleteImage:async imageUrl=>{// Zapobiegaj próbie usunięcia przykładowych zdjęć z unsplash\nif(imageUrl.includes('unsplash.com')){console.log(\"Próba usunięcia przykładowego zdjęcia - operacja zignorowana.\");return;}try{const imageRef=ref(storage,imageUrl);await deleteObject(imageRef);}catch(error){if(error.code==='storage/object-not-found'){console.warn(\"Próbowano usunąć obraz, który nie istnieje w Firebase Storage:\",imageUrl);}else{throw error;}}},// Funkcje dla admina\naddProduct:async product=>addDoc(collection(db,'products'),product),updateProduct:async(id,product)=>updateDoc(doc(db,'products',id),product),deleteProduct:async id=>deleteDoc(doc(db,'products',id)),fetchOrders:async()=>{const ordersCol=collection(db,'orders');const snapshot=await getDocs(ordersCol);return snapshot.docs.map(doc=>({id:doc.id,...doc.data()}));},updateOrderStatus:async(id,status)=>updateDoc(doc(db,'orders',id),{status})};// --- CONTEXT API ---\nconst AppContext=/*#__PURE__*/createContext();export const useAppContext=()=>useContext(AppContext);// Komponent do wyświetlania błędów uprawnień\nconst PermissionErrorDisplay=_ref=>{let{message}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-900 border-l-4 border-red-500 text-red-100 p-4\",role:\"alert\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-bold\",children:\"B\\u0142\\u0105d uprawnie\\u0144\"}),/*#__PURE__*/_jsx(\"p\",{children:message})]});};// Centrum powiadomień\nconst NotificationCenter=_ref2=>{let{notifications}=_ref2;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed top-5 right-5 z-50\",children:/*#__PURE__*/_jsx(AnimatePresence,{children:notifications.map(note=>/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:-20,scale:0.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,x:50,scale:0.9},transition:{duration:0.4},className:`mb-2 p-4 rounded-lg shadow-xl text-white ${note.type==='error'?'bg-red-600':'bg-green-600'}`,children:note.message},note.id))})});};// Ekran ładowania\nconst LoadingScreen=()=>/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-900 bg-opacity-80 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(Zap,{className:\"text-blue-400 w-16 h-16 animate-pulse\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white mt-4 text-lg\",children:\"\\u0141adowanie...\"})]})});// --- KOMPONENTY UI ---\nconst Header=_ref3=>{let{isMobileMenuOpen,setIsMobileMenuOpen}=_ref3;const{user,userRole,cartItemCount,navigate,handleLogout}=useAppContext();return/*#__PURE__*/_jsxs(\"header\",{className:\"bg-gray-900 bg-opacity-80 text-white p-4 flex items-center justify-between fixed top-0 left-0 right-0 z-40 backdrop-blur-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-6\",children:[/*#__PURE__*/_jsx(\"a\",{onClick:()=>navigate('home'),className:\"cursor-pointer\",children:/*#__PURE__*/_jsx(\"img\",{src:logoUrl,alt:\"EV-Shop Logo\",className:\"h-10\"})}),/*#__PURE__*/_jsxs(\"nav\",{className:\"hidden md:flex items-center space-x-6\",children:[/*#__PURE__*/_jsx(\"a\",{onClick:()=>navigate('category','Ładowarki'),className:\"hover:text-blue-400 transition-colors\",children:\"\\u0141adowarki\"}),/*#__PURE__*/_jsx(\"a\",{onClick:()=>navigate('category','Adaptery'),className:\"hover:text-blue-400 transition-colors\",children:\"Adaptery\"}),/*#__PURE__*/_jsx(\"a\",{onClick:()=>navigate('category','Akcesoria'),className:\"hover:text-blue-400 transition-colors\",children:\"Akcesoria\"}),/*#__PURE__*/_jsx(\"a\",{onClick:()=>navigate('category','Baterie'),className:\"hover:text-blue-400 transition-colors\",children:\"Baterie\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"hidden md:flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"a\",{onClick:()=>navigate('cart'),className:\"relative cursor-pointer group\",children:[/*#__PURE__*/_jsx(ShoppingCart,{className:\"h-7 w-7 text-gray-400 group-hover:text-blue-400 transition-colors\"}),cartItemCount>0&&/*#__PURE__*/_jsx(\"span\",{className:\"absolute -top-2 -right-2 bg-blue-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center animate-pulse\",children:cartItemCount})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative group\",children:[/*#__PURE__*/_jsx(\"a\",{onClick:()=>user?null:navigate('login'),className:\"cursor-pointer\",children:/*#__PURE__*/_jsx(User,{className:\"h-7 w-7 text-gray-400 group-hover:text-blue-400 transition-colors\"})}),user?/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-0 mt-2 w-56 bg-gray-800 border border-gray-700 rounded-md shadow-lg py-1 z-20 opacity-0 group-hover:opacity-100 transition-opacity duration-300\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"px-4 py-2 text-sm text-gray-400 border-b border-gray-700\",children:\"Zalogowano jako:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"px-4 pt-1 pb-2 text-sm text-white truncate\",children:user.email}),userRole==='admin'&&/*#__PURE__*/_jsxs(\"a\",{onClick:()=>navigate('admin'),className:\"flex items-center w-full px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 cursor-pointer\",children:[/*#__PURE__*/_jsx(Settings,{className:\"w-4 h-4 mr-2\"}),\"Panel Admina\"]}),/*#__PURE__*/_jsxs(\"a\",{onClick:handleLogout,className:\"flex items-center w-full px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 cursor-pointer\",children:[/*#__PURE__*/_jsx(LogOut,{className:\"w-4 h-4 mr-2\"}),\"Wyloguj\"]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-0 mt-2 w-48 bg-gray-800 border border-gray-700 rounded-md shadow-lg py-1 z-20 opacity-0 group-hover:opacity-100 transition-opacity duration-300\",children:[/*#__PURE__*/_jsx(\"a\",{onClick:()=>navigate('login'),className:\"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 cursor-pointer\",children:\"Zaloguj si\\u0119\"}),/*#__PURE__*/_jsx(\"a\",{onClick:()=>navigate('register'),className:\"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 cursor-pointer\",children:\"Zarejestruj si\\u0119\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"md:hidden\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsMobileMenuOpen(!isMobileMenuOpen),children:isMobileMenuOpen?/*#__PURE__*/_jsx(X,{className:\"h-7 w-7\"}):/*#__PURE__*/_jsx(Menu,{className:\"h-7 w-7\"})})})]})]});};const Footer=()=>/*#__PURE__*/_jsxs(\"footer\",{className:\"bg-gray-900 text-gray-400 py-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto grid grid-cols-2 md:grid-cols-4 gap-8 px-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-white mb-4\",children:\"EV-Shop\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Twoje \\u017Ar\\xF3d\\u0142o energii dla mobilno\\u015Bci.\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-white mb-4\",children:\"Kategorie\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"hover:text-white\",children:\"\\u0141adowarki\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"hover:text-white\",children:\"Adaptery\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"hover:text-white\",children:\"Akcesoria\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"hover:text-white\",children:\"Baterie\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-white mb-4\",children:\"Obs\\u0142uga Klienta\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"hover:text-white\",children:\"Kontakt\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"hover:text-white\",children:\"FAQ\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"hover:text-white\",children:\"Dostawa i zwroty\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-white mb-4\",children:\"Newsletter\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Tw\\xF3j e-mail\",className:\"bg-gray-800 p-2 rounded w-full mb-2\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-600 text-white py-2 px-4 rounded w-full hover:bg-blue-700\",children:\"Zapisz si\\u0119\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-8 pt-8 border-t border-gray-800\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\xA9 2024 EV-Shop. Wszystkie prawa zastrze\\u017Cone.\"})})]});const ProductCard=_ref4=>{let{product,navigate}=_ref4;return/*#__PURE__*/_jsxs(motion.div,{layout:true,initial:{opacity:0,scale:0.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0.9},transition:{duration:0.3},onClick:()=>navigate('product',product.id),className:\"bg-gray-800 rounded-lg overflow-hidden shadow-lg cursor-pointer group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative h-56\",children:[/*#__PURE__*/_jsx(\"img\",{src:product.imageUrls[0]||defaultProductImageUrl,alt:product.name,className:\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"}),product.bestseller&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-2 left-2 bg-yellow-500 text-gray-900 px-2 py-1 text-xs font-bold rounded\",children:\"BESTSELLER\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-white truncate\",children:product.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-400 text-sm mb-2\",children:[product.brand,\" - \",product.category]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-xl font-bold text-blue-400\",children:[product.price,\" PLN\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Star,{className:\"w-5 h-5 text-yellow-400\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-white ml-1\",children:product.rating})]})]})]})]});};const BestsellersSection=_ref5=>{let{products,navigate}=_ref5;const featuredProducts=products.filter(p=>p.bestseller).slice(0,4);return/*#__PURE__*/_jsxs(\"section\",{className:\"py-20\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-center mb-12 text-white\",children:\"Bestsellery\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8\",children:featuredProducts.map(product=>/*#__PURE__*/_jsx(ProductCard,{product:product,navigate:navigate},product.id))})]});};const CategoriesSection=_ref6=>{let{categories,navigate}=_ref6;return/*#__PURE__*/_jsx(\"section\",{className:\"py-20 bg-gray-800 text-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-4xl font-bold text-center mb-12\",children:\"Przegl\\u0105daj Kategorie\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8\",children:categories.map((category,index)=>/*#__PURE__*/_jsx(motion.div,{className:\"category-card bg-gray-900 rounded-lg overflow-hidden shadow-lg cursor-pointer group\",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.5,delay:index*0.1},onClick:()=>navigate('category',category.name),children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative h-64\",children:[/*#__PURE__*/_jsx(\"img\",{src:category.image,alt:category.name,className:\"w-full h-full object-cover transition-transform duration-300 transform group-hover:scale-105\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white text-2xl font-bold\",children:category.name})})]})},category.name))})]})});};const FeaturedInfoSection=()=>/*#__PURE__*/_jsx(\"section\",{className:\"py-20 bg-gray-900 text-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold mb-8\",children:\"Dlaczego EV-Shop?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-3 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(Truck,{className:\"w-12 h-12 mx-auto text-blue-400 mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-2\",children:\"Szybka Dostawa\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400\",children:\"Twoje zam\\xF3wienie dotrze do Ciebie w mgnieniu oka.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(CreditCard,{className:\"w-12 h-12 mx-auto text-blue-400 mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-2\",children:\"Bezpieczne P\\u0142atno\\u015Bci\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400\",children:\"Gwarantujemy bezpiecze\\u0144stwo Twoich transakcji.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(ShieldCheck,{className:\"w-12 h-12 mx-auto text-blue-400 mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-2\",children:\"Gwarancja Jako\\u015Bci\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400\",children:\"Oferujemy tylko sprawdzone i certyfikowane produkty.\"})]})]})]})});const HomePage=_ref7=>{let{products,categories,navigate}=_ref7;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(HeroSection,{navigate:navigate}),/*#__PURE__*/_jsxs(\"main\",{id:\"products-section\",className:\"container mx-auto p-4 -mt-24 relative z-10 bg-gray-900 rounded-t-2xl shadow-lg\",children:[/*#__PURE__*/_jsx(BestsellersSection,{products:products,navigate:navigate}),/*#__PURE__*/_jsx(CategoriesSection,{categories:categories,navigate:navigate}),/*#__PURE__*/_jsx(FeaturedInfoSection,{})]})]});};const CategoryPage=_ref8=>{let{navigate,products,categoryName}=_ref8;const[filteredProducts,setFilteredProducts]=useState([]);const[searchTerm,setSearchTerm]=useState('');const[priceRange,setPriceRange]=useState([0,30000]);const[brands,setBrands]=useState([]);const[selectedBrands,setSelectedBrands]=useState([]);const[sortBy,setSortBy]=useState('rating_desc');useEffect(()=>{const categoryProducts=products.filter(p=>p.category===categoryName);const availableBrands=[...new Set(categoryProducts.map(p=>p.brand))];setBrands(availableBrands);setSelectedBrands(availableBrands);setFilteredProducts(categoryProducts);// Ustaw początkowe produkty\n},[products,categoryName]);useEffect(()=>{let tempProducts=products.filter(p=>p.category===categoryName);// Wyszukiwanie\nif(searchTerm){tempProducts=tempProducts.filter(p=>p.name.toLowerCase().includes(searchTerm.toLowerCase()));}// Filtracja po cenie\ntempProducts=tempProducts.filter(p=>p.price>=priceRange[0]&&p.price<=priceRange[1]);// Filtracja po marce\ntempProducts=tempProducts.filter(p=>selectedBrands.includes(p.brand));// Sortowanie\ntempProducts.sort((a,b)=>{switch(sortBy){case'price_asc':return a.price-b.price;case'price_desc':return b.price-a.price;case'rating_desc':return b.rating-a.rating;default:return 0;}});setFilteredProducts(tempProducts);},[products,categoryName,searchTerm,priceRange,selectedBrands,sortBy]);const handleBrandChange=brand=>{setSelectedBrands(prev=>prev.includes(brand)?prev.filter(b=>b!==brand):[...prev,brand]);};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto mt-24 p-4 text-white\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold mb-8 text-center\",children:categoryName}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-4 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-1 bg-gray-800 p-6 rounded-lg h-fit\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-semibold mb-6 flex items-center\",children:[/*#__PURE__*/_jsx(Filter,{className:\"mr-2\"}),\"Filtry\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block mb-2\",children:\"Szukaj\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Nazwa produktu...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"w-full p-2 bg-gray-700 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block mb-2\",children:[\"Cena: \",priceRange[0],\" - \",priceRange[1],\" PLN\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"0\",max:\"30000\",step:\"100\",value:priceRange[1],onChange:e=>setPriceRange([priceRange[0],Number(e.target.value)]),className:\"w-full\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-2\",children:\"Marka\"}),brands.map(brand=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-1\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:brand,checked:selectedBrands.includes(brand),onChange:()=>handleBrandChange(brand),className:\"mr-2\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:brand,children:brand})]},brand))]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block mb-2\",children:\"Sortuj wed\\u0142ug\"}),/*#__PURE__*/_jsxs(\"select\",{value:sortBy,onChange:e=>setSortBy(e.target.value),className:\"w-full p-2 bg-gray-700 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"rating_desc\",children:\"Ocena malej\\u0105co\"}),/*#__PURE__*/_jsx(\"option\",{value:\"price_asc\",children:\"Cena rosn\\u0105co\"}),/*#__PURE__*/_jsx(\"option\",{value:\"price_desc\",children:\"Cena malej\\u0105co\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-3\",children:[/*#__PURE__*/_jsx(AnimatePresence,{children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\",children:filteredProducts.map(product=>/*#__PURE__*/_jsx(ProductCard,{product:product,navigate:navigate},product.id))})}),filteredProducts.length===0&&/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-400 mt-10\",children:\"Brak produkt\\xF3w spe\\u0142niaj\\u0105cych kryteria.\"})]})]})]});};const ReviewsSection=_ref9=>{let{productId,reviews}=_ref9;const{user}=useAppContext();const[newReview,setNewReview]=useState({rating:5,text:''});const handleReviewSubmit=async e=>{e.preventDefault();if(!user){alert(\"Musisz być zalogowany, aby dodać opinię.\");return;}if(!newReview.text){alert(\"Opinia nie może być pusta.\");return;}await api.addReview(productId,{...newReview,author:user.email,createdAt:new Date()});setNewReview({rating:5,text:''});};return/*#__PURE__*/_jsxs(\"div\",{className:\"mt-12\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-2xl font-bold mb-4\",children:[\"Opinie klient\\xF3w (\",reviews.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:reviews.map(review=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 p-4 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex\",children:[...Array(5)].map((_,i)=>/*#__PURE__*/_jsx(Star,{className:`w-5 h-5 ${i<review.rating?'text-yellow-400':'text-gray-600'}`},i))}),/*#__PURE__*/_jsx(\"p\",{className:\"ml-4 font-semibold\",children:review.author})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-300\",children:review.text})]},review.id))}),user&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleReviewSubmit,className:\"mt-8 bg-gray-800 p-6 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-semibold mb-4\",children:\"Dodaj swoj\\u0105 opini\\u0119\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-4\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Twoja ocena:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex ml-4\",children:[...Array(5)].map((_,i)=>/*#__PURE__*/_jsx(Star,{className:`w-6 h-6 cursor-pointer ${i<newReview.rating?'text-yellow-400':'text-gray-600'}`,onClick:()=>setNewReview({...newReview,rating:i+1})},i))})]}),/*#__PURE__*/_jsx(\"textarea\",{value:newReview.text,onChange:e=>setNewReview({...newReview,text:e.target.value}),placeholder:\"Twoja opinia...\",className:\"w-full p-2 bg-gray-700 rounded h-24 mb-4\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\",children:\"Dodaj opini\\u0119\"})]})]});};const ProductPage=_ref0=>{let{navigate,productId}=_ref0;const[product,setProduct]=useState(null);const[reviews,setReviews]=useState([]);const[isLoading,setIsLoading]=useState(true);const[activeImage,setActiveImage]=useState(0);const{addToCart}=useAppContext();useEffect(()=>{const fetchData=async()=>{setIsLoading(true);const productData=await api.fetchProduct(productId);setProduct(productData);setIsLoading(false);};fetchData();const unsubscribe=api.getReviews(productId,setReviews);return()=>unsubscribe();},[productId]);if(isLoading)return/*#__PURE__*/_jsx(LoadingScreen,{});if(!product)return/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-24 text-white\",children:\"Produkt nie zosta\\u0142 znaleziony.\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto mt-24 p-4 text-white\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-12\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"relative h-96 bg-gray-800 rounded-lg mb-4\",children:/*#__PURE__*/_jsx(\"img\",{src:product.imageUrls[activeImage],alt:product.name,className:\"w-full h-full object-contain\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-2\",children:product.imageUrls.map((url,index)=>/*#__PURE__*/_jsx(\"img\",{src:url,alt:`${product.name} thumbnail ${index+1}`,onClick:()=>setActiveImage(index),className:`w-24 h-24 object-cover rounded-md cursor-pointer border-2 ${activeImage===index?'border-blue-500':'border-transparent'}`},index))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-extrabold mb-2\",children:product.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-400 mb-4\",children:[product.brand,\" - \",product.category]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex\",children:[...Array(5)].map((_,i)=>/*#__PURE__*/_jsx(Star,{className:`w-5 h-5 ${i<product.rating?'text-yellow-400':'text-gray-600'}`},i))}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2\",children:[\"(\",reviews.length,\" opinii)\"]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-blue-400 mb-6\",children:[product.price,\" PLN\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-300 mb-6\",children:product.description}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>addToCart(product),className:\"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg flex items-center justify-center text-lg\",children:[/*#__PURE__*/_jsx(ShoppingCart,{className:\"mr-2\"}),\" Dodaj do koszyka\"]})]})]}),/*#__PURE__*/_jsx(ReviewsSection,{productId:productId,reviews:reviews})]});};const CartPage=_ref1=>{let{navigate}=_ref1;const{cart,updateCartQuantity,removeFromCart,clearCart}=useAppContext();const totalPrice=cart.reduce((acc,item)=>acc+item.price*item.quantity,0);return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto mt-24 p-4 text-white\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold mb-8\",children:\"Tw\\xF3j Koszyk\"}),cart.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Koszyk jest pusty.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('home'),className:\"mt-4 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\",children:\"Wr\\xF3\\u0107 do sklepu\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-2 space-y-4\",children:cart.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-gray-800 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"img\",{src:item.imageUrls[0],alt:item.name,className:\"w-24 h-24 object-cover rounded-md mr-4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-grow\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold\",children:item.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-400\",children:[item.price,\" PLN\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateCartQuantity(item.id,item.quantity-1),disabled:item.quantity<=1,className:\"p-1 bg-gray-700 rounded\",children:/*#__PURE__*/_jsx(Minus,{})}),/*#__PURE__*/_jsx(\"span\",{className:\"w-12 text-center\",children:item.quantity}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateCartQuantity(item.id,item.quantity+1),className:\"p-1 bg-gray-700 rounded\",children:/*#__PURE__*/_jsx(Plus,{})})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"w-24 text-right font-semibold\",children:[item.price*item.quantity,\" PLN\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFromCart(item.id),className:\"ml-4 text-gray-400 hover:text-red-500\",children:/*#__PURE__*/_jsx(Trash2,{})})]},item.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-1 bg-gray-800 p-6 rounded-lg h-fit\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\"Podsumowanie\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Suma cz\\u0119\\u015Bciowa:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[totalPrice.toFixed(2),\" PLN\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Dostawa:\"}),/*#__PURE__*/_jsx(\"span\",{children:\"GRATIS\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between font-bold text-xl border-t border-gray-700 pt-4 mt-4\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Do zap\\u0142aty:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[totalPrice.toFixed(2),\" PLN\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('checkout'),className:\"w-full mt-6 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg\",children:\"Przejd\\u017A do kasy\"}),/*#__PURE__*/_jsx(\"button\",{onClick:clearCart,className:\"w-full mt-2 bg-red-600 hover:bg-red-700 text-white font-bold py-2 rounded-lg\",children:\"Wyczy\\u015B\\u0107 koszyk\"})]})]})]});};const CheckoutPage=_ref10=>{let{navigate}=_ref10;const{cart,user,clearCart,addNotification,setOrderDetails}=useAppContext();const[shippingInfo,setShippingInfo]=useState({name:'',address:'',city:'',zip:'',country:'Polska'});const[currentStep,setCurrentStep]=useState(1);const handleChange=e=>{setShippingInfo({...shippingInfo,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();if(currentStep===1){setCurrentStep(2);}else if(currentStep===2){// Logika płatności (symulacja)\nsetCurrentStep(3);try{const orderData={userId:user?user.uid:'guest',items:cart,total:cart.reduce((acc,item)=>acc+item.price*item.quantity,0),shippingInfo,status:'Nowe',createdAt:new Date()};const docRef=await addDoc(collection(db,'orders'),orderData);setOrderDetails({...orderData,id:docRef.id});clearCart();addNotification(\"Zamówienie złożone pomyślnie!\",\"success\");navigate('order-confirmation');}catch(error){addNotification(\"Błąd podczas składania zamówienia.\",\"error\");console.error(\"Błąd zapisu zamówienia:\",error);setCurrentStep(2);// Wróć do płatności w razie błędu\n}}};const ProgressBar=_ref11=>{let{currentStep}=_ref11;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center w-full mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:`flex-1 text-center ${currentStep>=1?'text-blue-400':'text-gray-500'}`,children:[/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto w-8 h-8 rounded-full border-2 flex items-center justify-center mb-1\",children:\"1\"}),\"Dostawa\"]}),/*#__PURE__*/_jsx(\"div\",{className:`flex-1 h-0.5 ${currentStep>=2?'bg-blue-400':'bg-gray-700'}`}),/*#__PURE__*/_jsxs(\"div\",{className:`flex-1 text-center ${currentStep>=2?'text-blue-400':'text-gray-500'}`,children:[/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto w-8 h-8 rounded-full border-2 flex items-center justify-center mb-1\",children:\"2\"}),\"P\\u0142atno\\u015B\\u0107\"]}),/*#__PURE__*/_jsx(\"div\",{className:`flex-1 h-0.5 ${currentStep>=3?'bg-blue-400':'bg-gray-700'}`}),/*#__PURE__*/_jsxs(\"div\",{className:`flex-1 text-center ${currentStep>=3?'text-blue-400':'text-gray-500'}`,children:[/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto w-8 h-8 rounded-full border-2 flex items-center justify-center mb-1\",children:\"3\"}),\"Potwierdzenie\"]})]});};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto mt-24 p-4 text-white\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold mb-8 text-center\",children:\"Zam\\xF3wienie\"}),/*#__PURE__*/_jsx(ProgressBar,{currentStep:currentStep}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"max-w-lg mx-auto bg-gray-800 p-8 rounded-lg\",children:[/*#__PURE__*/_jsxs(AnimatePresence,{mode:\"wait\",children:[currentStep===1&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold mb-6\",children:\"Adres dostawy\"}),/*#__PURE__*/_jsx(\"input\",{name:\"name\",value:shippingInfo.name,onChange:handleChange,placeholder:\"Imi\\u0119 i nazwisko\",className:\"w-full p-2 bg-gray-700 rounded mb-4\",required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"address\",value:shippingInfo.address,onChange:handleChange,placeholder:\"Adres\",className:\"w-full p-2 bg-gray-700 rounded mb-4\",required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"city\",value:shippingInfo.city,onChange:handleChange,placeholder:\"Miasto\",className:\"w-full p-2 bg-gray-700 rounded mb-4\",required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"zip\",value:shippingInfo.zip,onChange:handleChange,placeholder:\"Kod pocztowy\",className:\"w-full p-2 bg-gray-700 rounded mb-4\",required:true})]},\"step1\"),currentStep===2&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold mb-6\",children:\"P\\u0142atno\\u015B\\u0107\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-400 mb-4\",children:\"Symulacja p\\u0142atno\\u015Bci. Kliknij, aby sfinalizowa\\u0107.\"})]},\"step2\"),currentStep===3&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold mb-6 text-center\",children:\"Przetwarzanie...\"}),/*#__PURE__*/_jsx(LoadingScreen,{})]},\"step3\")]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full mt-6 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg\",children:currentStep===1?\"Przejdź do płatności\":\"Zapłać i zamów\"})]})]});};const OrderConfirmationPage=_ref12=>{let{navigate,orderDetails}=_ref12;return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto mt-24 p-4 text-white text-center\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-24 h-24 mx-auto text-green-500 mb-4\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold mb-4\",children:\"Dzi\\u0119kujemy za zam\\xF3wienie!\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg text-gray-300 mb-8\",children:[\"Twoje zam\\xF3wienie #\",orderDetails.id.slice(0,8),\" zosta\\u0142o przyj\\u0119te.\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md mx-auto bg-gray-800 p-6 rounded-lg text-left mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Szczeg\\xF3\\u0142y zam\\xF3wienia\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status:\"}),\" \",orderDetails.status]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Ca\\u0142kowita kwota:\"}),\" \",orderDetails.total.toFixed(2),\" PLN\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Adres dostawy:\"}),\" \",orderDetails.shippingInfo.address,\", \",orderDetails.shippingInfo.city]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('home'),className:\"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg\",children:\"Wr\\xF3\\u0107 na stron\\u0119 g\\u0142\\xF3wn\\u0105\"})]});};const AccessDenied=_ref13=>{let{navigate}=_ref13;return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto mt-24 p-4 text-white text-center\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-24 h-24 mx-auto text-red-500 mb-4\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold mb-4\",children:\"Brak dost\\u0119pu\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-gray-300 mb-8\",children:\"Nie masz uprawnie\\u0144 do przegl\\u0105dania tej strony.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('home'),className:\"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg\",children:\"Wr\\xF3\\u0107 na stron\\u0119 g\\u0142\\xF3wn\\u0105\"})]});};const LoginPage=_ref14=>{let{navigate,addNotification}=_ref14;const[credentials,setCredentials]=useState({email:'',password:''});const[error,setError]=useState('');const{setUser}=useAppContext();const handleGoogleLogin=async()=>{const provider=new GoogleAuthProvider();try{const userCredential=await signInWithPopup(auth,provider);const additionalUserInfo=getAdditionalUserInfo(userCredential);// Create user doc only if they are a new user from Google Sign-In\nif(additionalUserInfo!==null&&additionalUserInfo!==void 0&&additionalUserInfo.isNewUser){await setDoc(doc(db,'users',userCredential.user.uid),{email:userCredential.user.email,role:'user',createdAt:new Date()});}addNotification(\"Zalogowano pomyślnie!\",\"success\");navigate('home');}catch(error){setError(\"Błąd logowania przez Google.\");addNotification(\"Błąd logowania przez Google.\",\"error\");}};const handleLogin=async e=>{e.preventDefault();try{const userCredential=await signInWithEmailAndPassword(auth,credentials.email,credentials.password);setUser(userCredential.user);addNotification(\"Zalogowano pomyślnie!\",\"success\");navigate('home');}catch(error){setError('Nieprawidłowy email lub hasło.');addNotification(\"Nieprawidłowy email lub hasło.\",\"error\");}};const handleChange=e=>{setCredentials({...credentials,[e.target.name]:e.target.value});};return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen bg-gray-900 text-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md p-8 space-y-8 bg-gray-800 rounded-lg shadow-lg\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-center\",children:\"Logowanie\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-center\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Email\",onChange:handleChange,className:\"w-full p-3 bg-gray-700 rounded\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Has\\u0142o\",onChange:handleChange,className:\"w-full p-3 bg-gray-700 rounded\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full p-3 bg-blue-600 rounded font-bold hover:bg-blue-700\",children:\"Zaloguj\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-gray-400\",children:\"lub\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleGoogleLogin,className:\"w-full p-3 bg-red-600 rounded font-bold hover:bg-red-700 flex items-center justify-center\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c1/Google_%22G%22_logo.svg/768px-Google_%22G%22_logo.svg.png\",alt:\"Google\",className:\"w-5 h-5 mr-2\"}),\"Zaloguj przez Google\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"a\",{onClick:()=>navigate('register'),className:\"font-medium text-blue-400 hover:text-blue-300 cursor-pointer\",children:\"Nie masz konta? Zarejestruj si\\u0119\"})})]})});};const RegisterPage=_ref15=>{let{navigate,addNotification}=_ref15;const[credentials,setCredentials]=useState({email:'',password:'',confirmPassword:''});const[error,setError]=useState('');const{setUser}=useAppContext();const handleRegister=async e=>{e.preventDefault();if(credentials.password!==credentials.confirmPassword){setError('Hasła nie są zgodne.');return;}try{const userCredential=await createUserWithEmailAndPassword(auth,credentials.email,credentials.password);// Ustawienie domyślnej roli 'user' dla nowego użytkownika\nawait setDoc(doc(db,'users',userCredential.user.uid),{email:userCredential.user.email,role:'user',createdAt:new Date()});setUser(userCredential.user);addNotification(\"Rejestracja pomyślna!\",\"success\");navigate('home');}catch(error){setError('Błąd rejestracji. Sprawdź, czy email jest poprawny.');addNotification(\"Błąd rejestracji.\",\"error\");}};const handleChange=e=>{setCredentials({...credentials,[e.target.name]:e.target.value});};return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen bg-gray-900 text-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md p-8 space-y-8 bg-gray-800 rounded-lg shadow-lg\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-center\",children:\"Rejestracja\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-center\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleRegister,className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Email\",onChange:handleChange,className:\"w-full p-3 bg-gray-700 rounded\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Has\\u0142o\",onChange:handleChange,className:\"w-full p-3 bg-gray-700 rounded\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"confirmPassword\",placeholder:\"Potwierd\\u017A has\\u0142o\",onChange:handleChange,className:\"w-full p-3 bg-gray-700 rounded\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full p-3 bg-blue-600 rounded font-bold hover:bg-blue-700\",children:\"Zarejestruj\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"a\",{onClick:()=>navigate('login'),className:\"font-medium text-blue-400 hover:text-blue-300 cursor-pointer\",children:\"Masz ju\\u017C konto? Zaloguj si\\u0119\"})})]})});};const AdminPanel=_ref16=>{let{navigate}=_ref16;const[activeTab,setActiveTab]=useState('dashboard');const{userRole}=useAppContext();if(userRole!=='admin'){return/*#__PURE__*/_jsx(AccessDenied,{navigate:navigate});}const renderContent=()=>{switch(activeTab){case'dashboard':return/*#__PURE__*/_jsx(AdminDashboard,{});case'products':return/*#__PURE__*/_jsx(AdminProducts,{});case'orders':return/*#__PURE__*/_jsx(AdminOrders,{});default:return/*#__PURE__*/_jsx(AdminDashboard,{});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto mt-24 p-4 text-white\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold mb-8\",children:\"Panel Administratora\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex border-b border-gray-700 mb-8\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('dashboard'),className:`py-2 px-4 ${activeTab==='dashboard'?'border-b-2 border-blue-500 text-blue-400':'text-gray-400'}`,children:\"Dashboard\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('products'),className:`py-2 px-4 ${activeTab==='products'?'border-b-2 border-blue-500 text-blue-400':'text-gray-400'}`,children:\"Produkty\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('orders'),className:`py-2 px-4 ${activeTab==='orders'?'border-b-2 border-blue-500 text-blue-400':'text-gray-400'}`,children:\"Zam\\xF3wienia\"})]}),/*#__PURE__*/_jsx(\"div\",{children:renderContent()})]});};const AdminDashboard=()=>{const[stats,setStats]=useState({products:0,orders:0,users:0,revenue:0});useEffect(()=>{const fetchStats=async()=>{const products=await getDocs(collection(db,'products'));const orders=await getDocs(collection(db,'orders'));const users=await getDocs(collection(db,'users'));const totalRevenue=orders.docs.reduce((acc,doc)=>acc+doc.data().total,0);setStats({products:products.size,orders:orders.size,users:users.size,revenue:totalRevenue});};fetchStats();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 p-6 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-gray-400\",children:\"Produkty\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold\",children:stats.products})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 p-6 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-gray-400\",children:\"Zam\\xF3wienia\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold\",children:stats.orders})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 p-6 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-gray-400\",children:\"U\\u017Cytkownicy\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold\",children:stats.users})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 p-6 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-gray-400\",children:\"Przych\\xF3d\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold\",children:[stats.revenue.toFixed(2),\" PLN\"]})]})]});};const AdminProducts=()=>{const[products,setProducts]=useState([]);const[isModalOpen,setIsModalOpen]=useState(false);const[editingProduct,setEditingProduct]=useState(null);const[isLoading,setIsLoading]=useState(false);const{addNotification}=useAppContext();useEffect(()=>{fetchProducts();},[]);const fetchProducts=async()=>{setIsLoading(true);const productsCol=query(collection(db,'products'));const snapshot=await getDocs(productsCol);setProducts(snapshot.docs.map(doc=>({id:doc.id,...doc.data()})));setIsLoading(false);};const handleSave=async productData=>{setIsLoading(true);try{// Funkcja do czyszczenia pustych wartości, które nie są obsługiwane przez Firestore\nconst cleanData=data=>{const cleaned={};for(const key in data){if(data[key]!==null&&data[key]!==undefined&&data[key]!==''){cleaned[key]=data[key];}}// Upewnij się, że imageUrls jest tablicą\ncleaned.imageUrls=Array.isArray(cleaned.imageUrls)?cleaned.imageUrls:[];return cleaned;};const finalData=cleanData(productData);if(editingProduct){await api.updateProduct(editingProduct.id,finalData);addNotification(\"Produkt zaktualizowany!\",\"success\");}else{await api.addProduct(finalData);addNotification(\"Produkt dodany!\",\"success\");}fetchProducts();}catch(error){console.error(\"Błąd zapisu produktu:\",error);addNotification(`Błąd zapisu: ${error.message}`,\"error\");}setIsModalOpen(false);setEditingProduct(null);setIsLoading(false);};const handleDelete=async id=>{if(window.confirm(\"Czy na pewno chcesz usunąć ten produkt?\")){try{// Najpierw usuń powiązane obrazy\nconst productToDelete=products.find(p=>p.id===id);if(productToDelete&&productToDelete.imageUrls){for(const url of productToDelete.imageUrls){await api.deleteImage(url);}}// Następnie usuń produkt\nawait api.deleteProduct(id);addNotification(\"Produkt usunięty!\",\"success\");fetchProducts();}catch(error){console.error(\"Błąd usuwania produktu:\",error);addNotification(`Błąd usuwania: ${error.message}`,\"error\");}}};const handleEdit=product=>{setEditingProduct(product);setIsModalOpen(true);};const handleAddNew=()=>{setEditingProduct(null);setIsModalOpen(true);};if(isLoading)return/*#__PURE__*/_jsx(LoadingScreen,{});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleAddNew,className:\"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mb-4\",children:\"Dodaj nowy produkt\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-800 rounded-lg overflow-hidden\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-left\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-700\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"p-4\",children:\"Nazwa\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-4\",children:\"Kategoria\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-4\",children:\"Cena\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-4\",children:\"Akcje\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.map(product=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-700\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"p-4\",children:product.name}),/*#__PURE__*/_jsx(\"td\",{className:\"p-4\",children:product.category}),/*#__PURE__*/_jsxs(\"td\",{className:\"p-4\",children:[product.price,\" PLN\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(product),className:\"text-blue-400 hover:text-blue-300 mr-2\",children:\"Edytuj\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(product.id),className:\"text-red-500 hover:text-red-400\",children:\"Usu\\u0144\"})]})]},product.id))})]})}),isModalOpen&&/*#__PURE__*/_jsx(ProductEditModal,{product:editingProduct,onSave:handleSave,onClose:()=>setIsModalOpen(false)})]});};const ProductEditModal=_ref17=>{let{product,onSave,onClose}=_ref17;const[productData,setProductData]=useState(product||{name:'',price:'',category:'',brand:'',description:'',imageUrls:[],bestseller:false});const[isUploading,setIsUploading]=useState(false);const{addNotification}=useAppContext();const handleChange=e=>{const{name,value,type,checked}=e.target;setProductData(prev=>({...prev,[name]:type==='checkbox'?checked:value}));};const handlePriceChange=e=>{setProductData(prev=>({...prev,price:parseFloat(e.target.value)||0}));};const handleImageUpload=async e=>{const file=e.target.files[0];if(file){setIsUploading(true);try{const url=await api.uploadImage(file);setProductData(prev=>({...prev,imageUrls:[...(prev.imageUrls||[]),url]}));addNotification(\"Zdjęcie dodane!\",\"success\");}catch(error){addNotification(\"Błąd przesyłania zdjęcia.\",\"error\");}setIsUploading(false);}};const handleImageDelete=async urlToDelete=>{if(window.confirm(\"Czy na pewno chcesz usunąć to zdjęcie?\")){try{await api.deleteImage(urlToDelete);setProductData(prev=>({...prev,imageUrls:prev.imageUrls.filter(url=>url!==urlToDelete)}));addNotification(\"Zdjęcie usunięte!\",\"success\");}catch(error){console.error(\"Błąd usuwania zdjęcia:\",error);addNotification(\"Błąd usuwania zdjęcia.\",\"error\");}}};const handleSubmit=e=>{e.preventDefault();onSave(productData);};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 text-white rounded-lg p-8 w-full max-w-2xl max-h-screen overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-6\",children:product?'Edytuj produkt':'Dodaj produkt'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{name:\"name\",value:productData.name,onChange:handleChange,placeholder:\"Nazwa\",className:\"w-full p-2 bg-gray-700 rounded\"}),/*#__PURE__*/_jsx(\"input\",{name:\"price\",type:\"number\",value:productData.price,onChange:handlePriceChange,placeholder:\"Cena\",className:\"w-full p-2 bg-gray-700 rounded\"}),/*#__PURE__*/_jsx(\"input\",{name:\"category\",value:productData.category,onChange:handleChange,placeholder:\"Kategoria\",className:\"w-full p-2 bg-gray-700 rounded\"}),/*#__PURE__*/_jsx(\"input\",{name:\"brand\",value:productData.brand,onChange:handleChange,placeholder:\"Marka\",className:\"w-full p-2 bg-gray-700 rounded\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:productData.description,onChange:handleChange,placeholder:\"Opis\",className:\"w-full p-2 bg-gray-700 rounded h-24\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block mb-2\",children:\"Zdj\\u0119cia:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-3 gap-2 mb-2\",children:(productData.imageUrls||[]).map(url=>/*#__PURE__*/_jsxs(\"div\",{className:\"relative group\",children:[/*#__PURE__*/_jsx(\"img\",{src:url,alt:\"product\",className:\"w-full h-24 object-cover rounded\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleImageDelete(url),type:\"button\",className:\"absolute top-1 right-1 bg-red-600 text-white p-1 rounded-full opacity-0 group-hover:opacity-100\",children:/*#__PURE__*/_jsx(Trash2,{size:14})})]},url))}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleImageUpload,className:\"w-full text-sm\"}),isUploading&&/*#__PURE__*/_jsx(\"p\",{children:\"Przesy\\u0142anie...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"bestseller\",name:\"bestseller\",checked:productData.bestseller,onChange:handleChange,className:\"mr-2\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"bestseller\",children:\"Bestseller\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"py-2 px-4 bg-gray-600 rounded\",children:\"Anuluj\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"py-2 px-4 bg-blue-600 rounded\",children:\"Zapisz\"})]})]})]})});};const AdminOrders=()=>{const[orders,setOrders]=useState([]);useEffect(()=>{const fetchOrders=async()=>{const fetchedOrders=await api.fetchOrders();setOrders(fetchedOrders);};fetchOrders();},[]);const handleStatusChange=async(orderId,newStatus)=>{await api.updateOrderStatus(orderId,newStatus);setOrders(prev=>prev.map(o=>o.id===orderId?{...o,status:newStatus}:o));};return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-800 rounded-lg overflow-hidden\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-left\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-700\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"p-4\",children:\"ID Zam\\xF3wienia\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-4\",children:\"Klient\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-4\",children:\"Data\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-4\",children:\"Suma\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-4\",children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(order=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-700\",children:[/*#__PURE__*/_jsxs(\"td\",{className:\"p-4\",children:[order.id.slice(0,8),\"...\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"p-4\",children:order.shippingInfo.name}),/*#__PURE__*/_jsx(\"td\",{className:\"p-4\",children:new Date(order.createdAt.seconds*1000).toLocaleDateString()}),/*#__PURE__*/_jsxs(\"td\",{className:\"p-4\",children:[order.total.toFixed(2),\" PLN\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"p-4\",children:/*#__PURE__*/_jsxs(\"select\",{value:order.status,onChange:e=>handleStatusChange(order.id,e.target.value),className:\"bg-gray-700 p-1 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"Nowe\"}),/*#__PURE__*/_jsx(\"option\",{children:\"W trakcie realizacji\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Wys\\u0142ane\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Zako\\u0144czone\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Anulowane\"})]})})]},order.id))})]})});};const HeroSection=_ref18=>{let{navigate}=_ref18;return/*#__PURE__*/_jsxs(\"section\",{className:\"relative h-screen bg-cover bg-center flex flex-col items-center justify-center text-white\",style:{backgroundImage:`url(${heroImageUrl})`},children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-black opacity-50\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative z-10 text-center container mx-auto px-4\",children:[/*#__PURE__*/_jsx(motion.h1,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:1},className:\"text-4xl md:text-6xl font-extrabold mb-4\",children:\"Energia dla Twojej podr\\xF3\\u017Cy\"}),/*#__PURE__*/_jsx(motion.p,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:1,delay:0.5},className:\"text-lg md:text-xl mb-8\",children:\"Najwy\\u017Cszej jako\\u015Bci \\u0142adowarki i akcesoria do pojazd\\xF3w elektrycznych.\"}),/*#__PURE__*/_jsx(motion.button,{whileHover:{scale:1.05},whileTap:{scale:0.95},onClick:()=>navigate('products'),className:\"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full text-lg transition duration-300\",children:\"Odkryj produkty\"})]})]});};export default function App(){const[page,setPage]=useState('home');const[pageData,setPageData]=useState(null);const[user,setUser]=useState(null);const[userRole,setUserRole]=useState(null);const[cart,setCart]=useState([]);const[isMobileMenuOpen,setIsMobileMenuOpen]=useState(false);const[notifications,setNotifications]=useState([]);const[orderDetails,setOrderDetails]=useState(null);const[isLoading,setIsLoading]=useState(true);const[products,setProducts]=useState([]);const[categories,setCategories]=useState([]);const notificationId=useRef(0);// Ładowanie danych i nasłuchiwanie stanu autentykacji\nuseEffect(()=>{const unsubscribe=onAuthStateChanged(auth,async currentUser=>{setUser(currentUser);if(currentUser){const userDocRef=doc(db,'users',currentUser.uid);const userDoc=await getDoc(userDocRef);if(userDoc.exists()){// Użytkownik istnieje, wczytaj jego rolę\nsetUserRole(userDoc.data().role);}else{// Nie twórz dokumentu tutaj, aby uniknąć nadpisywania ról.\n// Tworzenie dokumentu jest teraz obsługiwane w `handleRegister` i `handleGoogleLogin`.\n// Warunek wyścigu może oznaczać, że dokument nie jest od razu dostępny.\n// Domyślne ustawienie \"user\" lokalnie jest bezpieczne.\nsetUserRole('user');}}else{setUserRole(null);}loadInitialData();// Przeładuj dane po zmianie użytkownika\n});return()=>unsubscribe();},[]);const loadInitialData=async()=>{setIsLoading(true);const[productsData,categoriesData]=await Promise.all([api.fetchProducts(),api.fetchCategories()]);setProducts(productsData);setCategories(categoriesData);setIsLoading(false);};// Obsługa koszyka\nuseEffect(()=>{const savedCart=localStorage.getItem('cart');if(savedCart){setCart(JSON.parse(savedCart));}},[]);useEffect(()=>{localStorage.setItem('cart',JSON.stringify(cart));},[cart]);const addNotification=function(message){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'success';const id=notificationId.current++;setNotifications(prev=>[...prev,{id,message,type}]);setTimeout(()=>{setNotifications(prev=>prev.filter(note=>note.id!==id));},3000);};const navigate=function(newPage){let data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;setPage(newPage);setPageData(data);window.scrollTo(0,0);setIsMobileMenuOpen(false);// Zamknij menu mobilne przy nawigacji\n};const addToCart=function(product){let quantity=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;setCart(prevCart=>{const existingItem=prevCart.find(item=>item.id===product.id);if(existingItem){return prevCart.map(item=>item.id===product.id?{...item,quantity:item.quantity+quantity}:item);}return[...prevCart,{...product,quantity}];});addNotification(`${product.name} dodano do koszyka!`,\"success\");};const updateCartQuantity=(productId,newQuantity)=>{if(newQuantity<1){removeFromCart(productId);}else{setCart(cart.map(item=>item.id===productId?{...item,quantity:newQuantity}:item));}};const removeFromCart=productId=>{setCart(cart.filter(item=>item.id!==productId));};const clearCart=()=>setCart([]);const cartItemCount=cart.reduce((acc,item)=>acc+item.quantity,0);const handleLogout=async()=>{await signOut(auth);addNotification(\"Wylogowano pomyślnie.\",\"success\");navigate('home');};const renderPage=()=>{switch(page){case'home':return/*#__PURE__*/_jsx(HomePage,{products:products,categories:categories,navigate:navigate});case'category':return/*#__PURE__*/_jsx(CategoryPage,{navigate:navigate,products:products,categoryName:pageData});case'product':return/*#__PURE__*/_jsx(ProductPage,{navigate:navigate,productId:pageData});case'cart':return/*#__PURE__*/_jsx(CartPage,{navigate:navigate});case'checkout':return/*#__PURE__*/_jsx(CheckoutPage,{navigate:navigate});case'order-confirmation':return/*#__PURE__*/_jsx(OrderConfirmationPage,{navigate:navigate,orderDetails:orderDetails});case'login':return/*#__PURE__*/_jsx(LoginPage,{navigate:navigate,addNotification:addNotification});case'register':return/*#__PURE__*/_jsx(RegisterPage,{navigate:navigate,addNotification:addNotification});case'admin':return/*#__PURE__*/_jsx(AdminPanel,{navigate:navigate});default:return/*#__PURE__*/_jsx(HomePage,{products:products,categories:categories,navigate:navigate});}};const contextValue={user,userRole,cart,addToCart,updateCartQuantity,removeFromCart,clearCart,cartItemCount,navigate,addNotification,handleLogout,setUser,setOrderDetails};return/*#__PURE__*/_jsx(AppContext.Provider,{value:contextValue,children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-900 min-h-screen font-sans\",children:[isLoading&&/*#__PURE__*/_jsx(LoadingScreen,{}),/*#__PURE__*/_jsx(NotificationCenter,{notifications:notifications}),/*#__PURE__*/_jsx(Header,{isMobileMenuOpen:isMobileMenuOpen,setIsMobileMenuOpen:setIsMobileMenuOpen}),/*#__PURE__*/_jsx(AnimatePresence,{mode:\"wait\",children:/*#__PURE__*/_jsx(motion.main,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:0.3},children:renderPage()},page)}),/*#__PURE__*/_jsx(AnimatePresence,{children:isMobileMenuOpen&&/*#__PURE__*/_jsx(motion.div,{initial:{x:'100%'},animate:{x:0},exit:{x:'100%'},transition:{type:'spring',stiffness:300,damping:30},className:\"fixed top-0 right-0 h-full w-64 bg-gray-800 z-30 p-6 md:hidden\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"flex flex-col space-y-4 text-white\",children:[/*#__PURE__*/_jsx(\"a\",{onClick:()=>navigate('category','Ładowarki'),className:\"hover:text-blue-400\",children:\"\\u0141adowarki\"}),/*#__PURE__*/_jsx(\"a\",{onClick:()=>navigate('category','Adaptery'),className:\"hover:text-blue-400\",children:\"Adaptery\"}),/*#__PURE__*/_jsx(\"a\",{onClick:()=>navigate('category','Akcesoria'),className:\"hover:text-blue-400\",children:\"Akcesoria\"}),/*#__PURE__*/_jsx(\"a\",{onClick:()=>navigate('category','Baterie'),className:\"hover:text-blue-400\",children:\"Baterie\"}),/*#__PURE__*/_jsx(\"hr\",{className:\"border-gray-700\"}),/*#__PURE__*/_jsxs(\"a\",{onClick:()=>navigate('cart'),className:\"hover:text-blue-400\",children:[\"Koszyk (\",cartItemCount,\")\"]}),user?/*#__PURE__*/_jsxs(_Fragment,{children:[userRole==='admin'&&/*#__PURE__*/_jsx(\"a\",{onClick:()=>navigate('admin'),className:\"hover:text-blue-400\",children:\"Panel Admina\"}),/*#__PURE__*/_jsx(\"a\",{onClick:handleLogout,className:\"hover:text-blue-400\",children:\"Wyloguj\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"a\",{onClick:()=>navigate('login'),className:\"hover:text-blue-400\",children:\"Zaloguj si\\u0119\"}),/*#__PURE__*/_jsx(\"a\",{onClick:()=>navigate('register'),className:\"hover:text-blue-400\",children:\"Zarejestruj si\\u0119\"})]})]})})}),/*#__PURE__*/_jsx(Footer,{})]})});}","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","createContext","useContext","initializeApp","getAnalytics","getAuth","onAuthStateChanged","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","GoogleAuthProvider","signInWithPopup","getAdditionalUserInfo","getFirestore","collection","getDocs","doc","getDoc","addDoc","updateDoc","deleteDoc","query","where","onSnapshot","setDoc","getStorage","ref","uploadBytes","getDownloadURL","deleteObject","ShoppingCart","User","Star","Menu","X","Trash2","Plus","Minus","Truck","CreditCard","ShieldCheck","Search","Filter","LogOut","Settings","ArrowRight","Eye","Zap","ImagePlus","AlertCircle","CheckCircle","BarChart","ChevronDown","motion","AnimatePresence","categoryChargers","categoryAdapters","categoryAccessories","categoryBatteries","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","analytics","auth","db","storage","adminUID","logoUrl","process","env","PUBLIC_URL","defaultProductImageUrl","heroImageUrl","categoriesData","name","image","sampleTeslaProducts","id","price","category","brand","rating","bestseller","description","imageUrls","api","fetchProducts","productsCol","snapshot","firebaseProducts","docs","map","data","length","allProducts","uniqueProducts","filter","product","index","self","findIndex","p","error","console","fetchCategories","fetchProduct","docRef","docSnap","exists","getReviews","productId","callback","reviewsQuery","reviews","addReview","review","uploadImage","file","storageRef","Date","now","deleteImage","imageUrl","includes","log","imageRef","code","warn","addProduct","updateProduct","deleteProduct","fetchOrders","ordersCol","updateOrderStatus","status","AppContext","useAppContext","PermissionErrorDisplay","_ref","message","className","role","children","NotificationCenter","_ref2","notifications","note","div","initial","opacity","y","scale","animate","exit","x","transition","duration","type","LoadingScreen","Header","_ref3","isMobileMenuOpen","setIsMobileMenuOpen","user","userRole","cartItemCount","navigate","handleLogout","onClick","src","alt","email","Footer","href","placeholder","ProductCard","_ref4","layout","BestsellersSection","_ref5","products","featuredProducts","slice","CategoriesSection","_ref6","categories","delay","FeaturedInfoSection","HomePage","_ref7","HeroSection","CategoryPage","_ref8","categoryName","filteredProducts","setFilteredProducts","searchTerm","setSearchTerm","priceRange","setPriceRange","brands","setBrands","selectedBrands","setSelectedBrands","sortBy","setSortBy","categoryProducts","availableBrands","Set","tempProducts","toLowerCase","sort","a","b","handleBrandChange","prev","value","onChange","e","target","min","max","step","Number","checked","htmlFor","ReviewsSection","_ref9","newReview","setNewReview","text","handleReviewSubmit","preventDefault","alert","author","createdAt","Array","_","i","onSubmit","ProductPage","_ref0","setProduct","setReviews","isLoading","setIsLoading","activeImage","setActiveImage","addToCart","fetchData","productData","unsubscribe","url","CartPage","_ref1","cart","updateCartQuantity","removeFromCart","clearCart","totalPrice","reduce","acc","item","quantity","disabled","toFixed","CheckoutPage","_ref10","addNotification","setOrderDetails","shippingInfo","setShippingInfo","address","city","zip","country","currentStep","setCurrentStep","handleChange","handleSubmit","orderData","userId","uid","items","total","ProgressBar","_ref11","mode","required","OrderConfirmationPage","_ref12","orderDetails","AccessDenied","_ref13","LoginPage","_ref14","credentials","setCredentials","password","setError","setUser","handleGoogleLogin","provider","userCredential","additionalUserInfo","isNewUser","handleLogin","RegisterPage","_ref15","confirmPassword","handleRegister","AdminPanel","_ref16","activeTab","setActiveTab","renderContent","AdminDashboard","AdminProducts","AdminOrders","stats","setStats","orders","users","revenue","fetchStats","totalRevenue","size","setProducts","isModalOpen","setIsModalOpen","editingProduct","setEditingProduct","handleSave","cleanData","cleaned","key","undefined","isArray","finalData","handleDelete","window","confirm","productToDelete","find","handleEdit","handleAddNew","ProductEditModal","onSave","onClose","_ref17","setProductData","isUploading","setIsUploading","handlePriceChange","parseFloat","handleImageUpload","files","handleImageDelete","urlToDelete","setOrders","fetchedOrders","handleStatusChange","orderId","newStatus","o","order","seconds","toLocaleDateString","_ref18","style","backgroundImage","h1","button","whileHover","whileTap","App","page","setPage","pageData","setPageData","setUserRole","setCart","setNotifications","setCategories","notificationId","currentUser","userDocRef","userDoc","loadInitialData","productsData","Promise","all","savedCart","localStorage","getItem","JSON","parse","setItem","stringify","arguments","current","setTimeout","newPage","scrollTo","prevCart","existingItem","newQuantity","renderPage","contextValue","Provider","main","stiffness","damping"],"sources":["C:/Users/barto/OneDrive/Pulpit/evsite/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef, createContext, useContext } from 'react';\r\nimport { initializeApp } from 'firebase/app';\r\nimport { getAnalytics } from \"firebase/analytics\";\r\nimport { getAuth, onAuthStateChanged, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, GoogleAuthProvider, signInWithPopup, getAdditionalUserInfo } from 'firebase/auth';\r\nimport { getFirestore, collection, getDocs, doc, getDoc, addDoc, updateDoc, deleteDoc, query, where, onSnapshot, setDoc } from 'firebase/firestore';\r\nimport { getStorage, ref, uploadBytes, getDownloadURL, deleteObject } from 'firebase/storage';\r\nimport { ShoppingCart, User, Star, Menu, X, Trash2, Plus, Minus, Truck, CreditCard, ShieldCheck, Search, Filter, LogOut, Settings, ArrowRight, Eye, Zap, ImagePlus, AlertCircle, CheckCircle, BarChart, ChevronDown } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport './index.css';\r\n\r\n// Import obrazów dla kategorii\r\nimport categoryChargers from './assets/images/category-chargers.jpg';\r\nimport categoryAdapters from './assets/images/category-adapters.jpg';\r\nimport categoryAccessories from './assets/images/category-accessories.jpg';\r\nimport categoryBatteries from './assets/images/category-batteries.jpg';\r\n\r\n// --- KONFIGURACJA FIREBASE (POPRAWIONA) ---\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyC6L-8owWH1z6Ipf2FZax7gZ7FQOvuSNJs\",\r\n  authDomain: \"evshop-6719a.firebaseapp.com\",\r\n  projectId: \"evshop-6719a\",\r\n  storageBucket: \"evshop-6719a.firebasestorage.app\",\r\n  messagingSenderId: \"619247072748\",\r\n  appId: \"1:619247072748:web:ad274f442dba53736cbcc9\",\r\n  measurementId: \"G-Z80X8YRR4L\"\r\n};\r\n\r\n// Inicjalizacja Firebase\r\nconst app = initializeApp(firebaseConfig);\r\nconst analytics = getAnalytics(app);\r\nconst auth = getAuth(app);\r\nconst db = getFirestore(app);\r\nconst storage = getStorage(app);\r\n\r\nconst adminUID = \"s8k8u9l3R3g8h3q2N4y6E5rO9x23\";\r\nconst logoUrl = `${process.env.PUBLIC_URL}/logo.png`;\r\nconst defaultProductImageUrl = `${process.env.PUBLIC_URL}/default-product.png`;\r\nconst heroImageUrl = 'https://images.unsplash.com/photo-1619623697969-9f15038c1a16?q=80&w=2070&auto=format&fit=crop';\r\n\r\n\r\nconst categoriesData = [\r\n  { name: 'Ładowarki', image: categoryChargers },\r\n  { name: 'Adaptery', image: categoryAdapters },\r\n  { name: 'Akcesoria', image: categoryAccessories },\r\n  { name: 'Baterie', image: categoryBatteries },\r\n];\r\n\r\n\r\n// --- SAMPLE TESLA PRODUCTS ---\r\nconst sampleTeslaProducts = [\r\n  {\r\n    id: 'tesla-wall-connector',\r\n    name: 'Tesla Wall Connector Gen 3',\r\n    price: 2499,\r\n    category: 'Ładowarki',\r\n    brand: 'Tesla',\r\n    rating: 4.9,\r\n    bestseller: true,\r\n    description: 'Najszybsza ładowarka domowa Tesla z mocą do 11.5 kW. Idealna do codziennego użytku domowego.',\r\n    imageUrls: [\r\n      'https://images.unsplash.com/photo-1593941707882-a5bac6861d75?q=80&w=800&auto=format&fit=crop',\r\n      'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?q=80&w=800&auto=format&fit=crop'\r\n    ]\r\n  },\r\n  {\r\n    id: 'tesla-mobile-connector',\r\n    name: 'Tesla Mobile Connector',\r\n    price: 899,\r\n    category: 'Ładowarki',\r\n    brand: 'Tesla',\r\n    rating: 4.8,\r\n    bestseller: true,\r\n    description: 'Przenośna ładowarka Tesla z adapterami do różnych gniazdek. Niezbędna w każdej podróży.',\r\n    imageUrls: [\r\n      'https://images.unsplash.com/photo-1609592606436-c0e3d0c4b3b9?q=80&w=800&auto=format&fit=crop',\r\n      'https://images.unsplash.com/photo-1621784377641-2c1a2c7a4b91?q=80&w=800&auto=format&fit=crop'\r\n    ]\r\n  },\r\n  {\r\n    id: 'tesla-chademo-adapter',\r\n    name: 'Tesla CHAdeMO Adapter',\r\n    price: 1299,\r\n    category: 'Adaptery',\r\n    brand: 'Tesla',\r\n    rating: 4.7,\r\n    description: 'Adapter CHAdeMO umożliwiający ładowanie Tesla na stacjach CHAdeMO o mocy do 50 kW.',\r\n    imageUrls: [\r\n      'https://images.unsplash.com/photo-1626668011687-8a114d5c1604?q=80&w=800&auto=format&fit=crop'\r\n    ]\r\n  },\r\n  {\r\n    id: 'tesla-j1772-adapter',\r\n    name: 'Tesla J1772 Adapter',\r\n    price: 399,\r\n    category: 'Adaptery',\r\n    brand: 'Tesla',\r\n    rating: 4.6,\r\n    description: 'Adapter J1772 pozwalający na ładowanie Tesla na publicznych stacjach J1772.',\r\n    imageUrls: [\r\n      'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?q=80&w=800&auto=format&fit=crop'\r\n    ]\r\n  },\r\n  {\r\n    id: 'tesla-supercharger-cable',\r\n    name: 'Tesla Supercharger Cable (zapasowy)',\r\n    price: 699,\r\n    category: 'Akcesoria',\r\n    brand: 'Tesla',\r\n    rating: 4.8,\r\n    description: 'Zapasowy kabel do ładowarki Tesla Supercharger. Wytrzymały i niezawodny.',\r\n    imageUrls: [\r\n      'https://images.unsplash.com/photo-1609592606436-c0e3d0c4b3b9?q=80&w=800&auto=format&fit=crop'\r\n    ]\r\n  },\r\n  {\r\n    id: 'tesla-powerwall',\r\n    name: 'Tesla Powerwall 2',\r\n    price: 28999,\r\n    category: 'Baterie',\r\n    brand: 'Tesla',\r\n    rating: 4.9,\r\n    bestseller: true,\r\n    description: 'Domowa bateria Tesla Powerwall 2 o pojemności 13,5 kWh. Zapewnia niezależność energetyczną.',\r\n    imageUrls: [\r\n      'https://images.unsplash.com/photo-1497435334941-8c899ee9e8e9?q=80&w=800&auto=format&fit=crop'\r\n    ]\r\n  },\r\n  {\r\n    id: 'tesla-model-s-floor-mats',\r\n    name: 'Tesla Model S - Dywaniki podłogowe',\r\n    price: 459,\r\n    category: 'Akcesoria',\r\n    brand: 'Tesla',\r\n    rating: 4.5,\r\n    description: 'Oryginalne dywaniki podłogowe Tesla Model S. Idealne dopasowanie i wysoka jakość.',\r\n    imageUrls: [\r\n      'https://images.unsplash.com/photo-1549924231-f129b911e442?q=80&w=800&auto=format&fit=crop'\r\n    ]\r\n  },\r\n  {\r\n    id: 'tesla-model-3-trunk-mat',\r\n    name: 'Tesla Model 3 - Mata bagażnika',\r\n    price: 299,\r\n    category: 'Akcesoria',\r\n    brand: 'Tesla',\r\n    rating: 4.4,\r\n    description: 'Wodoodporna mata bagażnika dla Tesla Model 3. Chroni przed zabrudzeniem i wilgocią.',\r\n    imageUrls: [\r\n      'https://images.unsplash.com/photo-1549924231-f129b911e442?q=80&w=800&auto=format&fit=crop'\r\n    ]\r\n  },\r\n  {\r\n    id: 'tesla-wireless-charger',\r\n    name: 'Tesla Wireless Phone Charger',\r\n    price: 329,\r\n    category: 'Akcesoria',\r\n    brand: 'Tesla',\r\n    rating: 4.3,\r\n    description: 'Bezprzewodowa ładowarka do telefonu Tesla. Kompatybilna z Model S, 3, X i Y.',\r\n    imageUrls: [\r\n      'https://images.unsplash.com/photo-1594736797933-d0401ba4b7c0?q=80&w=800&auto=format&fit=crop'\r\n    ]\r\n  },\r\n  {\r\n    id: 'tesla-gen2-mobile-connector',\r\n    name: 'Tesla Gen 2 Mobile Connector Bundle',\r\n    price: 1299,\r\n    category: 'Ładowarki',\r\n    brand: 'Tesla',\r\n    rating: 4.8,\r\n    description: 'Kompletny zestaw Gen 2 Mobile Connector z adapterami NEMA 14-50, 5-15 i J1772.',\r\n    imageUrls: [\r\n      'https://images.unsplash.com/photo-1609592606436-c0e3d0c4b3b9?q=80&w=800&auto=format&fit=crop'\r\n    ]\r\n  }\r\n];\r\n\r\n// --- API SERWIS (LIVE) ---\r\n// Funkcje do interakcji z Firebase\r\nconst api = {\r\n  fetchProducts: async () => {\r\n    try {\r\n      const productsCol = collection(db, 'products');\r\n      const snapshot = await getDocs(productsCol);\r\n      const firebaseProducts = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n      \r\n      // Jeśli baza danych jest pusta, zwróć sample produkty Tesla\r\n      if (firebaseProducts.length === 0) {\r\n        return sampleTeslaProducts;\r\n      }\r\n      \r\n      // Połącz produkty z Firebase z sample produktami Tesla\r\n      const allProducts = [...firebaseProducts, ...sampleTeslaProducts];\r\n      // Usuń duplikaty na podstawie ID\r\n      const uniqueProducts = allProducts.filter((product, index, self) => \r\n        index === self.findIndex(p => p.id === product.id)\r\n      );\r\n      \r\n      return uniqueProducts;\r\n    } catch (error) {\r\n      console.error('Błąd podczas pobierania produktów:', error);\r\n      // W przypadku błędu, zwróć sample produkty Tesla\r\n      return sampleTeslaProducts;\r\n    }\r\n  },\r\n  fetchCategories: async () => {\r\n    return categoriesData;\r\n  },\r\n  fetchProduct: async (id) => {\r\n    const docRef = doc(db, 'products', id);\r\n    const docSnap = await getDoc(docRef);\r\n    return docSnap.exists() ? { id: docSnap.id, ...docSnap.data() } : null;\r\n  },\r\n  getReviews: (productId, callback) => {\r\n    const reviewsQuery = query(collection(db, `products/${productId}/reviews`));\r\n    return onSnapshot(reviewsQuery, (snapshot) => {\r\n      const reviews = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n      callback(reviews);\r\n    });\r\n  },\r\n  addReview: async (productId, review) => {\r\n    await addDoc(collection(db, `products/${productId}/reviews`), review);\r\n  },\r\n  uploadImage: async (file) => {\r\n    const storageRef = ref(storage, `products/${Date.now()}_${file.name}`);\r\n    await uploadBytes(storageRef, file);\r\n    return getDownloadURL(storageRef);\r\n  },\r\n  deleteImage: async (imageUrl) => {\r\n    // Zapobiegaj próbie usunięcia przykładowych zdjęć z unsplash\r\n    if (imageUrl.includes('unsplash.com')) {\r\n      console.log(\"Próba usunięcia przykładowego zdjęcia - operacja zignorowana.\");\r\n      return;\r\n    }\r\n    try {\r\n      const imageRef = ref(storage, imageUrl);\r\n      await deleteObject(imageRef);\r\n    } catch (error) {\r\n      if (error.code === 'storage/object-not-found') {\r\n        console.warn(\"Próbowano usunąć obraz, który nie istnieje w Firebase Storage:\", imageUrl);\r\n      } else {\r\n        throw error;\r\n      }\r\n    }\r\n  },\r\n  // Funkcje dla admina\r\n  addProduct: async (product) => addDoc(collection(db, 'products'), product),\r\n  updateProduct: async (id, product) => updateDoc(doc(db, 'products', id), product),\r\n  deleteProduct: async (id) => deleteDoc(doc(db, 'products', id)),\r\n  fetchOrders: async () => {\r\n    const ordersCol = collection(db, 'orders');\r\n    const snapshot = await getDocs(ordersCol);\r\n    return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n  },\r\n  updateOrderStatus: async (id, status) => updateDoc(doc(db, 'orders', id), { status }),\r\n};\r\n\r\n// --- CONTEXT API ---\r\nconst AppContext = createContext();\r\nexport const useAppContext = () => useContext(AppContext);\r\n\r\n// Komponent do wyświetlania błędów uprawnień\r\nconst PermissionErrorDisplay = ({ message }) => (\r\n    <div className=\"bg-red-900 border-l-4 border-red-500 text-red-100 p-4\" role=\"alert\">\r\n        <p className=\"font-bold\">Błąd uprawnień</p>\r\n        <p>{message}</p>\r\n    </div>\r\n);\r\n\r\n// Centrum powiadomień\r\nconst NotificationCenter = ({ notifications }) => (\r\n    <div className=\"fixed top-5 right-5 z-50\">\r\n        <AnimatePresence>\r\n            {notifications.map(note => (\r\n                <motion.div key={note.id} initial={{ opacity: 0, y: -20, scale: 0.9 }} animate={{ opacity: 1, y: 0, scale: 1 }} exit={{ opacity: 0, x: 50, scale: 0.9 }} transition={{ duration: 0.4 }} className={`mb-2 p-4 rounded-lg shadow-xl text-white ${note.type === 'error' ? 'bg-red-600' : 'bg-green-600'}`}>\r\n                    {note.message}\r\n                </motion.div>\r\n            ))}\r\n        </AnimatePresence>\r\n    </div>\r\n);\r\n\r\n// Ekran ładowania\r\nconst LoadingScreen = () => (\r\n    <div className=\"fixed inset-0 bg-gray-900 bg-opacity-80 flex items-center justify-center z-50\">\r\n        <div className=\"flex flex-col items-center\">\r\n            <Zap className=\"text-blue-400 w-16 h-16 animate-pulse\" />\r\n            <p className=\"text-white mt-4 text-lg\">Ładowanie...</p>\r\n        </div>\r\n    </div>\r\n);\r\n\r\n// --- KOMPONENTY UI ---\r\nconst Header = ({ isMobileMenuOpen, setIsMobileMenuOpen }) => {\r\n    const { user, userRole, cartItemCount, navigate, handleLogout } = useAppContext();\r\n    \r\n    return (\r\n        <header className=\"bg-gray-900 bg-opacity-80 text-white p-4 flex items-center justify-between fixed top-0 left-0 right-0 z-40 backdrop-blur-sm\">\r\n            <div className=\"flex items-center space-x-6\">\r\n                <a onClick={() => navigate('home')} className=\"cursor-pointer\">\r\n                    <img src={logoUrl} alt=\"EV-Shop Logo\" className=\"h-10\" />\r\n                </a>\r\n                <nav className=\"hidden md:flex items-center space-x-6\">\r\n                    <a onClick={() => navigate('category', 'Ładowarki')} className=\"hover:text-blue-400 transition-colors\">Ładowarki</a>\r\n                    <a onClick={() => navigate('category', 'Adaptery')} className=\"hover:text-blue-400 transition-colors\">Adaptery</a>\r\n                    <a onClick={() => navigate('category', 'Akcesoria')} className=\"hover:text-blue-400 transition-colors\">Akcesoria</a>\r\n                    <a onClick={() => navigate('category', 'Baterie')} className=\"hover:text-blue-400 transition-colors\">Baterie</a>\r\n                </nav>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center space-x-4\">\r\n                <div className=\"hidden md:flex items-center space-x-4\">\r\n                    <a onClick={() => navigate('cart')} className=\"relative cursor-pointer group\">\r\n                        <ShoppingCart className=\"h-7 w-7 text-gray-400 group-hover:text-blue-400 transition-colors\" />\r\n                        {cartItemCount > 0 && (\r\n                            <span className=\"absolute -top-2 -right-2 bg-blue-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center animate-pulse\">{cartItemCount}</span>\r\n                        )}\r\n                    </a>\r\n                    <div className=\"relative group\">\r\n                         <a onClick={() => user ? null : navigate('login')} className=\"cursor-pointer\">\r\n                            <User className=\"h-7 w-7 text-gray-400 group-hover:text-blue-400 transition-colors\" />\r\n                        </a>\r\n                        {user ? (\r\n                            <div className=\"absolute right-0 mt-2 w-56 bg-gray-800 border border-gray-700 rounded-md shadow-lg py-1 z-20 opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\r\n                                <p className=\"px-4 py-2 text-sm text-gray-400 border-b border-gray-700\">Zalogowano jako:</p>\r\n                                <p className=\"px-4 pt-1 pb-2 text-sm text-white truncate\">{user.email}</p>\r\n                                {userRole === 'admin' && <a onClick={() => navigate('admin')} className=\"flex items-center w-full px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 cursor-pointer\"><Settings className=\"w-4 h-4 mr-2\" />Panel Admina</a>}\r\n                                <a onClick={handleLogout} className=\"flex items-center w-full px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 cursor-pointer\"><LogOut className=\"w-4 h-4 mr-2\" />Wyloguj</a>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"absolute right-0 mt-2 w-48 bg-gray-800 border border-gray-700 rounded-md shadow-lg py-1 z-20 opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\r\n                                <a onClick={() => navigate('login')} className=\"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 cursor-pointer\">Zaloguj się</a>\r\n                                <a onClick={() => navigate('register')} className=\"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 cursor-pointer\">Zarejestruj się</a>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n                <div className=\"md:hidden\">\r\n                    <button onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}>\r\n                        {isMobileMenuOpen ? <X className=\"h-7 w-7\" /> : <Menu className=\"h-7 w-7\" />}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </header>\r\n    );\r\n};\r\n\r\nconst Footer = () => (\r\n    <footer className=\"bg-gray-900 text-gray-400 py-12\">\r\n        <div className=\"container mx-auto grid grid-cols-2 md:grid-cols-4 gap-8 px-4\">\r\n            <div>\r\n                <h3 className=\"font-bold text-white mb-4\">EV-Shop</h3>\r\n                <p>Twoje źródło energii dla mobilności.</p>\r\n            </div>\r\n            <div>\r\n                <h3 className=\"font-bold text-white mb-4\">Kategorie</h3>\r\n                <ul>\r\n                    <li><a href=\"#\" className=\"hover:text-white\">Ładowarki</a></li>\r\n                    <li><a href=\"#\" className=\"hover:text-white\">Adaptery</a></li>\r\n                    <li><a href=\"#\" className=\"hover:text-white\">Akcesoria</a></li>\r\n                    <li><a href=\"#\" className=\"hover:text-white\">Baterie</a></li>\r\n                </ul>\r\n            </div>\r\n            <div>\r\n                <h3 className=\"font-bold text-white mb-4\">Obsługa Klienta</h3>\r\n                <ul>\r\n                    <li><a href=\"#\" className=\"hover:text-white\">Kontakt</a></li>\r\n                    <li><a href=\"#\" className=\"hover:text-white\">FAQ</a></li>\r\n                    <li><a href=\"#\" className=\"hover:text-white\">Dostawa i zwroty</a></li>\r\n                </ul>\r\n            </div>\r\n            <div>\r\n                <h3 className=\"font-bold text-white mb-4\">Newsletter</h3>\r\n                <input type=\"email\" placeholder=\"Twój e-mail\" className=\"bg-gray-800 p-2 rounded w-full mb-2\"/>\r\n                <button className=\"bg-blue-600 text-white py-2 px-4 rounded w-full hover:bg-blue-700\">Zapisz się</button>\r\n            </div>\r\n        </div>\r\n        <div className=\"text-center mt-8 pt-8 border-t border-gray-800\">\r\n            <p>&copy; 2024 EV-Shop. Wszystkie prawa zastrzeżone.</p>\r\n        </div>\r\n    </footer>\r\n);\r\n\r\nconst ProductCard = ({ product, navigate }) => {\r\n    return (\r\n        <motion.div\r\n            layout\r\n            initial={{ opacity: 0, scale: 0.9 }}\r\n            animate={{ opacity: 1, scale: 1 }}\r\n            exit={{ opacity: 0, scale: 0.9 }}\r\n            transition={{ duration: 0.3 }}\r\n            onClick={() => navigate('product', product.id)}\r\n            className=\"bg-gray-800 rounded-lg overflow-hidden shadow-lg cursor-pointer group\"\r\n        >\r\n            <div className=\"relative h-56\">\r\n                <img src={product.imageUrls[0] || defaultProductImageUrl} alt={product.name} className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\" />\r\n                {product.bestseller && <div className=\"absolute top-2 left-2 bg-yellow-500 text-gray-900 px-2 py-1 text-xs font-bold rounded\">BESTSELLER</div>}\r\n            </div>\r\n            <div className=\"p-4\">\r\n                <h3 className=\"text-lg font-semibold text-white truncate\">{product.name}</h3>\r\n                <p className=\"text-gray-400 text-sm mb-2\">{product.brand} - {product.category}</p>\r\n                <div className=\"flex items-center justify-between\">\r\n                    <p className=\"text-xl font-bold text-blue-400\">{product.price} PLN</p>\r\n                    <div className=\"flex items-center\">\r\n                        <Star className=\"w-5 h-5 text-yellow-400\" />\r\n                        <span className=\"text-white ml-1\">{product.rating}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </motion.div>\r\n    );\r\n};\r\n\r\nconst BestsellersSection = ({ products, navigate }) => {\r\n    const featuredProducts = products.filter(p => p.bestseller).slice(0, 4);\r\n    \r\n    return (\r\n        <section className=\"py-20\">\r\n            <h2 className=\"text-3xl font-bold text-center mb-12 text-white\">Bestsellery</h2>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8\">\r\n                {featuredProducts.map(product => (\r\n                    <ProductCard key={product.id} product={product} navigate={navigate} />\r\n                ))}\r\n            </div>\r\n        </section>\r\n    );\r\n};\r\n\r\nconst CategoriesSection = ({ categories, navigate }) => (\r\n    <section className=\"py-20 bg-gray-800 text-white\">\r\n        <div className=\"container mx-auto px-4\">\r\n          <h2 className=\"text-4xl font-bold text-center mb-12\">Przeglądaj Kategorie</h2>\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8\">\r\n            {categories.map((category, index) => (\r\n              <motion.div \r\n                key={category.name}\r\n                className=\"category-card bg-gray-900 rounded-lg overflow-hidden shadow-lg cursor-pointer group\"\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ duration: 0.5, delay: index * 0.1 }}\r\n                onClick={() => navigate('category', category.name)}\r\n              >\r\n                <div className=\"relative h-64\">\r\n                  <img src={category.image} alt={category.name} className=\"w-full h-full object-cover transition-transform duration-300 transform group-hover:scale-105\"/>\r\n                  <div className=\"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center\">\r\n                    <span className=\"text-white text-2xl font-bold\">{category.name}</span>\r\n                  </div>\r\n                </div>\r\n              </motion.div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n    </section>\r\n);\r\n\r\nconst FeaturedInfoSection = () => (\r\n    <section className=\"py-20 bg-gray-900 text-white\">\r\n        <div className=\"container mx-auto px-4 text-center\">\r\n            <h2 className=\"text-3xl font-bold mb-8\">Dlaczego EV-Shop?</h2>\r\n            <div className=\"grid md:grid-cols-3 gap-8\">\r\n                <div className=\"p-6\">\r\n                    <Truck className=\"w-12 h-12 mx-auto text-blue-400 mb-4\" />\r\n                    <h3 className=\"text-xl font-semibold mb-2\">Szybka Dostawa</h3>\r\n                    <p className=\"text-gray-400\">Twoje zamówienie dotrze do Ciebie w mgnieniu oka.</p>\r\n                </div>\r\n                <div className=\"p-6\">\r\n                    <CreditCard className=\"w-12 h-12 mx-auto text-blue-400 mb-4\" />\r\n                    <h3 className=\"text-xl font-semibold mb-2\">Bezpieczne Płatności</h3>\r\n                    <p className=\"text-gray-400\">Gwarantujemy bezpieczeństwo Twoich transakcji.</p>\r\n                </div>\r\n                <div className=\"p-6\">\r\n                    <ShieldCheck className=\"w-12 h-12 mx-auto text-blue-400 mb-4\" />\r\n                    <h3 className=\"text-xl font-semibold mb-2\">Gwarancja Jakości</h3>\r\n                    <p className=\"text-gray-400\">Oferujemy tylko sprawdzone i certyfikowane produkty.</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n);\r\n\r\nconst HomePage = ({ products, categories, navigate }) => (\r\n    <div>\r\n        <HeroSection navigate={navigate} />\r\n        <main id=\"products-section\" className=\"container mx-auto p-4 -mt-24 relative z-10 bg-gray-900 rounded-t-2xl shadow-lg\">\r\n            <BestsellersSection products={products} navigate={navigate} />\r\n            <CategoriesSection categories={categories} navigate={navigate} />\r\n            <FeaturedInfoSection />\r\n        </main>\r\n    </div>\r\n);\r\n\r\nconst CategoryPage = ({ navigate, products, categoryName }) => {\r\n    const [filteredProducts, setFilteredProducts] = useState([]);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [priceRange, setPriceRange] = useState([0, 30000]);\r\n    const [brands, setBrands] = useState([]);\r\n    const [selectedBrands, setSelectedBrands] = useState([]);\r\n    const [sortBy, setSortBy] = useState('rating_desc');\r\n\r\n    useEffect(() => {\r\n        const categoryProducts = products.filter(p => p.category === categoryName);\r\n        const availableBrands = [...new Set(categoryProducts.map(p => p.brand))];\r\n        setBrands(availableBrands);\r\n        setSelectedBrands(availableBrands);\r\n        setFilteredProducts(categoryProducts); // Ustaw początkowe produkty\r\n    }, [products, categoryName]);\r\n\r\n    useEffect(() => {\r\n        let tempProducts = products.filter(p => p.category === categoryName);\r\n        \r\n        // Wyszukiwanie\r\n        if (searchTerm) {\r\n            tempProducts = tempProducts.filter(p => p.name.toLowerCase().includes(searchTerm.toLowerCase()));\r\n        }\r\n        \r\n        // Filtracja po cenie\r\n        tempProducts = tempProducts.filter(p => p.price >= priceRange[0] && p.price <= priceRange[1]);\r\n        \r\n        // Filtracja po marce\r\n        tempProducts = tempProducts.filter(p => selectedBrands.includes(p.brand));\r\n\r\n        // Sortowanie\r\n        tempProducts.sort((a, b) => {\r\n            switch(sortBy) {\r\n                case 'price_asc': return a.price - b.price;\r\n                case 'price_desc': return b.price - a.price;\r\n                case 'rating_desc': return b.rating - a.rating;\r\n                default: return 0;\r\n            }\r\n        });\r\n\r\n        setFilteredProducts(tempProducts);\r\n    }, [products, categoryName, searchTerm, priceRange, selectedBrands, sortBy]);\r\n\r\n    const handleBrandChange = (brand) => {\r\n        setSelectedBrands(prev => \r\n            prev.includes(brand) ? prev.filter(b => b !== brand) : [...prev, brand]\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div className=\"container mx-auto mt-24 p-4 text-white\">\r\n            <h1 className=\"text-4xl font-bold mb-8 text-center\">{categoryName}</h1>\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-8\">\r\n                {/* Panel filtrów */}\r\n                <div className=\"lg:col-span-1 bg-gray-800 p-6 rounded-lg h-fit\">\r\n                    <h2 className=\"text-2xl font-semibold mb-6 flex items-center\"><Filter className=\"mr-2\"/>Filtry</h2>\r\n                    \r\n                    {/* Wyszukiwanie */}\r\n                    <div className=\"mb-6\">\r\n                        <label className=\"block mb-2\">Szukaj</label>\r\n                        <input \r\n                            type=\"text\" \r\n                            placeholder=\"Nazwa produktu...\"\r\n                            value={searchTerm}\r\n                            onChange={(e) => setSearchTerm(e.target.value)}\r\n                            className=\"w-full p-2 bg-gray-700 rounded\"\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Zakres cen */}\r\n                    <div className=\"mb-6\">\r\n                        <label className=\"block mb-2\">Cena: {priceRange[0]} - {priceRange[1]} PLN</label>\r\n                        <input \r\n                            type=\"range\"\r\n                            min=\"0\"\r\n                            max=\"30000\"\r\n                            step=\"100\"\r\n                            value={priceRange[1]}\r\n                            onChange={(e) => setPriceRange([priceRange[0], Number(e.target.value)])}\r\n                            className=\"w-full\"\r\n                        />\r\n                    </div>\r\n                    \r\n                    {/* Marki */}\r\n                    <div className=\"mb-6\">\r\n                        <h3 className=\"text-lg font-semibold mb-2\">Marka</h3>\r\n                        {brands.map(brand => (\r\n                            <div key={brand} className=\"flex items-center mb-1\">\r\n                                <input type=\"checkbox\" id={brand} checked={selectedBrands.includes(brand)} onChange={() => handleBrandChange(brand)} className=\"mr-2\" />\r\n                                <label htmlFor={brand}>{brand}</label>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n\r\n                    {/* Sortowanie */}\r\n                    <div>\r\n                        <label className=\"block mb-2\">Sortuj według</label>\r\n                        <select value={sortBy} onChange={(e) => setSortBy(e.target.value)} className=\"w-full p-2 bg-gray-700 rounded\">\r\n                            <option value=\"rating_desc\">Ocena malejąco</option>\r\n                            <option value=\"price_asc\">Cena rosnąco</option>\r\n                            <option value=\"price_desc\">Cena malejąco</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Lista produktów */}\r\n                <div className=\"lg:col-span-3\">\r\n                    <AnimatePresence>\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\r\n                            {filteredProducts.map(product => <ProductCard key={product.id} product={product} navigate={navigate} />)}\r\n                        </div>\r\n                    </AnimatePresence>\r\n                    {filteredProducts.length === 0 && (\r\n                        <p className=\"text-center text-gray-400 mt-10\">Brak produktów spełniających kryteria.</p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nconst ReviewsSection = ({ productId, reviews }) => {\r\n    const { user } = useAppContext();\r\n    const [newReview, setNewReview] = useState({ rating: 5, text: '' });\r\n\r\n    const handleReviewSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (!user) {\r\n            alert(\"Musisz być zalogowany, aby dodać opinię.\");\r\n            return;\r\n        }\r\n        if (!newReview.text) {\r\n            alert(\"Opinia nie może być pusta.\");\r\n            return;\r\n        }\r\n        await api.addReview(productId, {\r\n            ...newReview,\r\n            author: user.email,\r\n            createdAt: new Date()\r\n        });\r\n        setNewReview({ rating: 5, text: '' });\r\n    };\r\n\r\n    return (\r\n        <div className=\"mt-12\">\r\n            <h3 className=\"text-2xl font-bold mb-4\">Opinie klientów ({reviews.length})</h3>\r\n            <div className=\"space-y-6\">\r\n                {reviews.map(review => (\r\n                    <div key={review.id} className=\"bg-gray-800 p-4 rounded-lg\">\r\n                        <div className=\"flex items-center mb-2\">\r\n                            <div className=\"flex\">\r\n                                {[...Array(5)].map((_, i) => <Star key={i} className={`w-5 h-5 ${i < review.rating ? 'text-yellow-400' : 'text-gray-600'}`} />)}\r\n                            </div>\r\n                            <p className=\"ml-4 font-semibold\">{review.author}</p>\r\n                        </div>\r\n                        <p className=\"text-gray-300\">{review.text}</p>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n            \r\n            {user && (\r\n                <form onSubmit={handleReviewSubmit} className=\"mt-8 bg-gray-800 p-6 rounded-lg\">\r\n                    <h4 className=\"text-xl font-semibold mb-4\">Dodaj swoją opinię</h4>\r\n                    <div className=\"flex items-center mb-4\">\r\n                        <span>Twoja ocena:</span>\r\n                        <div className=\"flex ml-4\">\r\n                            {[...Array(5)].map((_, i) => (\r\n                                <Star \r\n                                    key={i} \r\n                                    className={`w-6 h-6 cursor-pointer ${i < newReview.rating ? 'text-yellow-400' : 'text-gray-600'}`} \r\n                                    onClick={() => setNewReview({...newReview, rating: i + 1})}\r\n                                />\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                    <textarea \r\n                        value={newReview.text} \r\n                        onChange={(e) => setNewReview({...newReview, text: e.target.value})}\r\n                        placeholder=\"Twoja opinia...\"\r\n                        className=\"w-full p-2 bg-gray-700 rounded h-24 mb-4\"\r\n                    />\r\n                    <button type=\"submit\" className=\"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\">Dodaj opinię</button>\r\n                </form>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst ProductPage = ({ navigate, productId }) => {\r\n    const [product, setProduct] = useState(null);\r\n    const [reviews, setReviews] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [activeImage, setActiveImage] = useState(0);\r\n    const { addToCart } = useAppContext();\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            setIsLoading(true);\r\n            const productData = await api.fetchProduct(productId);\r\n            setProduct(productData);\r\n            setIsLoading(false);\r\n        };\r\n        fetchData();\r\n        \r\n        const unsubscribe = api.getReviews(productId, setReviews);\r\n        return () => unsubscribe();\r\n    }, [productId]);\r\n\r\n    if (isLoading) return <LoadingScreen />;\r\n    if (!product) return <div className=\"text-center mt-24 text-white\">Produkt nie został znaleziony.</div>;\r\n\r\n    return (\r\n        <div className=\"container mx-auto mt-24 p-4 text-white\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-12\">\r\n                {/* Galeria zdjęć */}\r\n                <div>\r\n                    <div className=\"relative h-96 bg-gray-800 rounded-lg mb-4\">\r\n                         <img src={product.imageUrls[activeImage]} alt={product.name} className=\"w-full h-full object-contain\" />\r\n                    </div>\r\n                    <div className=\"flex space-x-2\">\r\n                        {product.imageUrls.map((url, index) => (\r\n                            <img \r\n                                key={index} \r\n                                src={url} \r\n                                alt={`${product.name} thumbnail ${index+1}`} \r\n                                onClick={() => setActiveImage(index)}\r\n                                className={`w-24 h-24 object-cover rounded-md cursor-pointer border-2 ${activeImage === index ? 'border-blue-500' : 'border-transparent'}`} \r\n                            />\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Informacje o produkcie */}\r\n                <div>\r\n                    <h1 className=\"text-4xl font-extrabold mb-2\">{product.name}</h1>\r\n                    <p className=\"text-gray-400 mb-4\">{product.brand} - {product.category}</p>\r\n                    <div className=\"flex items-center mb-4\">\r\n                        <div className=\"flex\">\r\n                           {[...Array(5)].map((_, i) => <Star key={i} className={`w-5 h-5 ${i < product.rating ? 'text-yellow-400' : 'text-gray-600'}`} />)}\r\n                        </div>\r\n                        <span className=\"ml-2\">({reviews.length} opinii)</span>\r\n                    </div>\r\n                    <p className=\"text-3xl font-bold text-blue-400 mb-6\">{product.price} PLN</p>\r\n                    <p className=\"text-gray-300 mb-6\">{product.description}</p>\r\n                    <button onClick={() => addToCart(product)} className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg flex items-center justify-center text-lg\">\r\n                        <ShoppingCart className=\"mr-2\" /> Dodaj do koszyka\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            <ReviewsSection productId={productId} reviews={reviews} />\r\n        </div>\r\n    );\r\n};\r\n\r\nconst CartPage = ({ navigate }) => {\r\n    const { cart, updateCartQuantity, removeFromCart, clearCart } = useAppContext();\r\n    const totalPrice = cart.reduce((acc, item) => acc + item.price * item.quantity, 0);\r\n\r\n    return (\r\n        <div className=\"container mx-auto mt-24 p-4 text-white\">\r\n            <h1 className=\"text-4xl font-bold mb-8\">Twój Koszyk</h1>\r\n            {cart.length === 0 ? (\r\n                <div className=\"text-center\">\r\n                    <p>Koszyk jest pusty.</p>\r\n                    <button onClick={() => navigate('home')} className=\"mt-4 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\">Wróć do sklepu</button>\r\n                </div>\r\n            ) : (\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n                    <div className=\"lg:col-span-2 space-y-4\">\r\n                        {cart.map(item => (\r\n                            <div key={item.id} className=\"flex items-center bg-gray-800 p-4 rounded-lg\">\r\n                                <img src={item.imageUrls[0]} alt={item.name} className=\"w-24 h-24 object-cover rounded-md mr-4\" />\r\n                                <div className=\"flex-grow\">\r\n                                    <h2 className=\"text-lg font-semibold\">{item.name}</h2>\r\n                                    <p className=\"text-gray-400\">{item.price} PLN</p>\r\n                                </div>\r\n                                <div className=\"flex items-center\">\r\n                                    <button onClick={() => updateCartQuantity(item.id, item.quantity - 1)} disabled={item.quantity <= 1} className=\"p-1 bg-gray-700 rounded\"><Minus/></button>\r\n                                    <span className=\"w-12 text-center\">{item.quantity}</span>\r\n                                    <button onClick={() => updateCartQuantity(item.id, item.quantity + 1)} className=\"p-1 bg-gray-700 rounded\"><Plus/></button>\r\n                                </div>\r\n                                <p className=\"w-24 text-right font-semibold\">{item.price * item.quantity} PLN</p>\r\n                                <button onClick={() => removeFromCart(item.id)} className=\"ml-4 text-gray-400 hover:text-red-500\"><Trash2/></button>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                    <div className=\"lg:col-span-1 bg-gray-800 p-6 rounded-lg h-fit\">\r\n                        <h2 className=\"text-2xl font-bold mb-4\">Podsumowanie</h2>\r\n                        <div className=\"flex justify-between mb-2\">\r\n                            <span>Suma częściowa:</span>\r\n                            <span>{totalPrice.toFixed(2)} PLN</span>\r\n                        </div>\r\n                        <div className=\"flex justify-between mb-4\">\r\n                            <span>Dostawa:</span>\r\n                            <span>GRATIS</span>\r\n                        </div>\r\n                        <div className=\"flex justify-between font-bold text-xl border-t border-gray-700 pt-4 mt-4\">\r\n                            <span>Do zapłaty:</span>\r\n                            <span>{totalPrice.toFixed(2)} PLN</span>\r\n                        </div>\r\n                        <button onClick={() => navigate('checkout')} className=\"w-full mt-6 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg\">Przejdź do kasy</button>\r\n                        <button onClick={clearCart} className=\"w-full mt-2 bg-red-600 hover:bg-red-700 text-white font-bold py-2 rounded-lg\">Wyczyść koszyk</button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst CheckoutPage = ({ navigate }) => {\r\n    const { cart, user, clearCart, addNotification, setOrderDetails } = useAppContext();\r\n    const [shippingInfo, setShippingInfo] = useState({ name: '', address: '', city: '', zip: '', country: 'Polska' });\r\n    const [currentStep, setCurrentStep] = useState(1);\r\n\r\n    const handleChange = (e) => {\r\n        setShippingInfo({...shippingInfo, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (currentStep === 1) {\r\n            setCurrentStep(2);\r\n        } else if (currentStep === 2) {\r\n            // Logika płatności (symulacja)\r\n            setCurrentStep(3);\r\n            try {\r\n                const orderData = {\r\n                    userId: user ? user.uid : 'guest',\r\n                    items: cart,\r\n                    total: cart.reduce((acc, item) => acc + item.price * item.quantity, 0),\r\n                    shippingInfo,\r\n                    status: 'Nowe',\r\n                    createdAt: new Date(),\r\n                };\r\n                const docRef = await addDoc(collection(db, 'orders'), orderData);\r\n                setOrderDetails({ ...orderData, id: docRef.id });\r\n                clearCart();\r\n                addNotification(\"Zamówienie złożone pomyślnie!\", \"success\");\r\n                navigate('order-confirmation');\r\n            } catch (error) {\r\n                addNotification(\"Błąd podczas składania zamówienia.\", \"error\");\r\n                console.error(\"Błąd zapisu zamówienia:\", error);\r\n                setCurrentStep(2); // Wróć do płatności w razie błędu\r\n            }\r\n        }\r\n    };\r\n    \r\n    const ProgressBar = ({ currentStep }) => (\r\n        <div className=\"flex items-center w-full mb-8\">\r\n            <div className={`flex-1 text-center ${currentStep >= 1 ? 'text-blue-400' : 'text-gray-500'}`}>\r\n                <div className=\"mx-auto w-8 h-8 rounded-full border-2 flex items-center justify-center mb-1\">1</div>\r\n                Dostawa\r\n            </div>\r\n            <div className={`flex-1 h-0.5 ${currentStep >= 2 ? 'bg-blue-400' : 'bg-gray-700'}`}></div>\r\n            <div className={`flex-1 text-center ${currentStep >= 2 ? 'text-blue-400' : 'text-gray-500'}`}>\r\n                <div className=\"mx-auto w-8 h-8 rounded-full border-2 flex items-center justify-center mb-1\">2</div>\r\n                Płatność\r\n            </div>\r\n            <div className={`flex-1 h-0.5 ${currentStep >= 3 ? 'bg-blue-400' : 'bg-gray-700'}`}></div>\r\n            <div className={`flex-1 text-center ${currentStep >= 3 ? 'text-blue-400' : 'text-gray-500'}`}>\r\n                <div className=\"mx-auto w-8 h-8 rounded-full border-2 flex items-center justify-center mb-1\">3</div>\r\n                Potwierdzenie\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div className=\"container mx-auto mt-24 p-4 text-white\">\r\n            <h1 className=\"text-4xl font-bold mb-8 text-center\">Zamówienie</h1>\r\n            <ProgressBar currentStep={currentStep} />\r\n            <form onSubmit={handleSubmit} className=\"max-w-lg mx-auto bg-gray-800 p-8 rounded-lg\">\r\n                <AnimatePresence mode=\"wait\">\r\n                    {currentStep === 1 && (\r\n                        <motion.div key=\"step1\" initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}>\r\n                            <h2 className=\"text-2xl font-semibold mb-6\">Adres dostawy</h2>\r\n                            <input name=\"name\" value={shippingInfo.name} onChange={handleChange} placeholder=\"Imię i nazwisko\" className=\"w-full p-2 bg-gray-700 rounded mb-4\" required />\r\n                            <input name=\"address\" value={shippingInfo.address} onChange={handleChange} placeholder=\"Adres\" className=\"w-full p-2 bg-gray-700 rounded mb-4\" required />\r\n                            <input name=\"city\" value={shippingInfo.city} onChange={handleChange} placeholder=\"Miasto\" className=\"w-full p-2 bg-gray-700 rounded mb-4\" required />\r\n                            <input name=\"zip\" value={shippingInfo.zip} onChange={handleChange} placeholder=\"Kod pocztowy\" className=\"w-full p-2 bg-gray-700 rounded mb-4\" required />\r\n                        </motion.div>\r\n                    )}\r\n                    {currentStep === 2 && (\r\n                        <motion.div key=\"step2\" initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}>\r\n                            <h2 className=\"text-2xl font-semibold mb-6\">Płatność</h2>\r\n                            <p className=\"text-center text-gray-400 mb-4\">Symulacja płatności. Kliknij, aby sfinalizować.</p>\r\n                        </motion.div>\r\n                    )}\r\n                    {currentStep === 3 && (\r\n                        <motion.div key=\"step3\" initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}>\r\n                            <h2 className=\"text-2xl font-semibold mb-6 text-center\">Przetwarzanie...</h2>\r\n                            <LoadingScreen />\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n                 <button type=\"submit\" className=\"w-full mt-6 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg\">\r\n                    {currentStep === 1 ? \"Przejdź do płatności\" : \"Zapłać i zamów\"}\r\n                </button>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nconst OrderConfirmationPage = ({ navigate, orderDetails }) => (\r\n    <div className=\"container mx-auto mt-24 p-4 text-white text-center\">\r\n        <CheckCircle className=\"w-24 h-24 mx-auto text-green-500 mb-4\" />\r\n        <h1 className=\"text-4xl font-bold mb-4\">Dziękujemy za zamówienie!</h1>\r\n        <p className=\"text-lg text-gray-300 mb-8\">Twoje zamówienie #{orderDetails.id.slice(0, 8)} zostało przyjęte.</p>\r\n        <div className=\"max-w-md mx-auto bg-gray-800 p-6 rounded-lg text-left mb-8\">\r\n            <h2 className=\"text-xl font-semibold mb-4\">Szczegóły zamówienia</h2>\r\n            <p><strong>Status:</strong> {orderDetails.status}</p>\r\n            <p><strong>Całkowita kwota:</strong> {orderDetails.total.toFixed(2)} PLN</p>\r\n            <p><strong>Adres dostawy:</strong> {orderDetails.shippingInfo.address}, {orderDetails.shippingInfo.city}</p>\r\n        </div>\r\n        <button onClick={() => navigate('home')} className=\"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg\">Wróć na stronę główną</button>\r\n    </div>\r\n);\r\n\r\nconst AccessDenied = ({ navigate }) => (\r\n    <div className=\"container mx-auto mt-24 p-4 text-white text-center\">\r\n        <AlertCircle className=\"w-24 h-24 mx-auto text-red-500 mb-4\" />\r\n        <h1 className=\"text-4xl font-bold mb-4\">Brak dostępu</h1>\r\n        <p className=\"text-lg text-gray-300 mb-8\">Nie masz uprawnień do przeglądania tej strony.</p>\r\n        <button onClick={() => navigate('home')} className=\"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg\">Wróć na stronę główną</button>\r\n    </div>\r\n);\r\n\r\nconst LoginPage = ({ navigate, addNotification }) => {\r\n    const [credentials, setCredentials] = useState({ email: '', password: '' });\r\n    const [error, setError] = useState('');\r\n    const { setUser } = useAppContext();\r\n\r\n    const handleGoogleLogin = async () => {\r\n        const provider = new GoogleAuthProvider();\r\n        try {\r\n            const userCredential = await signInWithPopup(auth, provider);\r\n            const additionalUserInfo = getAdditionalUserInfo(userCredential);\r\n\r\n            // Create user doc only if they are a new user from Google Sign-In\r\n            if (additionalUserInfo?.isNewUser) {\r\n                await setDoc(doc(db, 'users', userCredential.user.uid), {\r\n                    email: userCredential.user.email,\r\n                    role: 'user',\r\n                    createdAt: new Date(),\r\n                });\r\n            }\r\n            \r\n            addNotification(\"Zalogowano pomyślnie!\", \"success\");\r\n            navigate('home');\r\n        } catch (error) {\r\n            setError(\"Błąd logowania przez Google.\");\r\n            addNotification(\"Błąd logowania przez Google.\", \"error\");\r\n        }\r\n    };\r\n    \r\n    const handleLogin = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const userCredential = await signInWithEmailAndPassword(auth, credentials.email, credentials.password);\r\n            setUser(userCredential.user);\r\n            addNotification(\"Zalogowano pomyślnie!\", \"success\");\r\n            navigate('home');\r\n        } catch (error) {\r\n            setError('Nieprawidłowy email lub hasło.');\r\n            addNotification(\"Nieprawidłowy email lub hasło.\", \"error\");\r\n        }\r\n    };\r\n\r\n    const handleChange = (e) => {\r\n        setCredentials({ ...credentials, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex items-center justify-center min-h-screen bg-gray-900 text-white\">\r\n            <div className=\"w-full max-w-md p-8 space-y-8 bg-gray-800 rounded-lg shadow-lg\">\r\n                <h1 className=\"text-3xl font-bold text-center\">Logowanie</h1>\r\n                {error && <p className=\"text-red-500 text-center\">{error}</p>}\r\n                <form onSubmit={handleLogin} className=\"space-y-6\">\r\n                    <input type=\"email\" name=\"email\" placeholder=\"Email\" onChange={handleChange} className=\"w-full p-3 bg-gray-700 rounded\" required />\r\n                    <input type=\"password\" name=\"password\" placeholder=\"Hasło\" onChange={handleChange} className=\"w-full p-3 bg-gray-700 rounded\" required />\r\n                    <button type=\"submit\" className=\"w-full p-3 bg-blue-600 rounded font-bold hover:bg-blue-700\">Zaloguj</button>\r\n                </form>\r\n                <div className=\"text-center text-gray-400\">lub</div>\r\n                 <button onClick={handleGoogleLogin} className=\"w-full p-3 bg-red-600 rounded font-bold hover:bg-red-700 flex items-center justify-center\">\r\n                    <img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c1/Google_%22G%22_logo.svg/768px-Google_%22G%22_logo.svg.png\" alt=\"Google\" className=\"w-5 h-5 mr-2\" />\r\n                    Zaloguj przez Google\r\n                </button>\r\n                <div className=\"text-center\">\r\n                    <a onClick={() => navigate('register')} className=\"font-medium text-blue-400 hover:text-blue-300 cursor-pointer\">Nie masz konta? Zarejestruj się</a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst RegisterPage = ({ navigate, addNotification }) => {\r\n    const [credentials, setCredentials] = useState({ email: '', password: '', confirmPassword: '' });\r\n    const [error, setError] = useState('');\r\n    const { setUser } = useAppContext();\r\n\r\n    const handleRegister = async (e) => {\r\n        e.preventDefault();\r\n        if (credentials.password !== credentials.confirmPassword) {\r\n            setError('Hasła nie są zgodne.');\r\n            return;\r\n        }\r\n        try {\r\n            const userCredential = await createUserWithEmailAndPassword(auth, credentials.email, credentials.password);\r\n            \r\n            // Ustawienie domyślnej roli 'user' dla nowego użytkownika\r\n            await setDoc(doc(db, 'users', userCredential.user.uid), {\r\n                email: userCredential.user.email,\r\n                role: 'user',\r\n                createdAt: new Date(),\r\n            });\r\n\r\n            setUser(userCredential.user);\r\n            addNotification(\"Rejestracja pomyślna!\", \"success\");\r\n            navigate('home');\r\n        } catch (error) {\r\n            setError('Błąd rejestracji. Sprawdź, czy email jest poprawny.');\r\n            addNotification(\"Błąd rejestracji.\", \"error\");\r\n        }\r\n    };\r\n    \r\n    const handleChange = (e) => {\r\n        setCredentials({ ...credentials, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex items-center justify-center min-h-screen bg-gray-900 text-white\">\r\n            <div className=\"w-full max-w-md p-8 space-y-8 bg-gray-800 rounded-lg shadow-lg\">\r\n                <h1 className=\"text-3xl font-bold text-center\">Rejestracja</h1>\r\n                {error && <p className=\"text-red-500 text-center\">{error}</p>}\r\n                <form onSubmit={handleRegister} className=\"space-y-6\">\r\n                    <input type=\"email\" name=\"email\" placeholder=\"Email\" onChange={handleChange} className=\"w-full p-3 bg-gray-700 rounded\" required />\r\n                    <input type=\"password\" name=\"password\" placeholder=\"Hasło\" onChange={handleChange} className=\"w-full p-3 bg-gray-700 rounded\" required />\r\n                    <input type=\"password\" name=\"confirmPassword\" placeholder=\"Potwierdź hasło\" onChange={handleChange} className=\"w-full p-3 bg-gray-700 rounded\" required />\r\n                    <button type=\"submit\" className=\"w-full p-3 bg-blue-600 rounded font-bold hover:bg-blue-700\">Zarejestruj</button>\r\n                </form>\r\n                 <div className=\"text-center\">\r\n                    <a onClick={() => navigate('login')} className=\"font-medium text-blue-400 hover:text-blue-300 cursor-pointer\">Masz już konto? Zaloguj się</a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nconst AdminPanel = ({ navigate }) => {\r\n    const [activeTab, setActiveTab] = useState('dashboard');\r\n    const { userRole } = useAppContext();\r\n\r\n    if (userRole !== 'admin') {\r\n        return <AccessDenied navigate={navigate} />;\r\n    }\r\n\r\n    const renderContent = () => {\r\n        switch (activeTab) {\r\n            case 'dashboard': return <AdminDashboard />;\r\n            case 'products': return <AdminProducts />;\r\n            case 'orders': return <AdminOrders />;\r\n            default: return <AdminDashboard />;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"container mx-auto mt-24 p-4 text-white\">\r\n            <h1 className=\"text-4xl font-bold mb-8\">Panel Administratora</h1>\r\n            <div className=\"flex border-b border-gray-700 mb-8\">\r\n                <button onClick={() => setActiveTab('dashboard')} className={`py-2 px-4 ${activeTab === 'dashboard' ? 'border-b-2 border-blue-500 text-blue-400' : 'text-gray-400'}`}>Dashboard</button>\r\n                <button onClick={() => setActiveTab('products')} className={`py-2 px-4 ${activeTab === 'products' ? 'border-b-2 border-blue-500 text-blue-400' : 'text-gray-400'}`}>Produkty</button>\r\n                <button onClick={() => setActiveTab('orders')} className={`py-2 px-4 ${activeTab === 'orders' ? 'border-b-2 border-blue-500 text-blue-400' : 'text-gray-400'}`}>Zamówienia</button>\r\n            </div>\r\n            <div>{renderContent()}</div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst AdminDashboard = () => {\r\n    const [stats, setStats] = useState({ products: 0, orders: 0, users: 0, revenue: 0 });\r\n\r\n    useEffect(() => {\r\n        const fetchStats = async () => {\r\n            const products = await getDocs(collection(db, 'products'));\r\n            const orders = await getDocs(collection(db, 'orders'));\r\n            const users = await getDocs(collection(db, 'users'));\r\n            const totalRevenue = orders.docs.reduce((acc, doc) => acc + doc.data().total, 0);\r\n            setStats({ products: products.size, orders: orders.size, users: users.size, revenue: totalRevenue });\r\n        };\r\n        fetchStats();\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n            <div className=\"bg-gray-800 p-6 rounded-lg\"><h3 className=\"text-gray-400\">Produkty</h3><p className=\"text-3xl font-bold\">{stats.products}</p></div>\r\n            <div className=\"bg-gray-800 p-6 rounded-lg\"><h3 className=\"text-gray-400\">Zamówienia</h3><p className=\"text-3xl font-bold\">{stats.orders}</p></div>\r\n            <div className=\"bg-gray-800 p-6 rounded-lg\"><h3 className=\"text-gray-400\">Użytkownicy</h3><p className=\"text-3xl font-bold\">{stats.users}</p></div>\r\n            <div className=\"bg-gray-800 p-6 rounded-lg\"><h3 className=\"text-gray-400\">Przychód</h3><p className=\"text-3xl font-bold\">{stats.revenue.toFixed(2)} PLN</p></div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst AdminProducts = () => {\r\n    const [products, setProducts] = useState([]);\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [editingProduct, setEditingProduct] = useState(null);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const { addNotification } = useAppContext();\r\n\r\n    useEffect(() => {\r\n        fetchProducts();\r\n    }, []);\r\n\r\n    const fetchProducts = async () => {\r\n        setIsLoading(true);\r\n        const productsCol = query(collection(db, 'products'));\r\n        const snapshot = await getDocs(productsCol);\r\n        setProducts(snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })));\r\n        setIsLoading(false);\r\n    };\r\n\r\n    const handleSave = async (productData) => {\r\n        setIsLoading(true);\r\n        try {\r\n            // Funkcja do czyszczenia pustych wartości, które nie są obsługiwane przez Firestore\r\n            const cleanData = (data) => {\r\n                const cleaned = {};\r\n                for (const key in data) {\r\n                    if (data[key] !== null && data[key] !== undefined && data[key] !== '') {\r\n                        cleaned[key] = data[key];\r\n                    }\r\n                }\r\n                // Upewnij się, że imageUrls jest tablicą\r\n                cleaned.imageUrls = Array.isArray(cleaned.imageUrls) ? cleaned.imageUrls : [];\r\n                return cleaned;\r\n            };\r\n\r\n            const finalData = cleanData(productData);\r\n\r\n            if (editingProduct) {\r\n                await api.updateProduct(editingProduct.id, finalData);\r\n                addNotification(\"Produkt zaktualizowany!\", \"success\");\r\n            } else {\r\n                await api.addProduct(finalData);\r\n                addNotification(\"Produkt dodany!\", \"success\");\r\n            }\r\n            fetchProducts();\r\n        } catch (error) {\r\n            console.error(\"Błąd zapisu produktu:\", error);\r\n            addNotification(`Błąd zapisu: ${error.message}`, \"error\");\r\n        }\r\n        setIsModalOpen(false);\r\n        setEditingProduct(null);\r\n        setIsLoading(false);\r\n    };\r\n    \r\n    const handleDelete = async (id) => {\r\n        if (window.confirm(\"Czy na pewno chcesz usunąć ten produkt?\")) {\r\n            try {\r\n                // Najpierw usuń powiązane obrazy\r\n                const productToDelete = products.find(p => p.id === id);\r\n                if (productToDelete && productToDelete.imageUrls) {\r\n                    for (const url of productToDelete.imageUrls) {\r\n                        await api.deleteImage(url);\r\n                    }\r\n                }\r\n                // Następnie usuń produkt\r\n                await api.deleteProduct(id);\r\n                addNotification(\"Produkt usunięty!\", \"success\");\r\n                fetchProducts();\r\n            } catch (error) {\r\n                console.error(\"Błąd usuwania produktu:\", error);\r\n                addNotification(`Błąd usuwania: ${error.message}`, \"error\");\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleEdit = (product) => {\r\n        setEditingProduct(product);\r\n        setIsModalOpen(true);\r\n    };\r\n    \r\n    const handleAddNew = () => {\r\n        setEditingProduct(null);\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    if(isLoading) return <LoadingScreen />;\r\n\r\n    return (\r\n        <div>\r\n            <button onClick={handleAddNew} className=\"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mb-4\">Dodaj nowy produkt</button>\r\n            <div className=\"bg-gray-800 rounded-lg overflow-hidden\">\r\n                <table className=\"w-full text-left\">\r\n                    <thead className=\"bg-gray-700\">\r\n                        <tr>\r\n                            <th className=\"p-4\">Nazwa</th>\r\n                            <th className=\"p-4\">Kategoria</th>\r\n                            <th className=\"p-4\">Cena</th>\r\n                            <th className=\"p-4\">Akcje</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {products.map(product => (\r\n                            <tr key={product.id} className=\"border-b border-gray-700\">\r\n                                <td className=\"p-4\">{product.name}</td>\r\n                                <td className=\"p-4\">{product.category}</td>\r\n                                <td className=\"p-4\">{product.price} PLN</td>\r\n                                <td className=\"p-4\">\r\n                                    <button onClick={() => handleEdit(product)} className=\"text-blue-400 hover:text-blue-300 mr-2\">Edytuj</button>\r\n                                    <button onClick={() => handleDelete(product.id)} className=\"text-red-500 hover:text-red-400\">Usuń</button>\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            {isModalOpen && <ProductEditModal product={editingProduct} onSave={handleSave} onClose={() => setIsModalOpen(false)} />}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst ProductEditModal = ({ product, onSave, onClose }) => {\r\n    const [productData, setProductData] = useState(\r\n        product || { name: '', price: '', category: '', brand: '', description: '', imageUrls: [], bestseller: false }\r\n    );\r\n    const [isUploading, setIsUploading] = useState(false);\r\n    const { addNotification } = useAppContext();\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value, type, checked } = e.target;\r\n        setProductData(prev => ({ ...prev, [name]: type === 'checkbox' ? checked : value }));\r\n    };\r\n\r\n    const handlePriceChange = (e) => {\r\n        setProductData(prev => ({...prev, price: parseFloat(e.target.value) || 0 }));\r\n    };\r\n\r\n    const handleImageUpload = async (e) => {\r\n        const file = e.target.files[0];\r\n        if (file) {\r\n            setIsUploading(true);\r\n            try {\r\n                const url = await api.uploadImage(file);\r\n                setProductData(prev => ({...prev, imageUrls: [...(prev.imageUrls || []), url] }));\r\n                addNotification(\"Zdjęcie dodane!\", \"success\");\r\n            } catch (error) {\r\n                addNotification(\"Błąd przesyłania zdjęcia.\", \"error\");\r\n            }\r\n            setIsUploading(false);\r\n        }\r\n    };\r\n    \r\n    const handleImageDelete = async (urlToDelete) => {\r\n        if (window.confirm(\"Czy na pewno chcesz usunąć to zdjęcie?\")) {\r\n            try {\r\n                await api.deleteImage(urlToDelete);\r\n                setProductData(prev => ({ ...prev, imageUrls: prev.imageUrls.filter(url => url !== urlToDelete) }));\r\n                addNotification(\"Zdjęcie usunięte!\", \"success\");\r\n            } catch (error) {\r\n                console.error(\"Błąd usuwania zdjęcia:\", error);\r\n                addNotification(\"Błąd usuwania zdjęcia.\", \"error\");\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        onSave(productData);\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50\">\r\n            <div className=\"bg-gray-800 text-white rounded-lg p-8 w-full max-w-2xl max-h-screen overflow-y-auto\">\r\n                <h2 className=\"text-2xl font-bold mb-6\">{product ? 'Edytuj produkt' : 'Dodaj produkt'}</h2>\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    <input name=\"name\" value={productData.name} onChange={handleChange} placeholder=\"Nazwa\" className=\"w-full p-2 bg-gray-700 rounded\" />\r\n                    <input name=\"price\" type=\"number\" value={productData.price} onChange={handlePriceChange} placeholder=\"Cena\" className=\"w-full p-2 bg-gray-700 rounded\" />\r\n                    <input name=\"category\" value={productData.category} onChange={handleChange} placeholder=\"Kategoria\" className=\"w-full p-2 bg-gray-700 rounded\" />\r\n                    <input name=\"brand\" value={productData.brand} onChange={handleChange} placeholder=\"Marka\" className=\"w-full p-2 bg-gray-700 rounded\" />\r\n                    <textarea name=\"description\" value={productData.description} onChange={handleChange} placeholder=\"Opis\" className=\"w-full p-2 bg-gray-700 rounded h-24\" />\r\n                    \r\n                    <div>\r\n                        <label className=\"block mb-2\">Zdjęcia:</label>\r\n                        <div className=\"grid grid-cols-3 gap-2 mb-2\">\r\n                           {(productData.imageUrls || []).map(url => (\r\n                                <div key={url} className=\"relative group\">\r\n                                    <img src={url} alt=\"product\" className=\"w-full h-24 object-cover rounded\" />\r\n                                    <button onClick={() => handleImageDelete(url)} type=\"button\" className=\"absolute top-1 right-1 bg-red-600 text-white p-1 rounded-full opacity-0 group-hover:opacity-100\"><Trash2 size={14} /></button>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                        <input type=\"file\" onChange={handleImageUpload} className=\"w-full text-sm\" />\r\n                        {isUploading && <p>Przesyłanie...</p>}\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center\">\r\n                        <input type=\"checkbox\" id=\"bestseller\" name=\"bestseller\" checked={productData.bestseller} onChange={handleChange} className=\"mr-2\" />\r\n                        <label htmlFor=\"bestseller\">Bestseller</label>\r\n                    </div>\r\n\r\n                    <div className=\"flex justify-end space-x-4 pt-4\">\r\n                        <button type=\"button\" onClick={onClose} className=\"py-2 px-4 bg-gray-600 rounded\">Anuluj</button>\r\n                        <button type=\"submit\" className=\"py-2 px-4 bg-blue-600 rounded\">Zapisz</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nconst AdminOrders = () => {\r\n    const [orders, setOrders] = useState([]);\r\n    \r\n    useEffect(() => {\r\n        const fetchOrders = async () => {\r\n            const fetchedOrders = await api.fetchOrders();\r\n            setOrders(fetchedOrders);\r\n        };\r\n        fetchOrders();\r\n    }, []);\r\n\r\n    const handleStatusChange = async (orderId, newStatus) => {\r\n        await api.updateOrderStatus(orderId, newStatus);\r\n        setOrders(prev => prev.map(o => o.id === orderId ? {...o, status: newStatus} : o));\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-gray-800 rounded-lg overflow-hidden\">\r\n            <table className=\"w-full text-left\">\r\n                <thead className=\"bg-gray-700\">\r\n                    <tr>\r\n                        <th className=\"p-4\">ID Zamówienia</th>\r\n                        <th className=\"p-4\">Klient</th>\r\n                        <th className=\"p-4\">Data</th>\r\n                        <th className=\"p-4\">Suma</th>\r\n                        <th className=\"p-4\">Status</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {orders.map(order => (\r\n                        <tr key={order.id} className=\"border-b border-gray-700\">\r\n                            <td className=\"p-4\">{order.id.slice(0, 8)}...</td>\r\n                            <td className=\"p-4\">{order.shippingInfo.name}</td>\r\n                            <td className=\"p-4\">{new Date(order.createdAt.seconds * 1000).toLocaleDateString()}</td>\r\n                            <td className=\"p-4\">{order.total.toFixed(2)} PLN</td>\r\n                            <td className=\"p-4\">\r\n                                <select value={order.status} onChange={(e) => handleStatusChange(order.id, e.target.value)} className=\"bg-gray-700 p-1 rounded\">\r\n                                    <option>Nowe</option>\r\n                                    <option>W trakcie realizacji</option>\r\n                                    <option>Wysłane</option>\r\n                                    <option>Zakończone</option>\r\n                                    <option>Anulowane</option>\r\n                                </select>\r\n                            </td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst HeroSection = ({ navigate }) => (\r\n    <section \r\n        className=\"relative h-screen bg-cover bg-center flex flex-col items-center justify-center text-white\"\r\n        style={{ backgroundImage: `url(${heroImageUrl})` }}\r\n    >\r\n        <div className=\"absolute inset-0 bg-black opacity-50\"></div>\r\n        <div className=\"relative z-10 text-center container mx-auto px-4\">\r\n            <motion.h1 \r\n                initial={{ opacity: 0, y: -50 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ duration: 1 }}\r\n                className=\"text-4xl md:text-6xl font-extrabold mb-4\"\r\n            >\r\n                Energia dla Twojej podróży\r\n            </motion.h1>\r\n            <motion.p \r\n                initial={{ opacity: 0, y: 50 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ duration: 1, delay: 0.5 }}\r\n                className=\"text-lg md:text-xl mb-8\"\r\n            >\r\n                Najwyższej jakości ładowarki i akcesoria do pojazdów elektrycznych.\r\n            </motion.p>\r\n            <motion.button \r\n                whileHover={{ scale: 1.05 }}\r\n                whileTap={{ scale: 0.95 }}\r\n                onClick={() => navigate('products')}\r\n                className=\"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full text-lg transition duration-300\"\r\n            >\r\n                Odkryj produkty\r\n            </motion.button>\r\n        </div>\r\n    </section>\r\n);\r\n\r\n\r\nexport default function App() {\r\n    const [page, setPage] = useState('home');\r\n    const [pageData, setPageData] = useState(null);\r\n    const [user, setUser] = useState(null);\r\n    const [userRole, setUserRole] = useState(null);\r\n    const [cart, setCart] = useState([]);\r\n    const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\r\n    const [notifications, setNotifications] = useState([]);\r\n    const [orderDetails, setOrderDetails] = useState(null);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [products, setProducts] = useState([]);\r\n    const [categories, setCategories] = useState([]);\r\n    const notificationId = useRef(0);\r\n\r\n    // Ładowanie danych i nasłuchiwanie stanu autentykacji\r\n    useEffect(() => {\r\n        const unsubscribe = onAuthStateChanged(auth, async (currentUser) => {\r\n            setUser(currentUser);\r\n            if (currentUser) {\r\n                const userDocRef = doc(db, 'users', currentUser.uid);\r\n                const userDoc = await getDoc(userDocRef);\r\n                \r\n                if (userDoc.exists()) {\r\n                    // Użytkownik istnieje, wczytaj jego rolę\r\n                    setUserRole(userDoc.data().role);\r\n                } else {\r\n                    // Nie twórz dokumentu tutaj, aby uniknąć nadpisywania ról.\r\n                    // Tworzenie dokumentu jest teraz obsługiwane w `handleRegister` i `handleGoogleLogin`.\r\n                    // Warunek wyścigu może oznaczać, że dokument nie jest od razu dostępny.\r\n                    // Domyślne ustawienie \"user\" lokalnie jest bezpieczne.\r\n                    setUserRole('user');\r\n                }\r\n            } else {\r\n                setUserRole(null);\r\n            }\r\n            loadInitialData(); // Przeładuj dane po zmianie użytkownika\r\n        });\r\n        return () => unsubscribe();\r\n    }, []);\r\n    \r\n    const loadInitialData = async () => {\r\n        setIsLoading(true);\r\n        const [productsData, categoriesData] = await Promise.all([api.fetchProducts(), api.fetchCategories()]);\r\n        setProducts(productsData);\r\n        setCategories(categoriesData);\r\n        setIsLoading(false);\r\n    };\r\n\r\n    // Obsługa koszyka\r\n    useEffect(() => {\r\n        const savedCart = localStorage.getItem('cart');\r\n        if (savedCart) {\r\n            setCart(JSON.parse(savedCart));\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem('cart', JSON.stringify(cart));\r\n    }, [cart]);\r\n\r\n    const addNotification = (message, type = 'success') => {\r\n        const id = notificationId.current++;\r\n        setNotifications(prev => [...prev, { id, message, type }]);\r\n        setTimeout(() => {\r\n            setNotifications(prev => prev.filter(note => note.id !== id));\r\n        }, 3000);\r\n    };\r\n\r\n    const navigate = (newPage, data = null) => {\r\n        setPage(newPage);\r\n        setPageData(data);\r\n        window.scrollTo(0, 0);\r\n        setIsMobileMenuOpen(false); // Zamknij menu mobilne przy nawigacji\r\n    };\r\n\r\n    const addToCart = (product, quantity = 1) => {\r\n        setCart(prevCart => {\r\n            const existingItem = prevCart.find(item => item.id === product.id);\r\n            if (existingItem) {\r\n                return prevCart.map(item => item.id === product.id ? { ...item, quantity: item.quantity + quantity } : item);\r\n            }\r\n            return [...prevCart, { ...product, quantity }];\r\n        });\r\n        addNotification(`${product.name} dodano do koszyka!`, \"success\");\r\n    };\r\n\r\n    const updateCartQuantity = (productId, newQuantity) => {\r\n        if (newQuantity < 1) {\r\n            removeFromCart(productId);\r\n        } else {\r\n            setCart(cart.map(item => item.id === productId ? { ...item, quantity: newQuantity } : item));\r\n        }\r\n    };\r\n    \r\n    const removeFromCart = (productId) => {\r\n        setCart(cart.filter(item => item.id !== productId));\r\n    };\r\n\r\n    const clearCart = () => setCart([]);\r\n    const cartItemCount = cart.reduce((acc, item) => acc + item.quantity, 0);\r\n    \r\n    const handleLogout = async () => {\r\n        await signOut(auth);\r\n        addNotification(\"Wylogowano pomyślnie.\", \"success\");\r\n        navigate('home');\r\n    };\r\n\r\n    const renderPage = () => {\r\n        switch (page) {\r\n            case 'home': return <HomePage products={products} categories={categories} navigate={navigate} />;\r\n            case 'category': return <CategoryPage navigate={navigate} products={products} categoryName={pageData} />;\r\n            case 'product': return <ProductPage navigate={navigate} productId={pageData} />;\r\n            case 'cart': return <CartPage navigate={navigate} />;\r\n            case 'checkout': return <CheckoutPage navigate={navigate} />;\r\n            case 'order-confirmation': return <OrderConfirmationPage navigate={navigate} orderDetails={orderDetails} />;\r\n            case 'login': return <LoginPage navigate={navigate} addNotification={addNotification} />;\r\n            case 'register': return <RegisterPage navigate={navigate} addNotification={addNotification} />;\r\n            case 'admin': return <AdminPanel navigate={navigate} />;\r\n            default: return <HomePage products={products} categories={categories} navigate={navigate} />;\r\n        }\r\n    };\r\n    \r\n    const contextValue = {\r\n        user,\r\n        userRole,\r\n        cart,\r\n        addToCart,\r\n        updateCartQuantity,\r\n        removeFromCart,\r\n        clearCart,\r\n        cartItemCount,\r\n        navigate,\r\n        addNotification,\r\n        handleLogout,\r\n        setUser,\r\n        setOrderDetails\r\n    };\r\n\r\n    return (\r\n        <AppContext.Provider value={contextValue}>\r\n            <div className=\"bg-gray-900 min-h-screen font-sans\">\r\n                {isLoading && <LoadingScreen />}\r\n                <NotificationCenter notifications={notifications} />\r\n                <Header isMobileMenuOpen={isMobileMenuOpen} setIsMobileMenuOpen={setIsMobileMenuOpen} />\r\n\r\n                <AnimatePresence mode=\"wait\">\r\n                    <motion.main\r\n                        key={page}\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        transition={{ duration: 0.3 }}\r\n                    >\r\n                        {renderPage()}\r\n                    </motion.main>\r\n                </AnimatePresence>\r\n\r\n                <AnimatePresence>\r\n                    {isMobileMenuOpen && (\r\n                        <motion.div initial={{ x: '100%' }} animate={{ x: 0 }} exit={{ x: '100%' }} transition={{ type: 'spring', stiffness: 300, damping: 30 }} className=\"fixed top-0 right-0 h-full w-64 bg-gray-800 z-30 p-6 md:hidden\">\r\n                            <nav className=\"flex flex-col space-y-4 text-white\">\r\n                                <a onClick={() => navigate('category', 'Ładowarki')} className=\"hover:text-blue-400\">Ładowarki</a>\r\n                                <a onClick={() => navigate('category', 'Adaptery')} className=\"hover:text-blue-400\">Adaptery</a>\r\n                                <a onClick={() => navigate('category', 'Akcesoria')} className=\"hover:text-blue-400\">Akcesoria</a>\r\n                                <a onClick={() => navigate('category', 'Baterie')} className=\"hover:text-blue-400\">Baterie</a>\r\n                                <hr className=\"border-gray-700\"/>\r\n                                <a onClick={() => navigate('cart')} className=\"hover:text-blue-400\">Koszyk ({cartItemCount})</a>\r\n                                {user ? (\r\n                                    <>\r\n                                        {userRole === 'admin' && <a onClick={() => navigate('admin')} className=\"hover:text-blue-400\">Panel Admina</a>}\r\n                                        <a onClick={handleLogout} className=\"hover:text-blue-400\">Wyloguj</a>\r\n                                    </>\r\n                                ) : (\r\n                                    <>\r\n                                        <a onClick={() => navigate('login')} className=\"hover:text-blue-400\">Zaloguj się</a>\r\n                                        <a onClick={() => navigate('register')} className=\"hover:text-blue-400\">Zarejestruj się</a>\r\n                                    </>\r\n                                )}\r\n                            </nav>\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n                \r\n                <Footer />\r\n            </div>\r\n        </AppContext.Provider>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}