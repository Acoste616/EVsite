{"ast":null,"code":"import React,{useState,useEffect,createContext,useContext,useRef}from'react';import{initializeApp}from'firebase/app';import{getAuth,onAuthStateChanged,createUserWithEmailAndPassword,signInWithEmailAndPassword,signOut}from'firebase/auth';import{getFirestore,collection,getDocs,doc,getDoc,addDoc,updateDoc,deleteDoc,query,where,onSnapshot}from'firebase/firestore';import{getStorage,ref,uploadBytes,getDownloadURL}from'firebase/storage';import{ShoppingCart,User,Star,Menu,X,Trash2,Plus,Minus,Truck,CreditCard,ShieldCheck,Search,Filter,LogOut,Settings,ArrowRight,Eye,Zap,ImagePlus,AlertCircle,CheckCircle,BarChart}from'lucide-react';// --- KONFIGURACJA FIREBASE (ZAKTUALIZOWANA) ---\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const firebaseConfig={apiKey:\"AIzaSyC6L-8owWH1z6Ipf2FZax7gZ7FQOvuSNJs\",authDomain:\"evshop-6719a.firebaseapp.com\",projectId:\"evshop-6719a\",storageBucket:\"evshop-6719a.appspot.com\",// Poprawiona domena dla Storage\nmessagingSenderId:\"619247072748\",appId:\"1:619247072748:web:ad274f442dba53736cbcc9\",measurementId:\"G-Z80X8YRR4L\"};// Inicjalizacja Firebase\nconst app=initializeApp(firebaseConfig);const auth=getAuth(app);const db=getFirestore(app);const storage=getStorage(app);// --- SAMPLE TESLA PRODUCTS ---\nconst sampleTeslaProducts=[{id:'tesla-wall-connector',name:'Tesla Wall Connector Gen 3',price:2499,category:'Ładowarki',brand:'Tesla',rating:4.9,bestseller:true,description:'Najszybsza ładowarka domowa Tesla z mocą do 11.5 kW. Idealna do codziennego użytku domowego.',imageUrls:['https://images.unsplash.com/photo-1593941707882-a5bac6861d75?q=80&w=800&auto=format&fit=crop','https://images.unsplash.com/photo-1558618666-fcd25c85cd64?q=80&w=800&auto=format&fit=crop']},{id:'tesla-mobile-connector',name:'Tesla Mobile Connector',price:899,category:'Ładowarki',brand:'Tesla',rating:4.8,bestseller:true,description:'Przenośna ładowarka Tesla z adapterami do różnych gniazdek. Niezbędna w każdej podróży.',imageUrls:['https://images.unsplash.com/photo-1609592606436-c0e3d0c4b3b9?q=80&w=800&auto=format&fit=crop','https://images.unsplash.com/photo-1621784377641-2c1a2c7a4b91?q=80&w=800&auto=format&fit=crop']},{id:'tesla-chademo-adapter',name:'Tesla CHAdeMO Adapter',price:1299,category:'Adaptery',brand:'Tesla',rating:4.7,description:'Adapter CHAdeMO umożliwiający ładowanie Tesla na stacjach CHAdeMO o mocy do 50 kW.',imageUrls:['https://images.unsplash.com/photo-1626668011687-8a114d5c1604?q=80&w=800&auto=format&fit=crop']},{id:'tesla-j1772-adapter',name:'Tesla J1772 Adapter',price:399,category:'Adaptery',brand:'Tesla',rating:4.6,description:'Adapter J1772 pozwalający na ładowanie Tesla na publicznych stacjach J1772.',imageUrls:['https://images.unsplash.com/photo-1558618666-fcd25c85cd64?q=80&w=800&auto=format&fit=crop']},{id:'tesla-supercharger-cable',name:'Tesla Supercharger Cable (zapasowy)',price:699,category:'Akcesoria',brand:'Tesla',rating:4.8,description:'Zapasowy kabel do ładowarki Tesla Supercharger. Wytrzymały i niezawodny.',imageUrls:['https://images.unsplash.com/photo-1609592606436-c0e3d0c4b3b9?q=80&w=800&auto=format&fit=crop']},{id:'tesla-powerwall',name:'Tesla Powerwall 2',price:28999,category:'Baterie',brand:'Tesla',rating:4.9,bestseller:true,description:'Domowa bateria Tesla Powerwall 2 o pojemności 13,5 kWh. Zapewnia niezależność energetyczną.',imageUrls:['https://images.unsplash.com/photo-1497435334941-8c899ee9e8e9?q=80&w=800&auto=format&fit=crop']},{id:'tesla-model-s-floor-mats',name:'Tesla Model S - Dywaniki podłogowe',price:459,category:'Akcesoria',brand:'Tesla',rating:4.5,description:'Oryginalne dywaniki podłogowe Tesla Model S. Idealne dopasowanie i wysoka jakość.',imageUrls:['https://images.unsplash.com/photo-1549924231-f129b911e442?q=80&w=800&auto=format&fit=crop']},{id:'tesla-model-3-trunk-mat',name:'Tesla Model 3 - Mata bagażnika',price:299,category:'Akcesoria',brand:'Tesla',rating:4.4,description:'Wodoodporna mata bagażnika dla Tesla Model 3. Chroni przed zabrudzeniem i wilgocią.',imageUrls:['https://images.unsplash.com/photo-1549924231-f129b911e442?q=80&w=800&auto=format&fit=crop']},{id:'tesla-wireless-charger',name:'Tesla Wireless Phone Charger',price:329,category:'Akcesoria',brand:'Tesla',rating:4.3,description:'Bezprzewodowa ładowarka do telefonu Tesla. Kompatybilna z Model S, 3, X i Y.',imageUrls:['https://images.unsplash.com/photo-1594736797933-d0401ba4b7c0?q=80&w=800&auto=format&fit=crop']},{id:'tesla-gen2-mobile-connector',name:'Tesla Gen 2 Mobile Connector Bundle',price:1299,category:'Ładowarki',brand:'Tesla',rating:4.8,description:'Kompletny zestaw Gen 2 Mobile Connector z adapterami NEMA 14-50, 5-15 i J1772.',imageUrls:['https://images.unsplash.com/photo-1609592606436-c0e3d0c4b3b9?q=80&w=800&auto=format&fit=crop']}];// --- API SERWIS (LIVE) ---\n// Funkcje do interakcji z Firebase\nconst api={fetchProducts:async()=>{try{const productsCol=collection(db,'products');const snapshot=await getDocs(productsCol);const firebaseProducts=snapshot.docs.map(doc=>({id:doc.id,...doc.data()}));// Jeśli baza danych jest pusta, zwróć sample produkty Tesla\nif(firebaseProducts.length===0){return sampleTeslaProducts;}// Połącz produkty z Firebase z sample produktami Tesla\nconst allProducts=[...firebaseProducts,...sampleTeslaProducts];// Usuń duplikaty na podstawie ID\nconst uniqueProducts=allProducts.filter((product,index,self)=>index===self.findIndex(p=>p.id===product.id));return uniqueProducts;}catch(error){console.error('Błąd podczas pobierania produktów:',error);// W przypadku błędu, zwróć sample produkty Tesla\nreturn sampleTeslaProducts;}},fetchCategories:async()=>{const products=await api.fetchProducts();const categoryNames=[...new Set(products.map(p=>p.category))];// Użyj prawdziwych zdjęć dla kategorii, jeśli są dostępne, w przeciwnym razie placeholder\nconst defaultImage=\"https://images.unsplash.com/photo-1633886122439-d852891157c3?q=80&w=800&auto=format&fit=crop\";return categoryNames.map(name=>{var _products$find,_products$find$imageU;return{name,image:((_products$find=products.find(p=>p.category===name))===null||_products$find===void 0?void 0:(_products$find$imageU=_products$find.imageUrls)===null||_products$find$imageU===void 0?void 0:_products$find$imageU[0])||defaultImage};});},fetchProduct:async id=>{const docRef=doc(db,'products',id);const docSnap=await getDoc(docRef);return docSnap.exists()?{id:docSnap.id,...docSnap.data()}:null;},getReviews:(productId,callback)=>{const reviewsQuery=query(collection(db,`products/${productId}/reviews`));return onSnapshot(reviewsQuery,snapshot=>{const reviews=snapshot.docs.map(doc=>({id:doc.id,...doc.data()}));callback(reviews);});},addReview:async(productId,review)=>{await addDoc(collection(db,`products/${productId}/reviews`),review);},uploadImage:async file=>{const storageRef=ref(storage,`products/${Date.now()}_${file.name}`);await uploadBytes(storageRef,file);return await getDownloadURL(storageRef);},// Funkcje dla admina\naddProduct:async product=>addDoc(collection(db,'products'),product),updateProduct:async(id,product)=>updateDoc(doc(db,'products',id),product),deleteProduct:async id=>deleteDoc(doc(db,'products',id)),fetchOrders:async()=>{const ordersCol=collection(db,'orders');const snapshot=await getDocs(ordersCol);return snapshot.docs.map(doc=>({id:doc.id,...doc.data()}));},updateOrderStatus:async(id,status)=>updateDoc(doc(db,'orders',id),{status})};// --- CONTEXT API ---\nconst AppContext=/*#__PURE__*/createContext();// --- KOMPONENTY UI ---\nconst PermissionErrorDisplay=_ref=>{let{message}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-900/95 flex items-center justify-center z-[100] p-8 text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-900/50 border border-red-700 rounded-lg p-8 max-w-2xl\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-16 w-16 mx-auto text-red-400 mb-4\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white mb-2\",children:\"B\\u0142\\u0105d Konfiguracji Firebase\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-200\",children:message}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 mt-4 text-sm\",children:\"Wygl\\u0105da na to, \\u017Ce Twoja baza danych Firestore ma nieprawid\\u0142owe regu\\u0142y bezpiecze\\u0144stwa. Przejd\\u017A do panelu Firebase, wybierz baz\\u0119 Firestore, przejd\\u017A do zak\\u0142adki \\\"Regu\\u0142y\\\" (Rules) i wklej regu\\u0142y podane w dokumentacji projektu.\"})]})});};const NotificationCenter=_ref2=>{let{notifications}=_ref2;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed top-24 right-4 z-[100] space-y-2\",children:notifications.map(n=>/*#__PURE__*/_jsxs(\"div\",{className:`flex items-center p-4 rounded-lg shadow-lg animate-fade-in-right ${n.type==='success'?'bg-green-600':'bg-red-600'} text-white`,children:[n.type==='success'?/*#__PURE__*/_jsx(CheckCircle,{className:\"mr-2\"}):/*#__PURE__*/_jsx(AlertCircle,{className:\"mr-2\"}),n.message]},n.id))});};const LoadingScreen=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-0 bg-gray-900 flex flex-col items-center justify-center z-[100]\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(Zap,{className:\"h-12 w-12 text-blue-500 animate-pulse\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-3xl font-bold text-white\",children:\"EV Akcesoria\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 mt-4\",children:\"\\u0141adowanie przysz\\u0142o\\u015Bci...\"})]});const Header=_ref3=>{let{isMobileMenuOpen,setIsMobileMenuOpen}=_ref3;const{navigate,cartItemCount,user,userRole,handleLogout,categories}=useContext(AppContext);const navLinks=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"a\",{onClick:()=>navigate('home'),className:\"cursor-pointer hover:text-blue-400 transition-colors\",children:\"Strona g\\u0142\\xF3wna\"}),/*#__PURE__*/_jsx(\"a\",{onClick:()=>navigate('category','Wszystkie'),className:\"cursor-pointer hover:text-blue-400 transition-colors\",children:\"Produkty\"}),categories.slice(0,3).map(cat=>/*#__PURE__*/_jsx(\"a\",{onClick:()=>navigate('category',cat.name),className:\"cursor-pointer hover:text-blue-400 transition-colors\",children:cat.name},cat.name))]});return/*#__PURE__*/_jsxs(\"header\",{className:\"bg-gray-900/70 backdrop-blur-lg border-b border-gray-700/50 fixed top-0 left-0 right-0 z-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between h-20\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsxs(\"a\",{onClick:()=>navigate('home'),className:\"flex items-center space-x-2 cursor-pointer\",children:[/*#__PURE__*/_jsx(Zap,{className:\"h-8 w-8 text-blue-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl font-bold text-white\",children:\"EV Akcesoria\"})]})}),/*#__PURE__*/_jsx(\"nav\",{className:\"hidden md:flex md:space-x-8 items-center text-lg font-medium text-gray-300\",children:navLinks}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"a\",{onClick:()=>navigate('cart'),className:\"relative cursor-pointer group\",children:[/*#__PURE__*/_jsx(ShoppingCart,{className:\"h-7 w-7 text-gray-400 group-hover:text-blue-400 transition-colors\"}),cartItemCount>0&&/*#__PURE__*/_jsx(\"span\",{className:\"absolute -top-2 -right-2 bg-blue-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center animate-pulse\",children:cartItemCount})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative group\",children:[/*#__PURE__*/_jsx(\"a\",{onClick:()=>user?null:navigate('login'),className:\"cursor-pointer\",children:/*#__PURE__*/_jsx(User,{className:\"h-7 w-7 text-gray-400 group-hover:text-blue-400 transition-colors\"})}),user?/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-0 mt-2 w-56 bg-gray-800 border border-gray-700 rounded-md shadow-lg py-1 z-20 opacity-0 group-hover:opacity-100 transition-opacity duration-300\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"px-4 py-2 text-sm text-gray-400 border-b border-gray-700\",children:\"Zalogowano jako:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"px-4 pt-1 pb-2 text-sm text-white truncate\",children:user.email}),userRole==='admin'&&/*#__PURE__*/_jsxs(\"a\",{onClick:()=>navigate('admin'),className:\"flex items-center w-full px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 cursor-pointer\",children:[/*#__PURE__*/_jsx(Settings,{className:\"w-4 h-4 mr-2\"}),\"Panel Admina\"]}),/*#__PURE__*/_jsxs(\"a\",{onClick:handleLogout,className:\"flex items-center w-full px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 cursor-pointer\",children:[/*#__PURE__*/_jsx(LogOut,{className:\"w-4 h-4 mr-2\"}),\"Wyloguj\"]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-0 mt-2 w-48 bg-gray-800 border border-gray-700 rounded-md shadow-lg py-1 z-20 opacity-0 group-hover:opacity-100 transition-opacity duration-300\",children:[/*#__PURE__*/_jsx(\"a\",{onClick:()=>navigate('login'),className:\"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 cursor-pointer\",children:\"Zaloguj si\\u0119\"}),/*#__PURE__*/_jsx(\"a\",{onClick:()=>navigate('register'),className:\"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 cursor-pointer\",children:\"Zarejestruj si\\u0119\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"md:hidden\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsMobileMenuOpen(!isMobileMenuOpen),children:isMobileMenuOpen?/*#__PURE__*/_jsx(X,{className:\"h-7 w-7 text-gray-300\"}):/*#__PURE__*/_jsx(Menu,{className:\"h-7 w-7 text-gray-300\"})})})]})]})}),isMobileMenuOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"md:hidden bg-gray-900 shadow-lg border-t border-gray-700\",children:/*#__PURE__*/_jsx(\"nav\",{className:\"flex flex-col space-y-4 p-4 text-center text-gray-300\",children:navLinks})})]});};const Footer=()=>/*#__PURE__*/_jsxs(\"footer\",{className:\"relative bg-gray-900 border-t border-gray-800 text-white overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-5\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative container mx-auto px-4 sm:px-6 lg:px-8 py-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4 text-blue-400\",children:\"EV Akcesoria\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400\",children:\"Nap\\u0119dzamy rewolucj\\u0119. Najlepsze akcesoria dla Twojego EV, dost\\u0119pne od r\\u0119ki.\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Informacje\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"text-gray-400 hover:text-white\",children:\"O nas\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"text-gray-400 hover:text-white\",children:\"Kontakt\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"text-gray-400 hover:text-white\",children:\"Polityka prywatno\\u015Bci\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"text-gray-400 hover:text-white\",children:\"Regulamin\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Obs\\u0142uga klienta\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"text-gray-400 hover:text-white\",children:\"Dostawa i p\\u0142atno\\u015Bci\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"text-gray-400 hover:text-white\",children:\"Zwroty i reklamacje\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"text-gray-400 hover:text-white\",children:\"FAQ\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Kontakt\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400\",children:\"ul. Elektryczna 1, Warszawa\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400\",children:\"kontakt@ev-akcesoria.pl\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400\",children:\"+48 123 456 789\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-8 border-t border-gray-700 pt-8 text-center text-gray-500\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"\\xA9 \",new Date().getFullYear(),\" EV Akcesoria. Wszelkie prawa zastrze\\u017Cone. Stworzone z pasji do elektromobilno\\u015Bci.\"]})})]})]});const ProductCard=_ref4=>{let{product,navigate}=_ref4;const{addToCart}=useContext(AppContext);return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 border border-gray-700 rounded-lg shadow-lg overflow-hidden group transition-all duration-300 hover:shadow-blue-500/20 hover:border-blue-800/50 transform hover:-translate-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:product.imageUrls&&product.imageUrls[0]?product.imageUrls[0]:'https://placehold.co/600x600/111827/ffffff?text=Brak+zdjęcia',alt:product.name,className:\"w-full h-64 object-cover\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 right-0 bg-blue-600 text-white px-3 py-1 m-2 rounded-full text-sm font-semibold\",children:product.category}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute bottom-4 left-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex justify-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();addToCart(product);},className:\"bg-blue-600 text-white font-bold py-2 px-4 rounded-full hover:bg-blue-500 flex-1\",children:\"Do koszyka\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('product',product.id),className:\"bg-gray-200/80 text-gray-900 font-bold p-2 rounded-full hover:bg-white\",children:/*#__PURE__*/_jsx(Eye,{})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 cursor-pointer\",onClick:()=>navigate('product',product.id),children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold truncate text-white\",children:product.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mt-2\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-xl font-bold text-blue-400\",children:[product.price.toFixed(2),\" z\\u0142\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Star,{className:\"h-5 w-5 text-yellow-400\",fill:\"currentColor\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400 ml-1\",children:product.rating||'Brak'})]})]})]})]});};const HomePage=_ref5=>{let{navigate,products,categories}=_ref5;const bestsellers=products.filter(p=>p.bestseller).slice(0,4);return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-24 md:space-y-32 pb-24\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"relative h-[85vh] text-white flex items-center justify-center overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"video\",{autoPlay:true,loop:true,muted:true,playsInline:true,className:\"absolute z-0 w-auto min-w-full min-h-full max-w-none object-cover\",children:[/*#__PURE__*/_jsx(\"source\",{src:\"https://assets.mixkit.co/videos/preview/mixkit-electric-car-charging-at-a-modern-charging-station-43304-large.mp4\",type:\"video/mp4\"}),\"[Film przedstawiaj\\u0105cy \\u0142adowanie samochodu elektrycznego]\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-black/60 z-10\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative z-20 text-center p-4 animate-fade-in-up\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl md:text-7xl font-extrabold tracking-tight mb-4\",children:\"Przysz\\u0142o\\u015B\\u0107 jest Elektryczna.\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg md:text-2xl max-w-3xl mx-auto mb-8 text-gray-300\",children:\"Wyposa\\u017C sw\\xF3j samoch\\xF3d w najlepsze akcesoria na rynku.\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('category','Wszystkie'),className:\"bg-blue-600 hover:bg-blue-500 text-white font-bold py-4 px-10 rounded-full text-xl transition-all transform hover:scale-105 shadow-lg shadow-blue-600/30 flex items-center justify-center mx-auto\",children:[\"Odkryj produkty \",/*#__PURE__*/_jsx(ArrowRight,{className:\"ml-3 h-6 w-6\"})]})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"container mx-auto px-4 sm:px-6 lg:px-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl md:text-4xl font-bold text-center mb-12 text-white\",children:\"Przegl\\u0105daj Kategorie\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 md:gap-8\",children:categories.map(category=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>navigate('category',category.name),className:\"group cursor-pointer text-center transform transition-all duration-300 hover:!scale-105 hover:z-10\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative rounded-lg overflow-hidden shadow-lg mb-4 aspect-w-4 aspect-h-3\",children:[/*#__PURE__*/_jsx(\"img\",{src:category.image,alt:category.name,className:\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-black/40 group-hover:bg-black/20 transition-colors\"})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-200\",children:category.name})]},category.name))})]}),/*#__PURE__*/_jsx(\"section\",{className:\"bg-gray-900 py-24\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 sm:px-6 lg:px-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl md:text-4xl font-bold text-center mb-12 text-white\",children:\"Nasze Bestsellery\"}),bestsellers.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8\",children:bestsellers.map(product=>/*#__PURE__*/_jsx(ProductCard,{product:product,navigate:navigate},product.id))}):/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-400\",children:\"Brak bestseller\\xF3w do wy\\u015Bwietlenia. Dodaj produkty w panelu admina.\"})]})})]});};const CategoryPage=_ref6=>{let{navigate,products,categoryName}=_ref6;const[filteredProducts,setFilteredProducts]=useState([]);const[sort,setSort]=useState('popular');const[filters,setFilters]=useState({brand:'all',price:'all'});useEffect(()=>{let tempProducts=categoryName==='Wszystkie'?[...products]:products.filter(p=>p.category===categoryName);if(filters.brand!=='all')tempProducts=tempProducts.filter(p=>p.brand===filters.brand);if(filters.price!=='all'){const[min,max]=filters.price.split('-').map(Number);tempProducts=tempProducts.filter(p=>p.price>=min&&(max?p.price<=max:true));}switch(sort){case'price-asc':tempProducts.sort((a,b)=>a.price-b.price);break;case'price-desc':tempProducts.sort((a,b)=>b.price-a.price);break;case'name-asc':tempProducts.sort((a,b)=>a.name.localeCompare(b.name));break;default:tempProducts.sort((a,b)=>(b.reviews||0)-(a.reviews||0));break;}setFilteredProducts(tempProducts);},[categoryName,products,sort,filters]);const uniqueBrands=['all',...new Set(products.map(p=>p.brand))];const priceRanges=[{label:'Wszystkie',value:'all'},{label:'Poniżej 100 zł',value:'0-100'},{label:'100 - 500 zł',value:'100-500'},{label:'500 - 2000 zł',value:'500-2000'},{label:'Powyżej 2000 zł',value:'2000'}];return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold mb-8 text-white\",children:categoryName}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row gap-8\",children:[/*#__PURE__*/_jsx(\"aside\",{className:\"w-full md:w-1/4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 p-6 rounded-lg shadow-md space-y-6 border border-gray-700\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-semibold flex items-center text-white\",children:[/*#__PURE__*/_jsx(Filter,{className:\"mr-2\"}),\" Filtry\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"sort\",className:\"block text-sm font-medium text-gray-400\",children:\"Sortuj wed\\u0142ug\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"sort\",value:sort,onChange:e=>setSort(e.target.value),className:\"mt-1 block w-full pl-3 pr-10 py-2 text-base bg-gray-700 border-gray-600 text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"popular\",children:\"Popularno\\u015B\\u0107\"}),\" \",/*#__PURE__*/_jsx(\"option\",{value:\"price-asc\",children:\"Cena: rosn\\u0105co\"}),/*#__PURE__*/_jsx(\"option\",{value:\"price-desc\",children:\"Cena: malej\\u0105co\"}),\" \",/*#__PURE__*/_jsx(\"option\",{value:\"name-asc\",children:\"Nazwa: A-Z\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold mb-2 text-white\",children:\"Marka\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:uniqueBrands.map(brand=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{id:`brand-${brand}`,name:\"brand\",type:\"radio\",value:brand,checked:filters.brand===brand,onChange:e=>setFilters({...filters,brand:e.target.value}),className:\"h-4 w-4 text-blue-600 bg-gray-700 border-gray-600 focus:ring-blue-500\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:`brand-${brand}`,className:\"ml-3 text-sm text-gray-300\",children:brand==='all'?'Wszystkie':brand})]},brand))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold mb-2 text-white\",children:\"Cena\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:priceRanges.map(range=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{id:`price-${range.value}`,name:\"price\",type:\"radio\",value:range.value,checked:filters.price===range.value,onChange:e=>setFilters({...filters,price:e.target.value}),className:\"h-4 w-4 text-blue-600 bg-gray-700 border-gray-600 focus:ring-blue-500\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:`price-${range.value}`,className:\"ml-3 text-sm text-gray-300\",children:range.label})]},range.value))})]})]})}),/*#__PURE__*/_jsx(\"main\",{className:\"w-full md:w-3/4\",children:filteredProducts.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8\",children:filteredProducts.map(product=>/*#__PURE__*/_jsx(ProductCard,{product:product,navigate:navigate},product.id))}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-16 bg-gray-800 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-white\",children:\"Brak produkt\\xF3w\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 mt-2\",children:\"Nie znaleziono produkt\\xF3w w tej kategorii.\"})]})})]})]});};const ReviewsSection=_ref7=>{let{productId,reviews}=_ref7;const{user,addNotification,navigate}=useContext(AppContext);const[newReviewText,setNewReviewText]=useState('');const[newRating,setNewRating]=useState(5);const handleReviewSubmit=async e=>{e.preventDefault();if(!user){addNotification('Musisz być zalogowany, aby dodać opinię.','error');navigate('login');return;}if(newReviewText.trim()===''){addNotification('Opinia nie może być pusta.','error');return;}const review={author:user.email,text:newReviewText,rating:newRating,createdAt:new Date()};try{await api.addReview(productId,review);setNewReviewText('');setNewRating(5);addNotification('Dziękujemy za Twoją opinię!');}catch(error){addNotification('Wystąpił błąd podczas dodawania opinii.','error');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"mt-16\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-white mb-8\",children:\"Opinie klient\\xF3w\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:reviews.length>0?reviews.map(review=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 p-6 rounded-lg border border-gray-700\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-white\",children:review.author}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:[...Array(5)].map((_,i)=>/*#__PURE__*/_jsx(Star,{size:16,className:i<review.rating?'text-yellow-400':'text-gray-600',fill:\"currentColor\"},i))})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-300\",children:review.text})]},review.id)):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400\",children:\"Brak opinii dla tego produktu. B\\u0105d\\u017A pierwszy!\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"sticky top-24\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleReviewSubmit,className:\"bg-gray-800 p-6 rounded-lg border border-gray-700\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-white mb-4\",children:\"Dodaj swoj\\u0105 opini\\u0119\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-400 mb-2\",children:\"Ocena\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex\",children:[...Array(5)].map((_,i)=>/*#__PURE__*/_jsx(Star,{size:24,className:`cursor-pointer ${i<newRating?'text-yellow-400':'text-gray-600'}`,fill:\"currentColor\",onClick:()=>setNewRating(i+1)},i))})]}),/*#__PURE__*/_jsx(\"textarea\",{value:newReviewText,onChange:e=>setNewReviewText(e.target.value),placeholder:\"Twoja opinia...\",className:\"w-full p-2 border rounded bg-gray-700 border-gray-600 text-white h-32\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"mt-4 w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 rounded-md\",children:\"Wy\\u015Blij opini\\u0119\"})]})})]})]});};const ProductPage=_ref8=>{let{navigate,productId}=_ref8;const{addToCart,products}=useContext(AppContext);const[product,setProduct]=useState(null);const[reviews,setReviews]=useState([]);const[isLoading,setIsLoading]=useState(true);const[mainImage,setMainImage]=useState('');const[quantity,setQuantity]=useState(1);useEffect(()=>{const fetchData=async()=>{setIsLoading(true);const productData=await api.fetchProduct(productId);setProduct(productData);if(productData&&productData.imageUrls&&productData.imageUrls.length>0){setMainImage(productData.imageUrls[0]);}setIsLoading(false);};fetchData();const unsubscribe=api.getReviews(productId,setReviews);return()=>unsubscribe();},[productId]);if(isLoading||!product)return/*#__PURE__*/_jsx(LoadingScreen,{});const relatedProducts=products.filter(p=>p.category===product.category&&p.id!==product.id).slice(0,4);return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-900\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 sm:px-6 lg:px-8 py-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-12\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"aspect-w-1 aspect-h-1 w-full bg-gray-800 rounded-lg overflow-hidden shadow-lg mb-4\",children:/*#__PURE__*/_jsx(\"img\",{src:mainImage||product.imageUrls&&product.imageUrls[0],alt:product.name,className:\"w-full h-full object-cover transition-all duration-300 hover:scale-105\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-4 gap-2\",children:product.imageUrls.map((url,index)=>/*#__PURE__*/_jsx(\"div\",{onClick:()=>setMainImage(url),className:`cursor-pointer rounded-md overflow-hidden border-2 transition-all ${mainImage===url?'border-blue-500':'border-gray-700 hover:border-blue-600'}`,children:/*#__PURE__*/_jsx(\"img\",{src:url,alt:`${product.name} - widok ${index+1}`,className:\"w-full h-full object-cover\"})},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col justify-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl md:text-4xl font-bold tracking-tight text-white\",children:product.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mt-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:[...Array(5)].map((_,i)=>/*#__PURE__*/_jsx(Star,{className:`h-5 w-5 ${i<Math.round(product.rating)?'text-yellow-400':'text-gray-600'}`,fill:\"currentColor\"},i))}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-gray-400\",children:[\"(\",reviews.length,\" opinii)\"]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-4xl font-bold text-blue-400 my-4\",children:[product.price.toFixed(2),\" z\\u0142\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 my-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center border border-gray-600 rounded-md bg-gray-800\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setQuantity(q=>Math.max(1,q-1)),className:\"p-3 text-gray-400 hover:bg-gray-700\",children:/*#__PURE__*/_jsx(Minus,{className:\"h-5 w-5\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"px-4 text-lg font-semibold text-white\",children:quantity}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setQuantity(q=>q+1),className:\"p-3 text-gray-400 hover:bg-gray-700\",children:/*#__PURE__*/_jsx(Plus,{className:\"h-5 w-5\"})})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>addToCart(product,quantity),className:\"flex-1 bg-blue-600 text-white font-bold py-3 px-6 rounded-md hover:bg-blue-500 transition-colors flex items-center justify-center space-x-2\",children:[/*#__PURE__*/_jsx(ShoppingCart,{className:\"h-5 w-5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Dodaj do koszyka\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{addToCart(product,quantity);navigate('checkout');},className:\"w-full bg-green-600 text-white font-bold py-3 px-6 rounded-md hover:bg-green-500 transition-colors\",children:\"Kup teraz\"})]})]}),/*#__PURE__*/_jsx(ReviewsSection,{productId:productId,reviews:reviews}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-24\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-white mb-8\",children:\"Zobacz r\\xF3wnie\\u017C\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8\",children:relatedProducts.map(p=>/*#__PURE__*/_jsx(ProductCard,{product:p,navigate:navigate},p.id))})]})]})});};const CartPage=_ref9=>{let{navigate}=_ref9;const{cart,updateCartQuantity,removeFromCart,cartTotal,cartItemCount}=useContext(AppContext);if(cartItemCount===0){return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 sm:px-6 lg:px-8 py-16 text-center\",children:[/*#__PURE__*/_jsx(ShoppingCart,{className:\"h-24 w-24 mx-auto text-gray-600\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mt-4 text-white\",children:\"Tw\\xF3j koszyk jest pusty\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 mt-2\",children:\"Odkryj nasze produkty i dodaj co\\u015B do koszyka.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('category','Wszystkie'),className:\"mt-6 bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-8 rounded-md transition-colors\",children:\"Wr\\xF3\\u0107 do sklepu\"})]});}return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-900 min-h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 sm:px-6 lg:px-8 py-12\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-8 text-white\",children:\"Tw\\xF3j Koszyk\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col lg:flex-row gap-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:w-2/3 bg-gray-800 rounded-lg shadow-md p-6 space-y-4 border border-gray-700\",children:cart.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 border-b border-gray-700 pb-4 last:border-b-0\",children:[/*#__PURE__*/_jsx(\"img\",{src:item.imageUrls[0],alt:item.name,className:\"w-24 h-24 object-cover rounded-md\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-grow\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-lg text-white\",children:item.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-sm\",children:item.category}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-bold text-blue-400 mt-1\",children:[(item.price*item.quantity).toFixed(2),\" z\\u0142\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center border border-gray-600 rounded-md bg-gray-700\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateCartQuantity(item.id,item.quantity-1),className:\"p-2 text-gray-400 hover:bg-gray-600\",children:/*#__PURE__*/_jsx(Minus,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"px-3 text-md font-semibold text-white\",children:item.quantity}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateCartQuantity(item.id,item.quantity+1),className:\"p-2 text-gray-400 hover:bg-gray-600\",children:/*#__PURE__*/_jsx(Plus,{className:\"h-4 w-4\"})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFromCart(item.id),className:\"text-gray-500 hover:text-red-500\",children:/*#__PURE__*/_jsx(Trash2,{className:\"h-5 w-5\"})})]},item.id))}),/*#__PURE__*/_jsx(\"div\",{className:\"lg:w-1/3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 rounded-lg shadow-md p-6 sticky top-24 border border-gray-700\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold border-b border-gray-700 pb-4 text-white\",children:\"Podsumowanie\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 mt-4 text-gray-300\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Warto\\u015B\\u0107 produkt\\xF3w\"}),/*#__PURE__*/_jsxs(\"span\",{children:[cartTotal.toFixed(2),\" z\\u0142\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Dostawa\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Darmowa\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between font-bold text-xl mt-4 pt-4 border-t border-gray-700 text-white\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Do zap\\u0142aty\"}),/*#__PURE__*/_jsxs(\"span\",{children:[cartTotal.toFixed(2),\" z\\u0142\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('checkout'),className:\"mt-6 w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-md transition-colors\",children:\"Przejd\\u017A do kasy\"})]})})]})]})});};const CheckoutPage=_ref0=>{let{navigate}=_ref0;const{cart,cartTotal,clearCart,user,addNotification}=useContext(AppContext);const[isProcessing,setIsProcessing]=useState(false);const[step,setStep]=useState(1);const[formData,setFormData]=useState({name:'',surname:'',email:(user===null||user===void 0?void 0:user.email)||'',address:'',zipCode:'',city:'',paymentMethod:'stripe'});const handleChange=e=>{setFormData(prev=>({...prev,[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();setIsProcessing(true);const orderData={userId:user.uid,customer:formData,items:cart,total:cartTotal,status:'Nowe',createdAt:new Date()};try{const docRef=await addDoc(collection(db,\"orders\"),orderData);setTimeout(()=>{const orderDetails={orderNumber:docRef.id,total:cartTotal,date:new Date().toLocaleDateString('pl-PL')};clearCart();setIsProcessing(false);navigate('orderConfirmation',orderDetails);},2000);}catch(error){addNotification('Wystąpił błąd podczas składania zamówienia.','error');setIsProcessing(false);}};if(isProcessing){return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center min-h-[60vh]\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loader ease-linear rounded-full border-8 border-t-8 border-gray-700 h-32 w-32 mb-4 border-t-blue-500 animate-spin\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-center text-white\",children:\"Przetwarzanie zam\\xF3wienia...\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400\",children:\"Prosz\\u0119 czeka\\u0107, finalizujemy Twoje zakupy.\"})]});}const ProgressBar=_ref1=>{let{currentStep}=_ref1;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:`flex-1 flex items-center ${currentStep>=1?'text-blue-400':'text-gray-500'}`,children:[/*#__PURE__*/_jsx(\"div\",{className:`w-8 h-8 rounded-full border-2 flex items-center justify-center ${currentStep>=1?'border-blue-400':'border-gray-500'}`,children:currentStep>1?/*#__PURE__*/_jsx(CheckCircle,{size:16}):'1'}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 font-semibold\",children:\"Dostawa\"})]}),/*#__PURE__*/_jsx(\"div\",{className:`flex-1 h-1 mx-4 ${currentStep>=2?'bg-blue-400':'bg-gray-700'}`}),/*#__PURE__*/_jsxs(\"div\",{className:`flex-1 flex items-center ${currentStep>=2?'text-blue-400':'text-gray-500'}`,children:[/*#__PURE__*/_jsx(\"div\",{className:`w-8 h-8 rounded-full border-2 flex items-center justify-center ${currentStep>=2?'border-blue-400':'border-gray-500'}`,children:currentStep>2?/*#__PURE__*/_jsx(CheckCircle,{size:16}):'2'}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 font-semibold\",children:\"P\\u0142atno\\u015B\\u0107\"})]}),/*#__PURE__*/_jsx(\"div\",{className:`flex-1 h-1 mx-4 ${currentStep>=3?'bg-blue-400':'bg-gray-700'}`}),/*#__PURE__*/_jsxs(\"div\",{className:`flex-1 flex items-center ${currentStep>=3?'text-blue-400':'text-gray-500'}`,children:[/*#__PURE__*/_jsx(\"div\",{className:`w-8 h-8 rounded-full border-2 flex items-center justify-center ${currentStep>=3?'border-blue-400':'border-gray-500'}`,children:\"3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 font-semibold\",children:\"Podsumowanie\"})]})]});};return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-900\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4 sm:px-6 lg:px-8 py-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto bg-gray-800 p-8 rounded-lg border border-gray-700\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-center mb-4 text-white\",children:\"Finalizacja zam\\xF3wienia\"}),/*#__PURE__*/_jsx(ProgressBar,{currentStep:step}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[step===1&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white mb-4\",children:\"1. Adres dostawy\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{name:\"name\",onChange:handleChange,value:formData.name,type:\"text\",placeholder:\"Imi\\u0119\",required:true,className:\"p-3 border rounded-md bg-gray-700 border-gray-600 text-white\"}),/*#__PURE__*/_jsx(\"input\",{name:\"surname\",onChange:handleChange,value:formData.surname,type:\"text\",placeholder:\"Nazwisko\",required:true,className:\"p-3 border rounded-md bg-gray-700 border-gray-600 text-white\"}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",onChange:handleChange,value:formData.email,type:\"email\",placeholder:\"Email\",required:true,className:\"p-3 border rounded-md sm:col-span-2 bg-gray-700 border-gray-600 text-white\"}),/*#__PURE__*/_jsx(\"input\",{name:\"address\",onChange:handleChange,value:formData.address,type:\"text\",placeholder:\"Adres\",required:true,className:\"p-3 border rounded-md sm:col-span-2 bg-gray-700 border-gray-600 text-white\"}),/*#__PURE__*/_jsx(\"input\",{name:\"zipCode\",onChange:handleChange,value:formData.zipCode,type:\"text\",placeholder:\"Kod pocztowy\",required:true,className:\"p-3 border rounded-md bg-gray-700 border-gray-600 text-white\"}),/*#__PURE__*/_jsx(\"input\",{name:\"city\",onChange:handleChange,value:formData.city,type:\"text\",placeholder:\"Miasto\",required:true,className:\"p-3 border rounded-md bg-gray-700 border-gray-600 text-white\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setStep(2),className:\"mt-6 w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-md transition-colors\",children:\"Dalej\"})]}),step===2&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white mb-4\",children:\"2. Metoda p\\u0142atno\\u015Bci\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center p-4 border rounded-md cursor-pointer transition-all border-gray-600 bg-gray-700 hover:bg-gray-600\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"paymentMethod\",value:\"stripe\",checked:formData.paymentMethod==='stripe',onChange:handleChange,className:\"h-5 w-5 text-blue-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-4 font-semibold text-white\",children:\"Karta p\\u0142atnicza\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center p-4 border rounded-md cursor-pointer transition-all border-gray-600 bg-gray-700 hover:bg-gray-600\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"paymentMethod\",value:\"blik\",checked:formData.paymentMethod==='blik',onChange:handleChange,className:\"h-5 w-5 text-blue-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-4 font-semibold text-white\",children:\"BLIK\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center p-4 border rounded-md cursor-pointer transition-all border-gray-600 bg-gray-700 hover:bg-gray-600\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"paymentMethod\",value:\"payu\",checked:formData.paymentMethod==='payu',onChange:handleChange,className:\"h-5 w-5 text-blue-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-4 font-semibold text-white\",children:\"Szybki przelew\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setStep(1),className:\"bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-md transition-colors\",children:\"Wstecz\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setStep(3),className:\"bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-6 rounded-md transition-colors\",children:\"Dalej\"})]})]}),step===3&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white mb-4\",children:\"3. Podsumowanie\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-700 p-6 rounded-lg space-y-2 text-gray-300\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Warto\\u015B\\u0107 produkt\\xF3w:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[cartTotal.toFixed(2),\" z\\u0142\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Dostawa:\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Darmowa\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between font-bold text-xl mt-2 pt-2 border-t border-gray-600 text-white\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Do zap\\u0142aty:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[cartTotal.toFixed(2),\" z\\u0142\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mt-8\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setStep(2),className:\"bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-md transition-colors\",children:\"Wstecz\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"bg-green-600 hover:bg-green-500 text-white font-bold py-3 px-6 rounded-md transition-colors flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(ShieldCheck,{}),/*#__PURE__*/_jsx(\"span\",{children:\"Zamawiam i p\\u0142ac\\u0119\"})]})]})]})]})]})})});};const OrderConfirmationPage=_ref10=>{let{navigate,orderDetails}=_ref10;return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 sm:px-6 lg:px-8 py-16 text-center\",children:[/*#__PURE__*/_jsx(ShieldCheck,{className:\"h-24 w-24 mx-auto text-green-500 animate-pulse\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mt-4 text-white\",children:\"Dzi\\u0119kujemy za zam\\xF3wienie!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 mt-2\",children:\"Twoje zam\\xF3wienie zosta\\u0142o przyj\\u0119te do realizacji. Potwierdzenie wys\\u0142ali\\u015Bmy na Tw\\xF3j adres e-mail.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 inline-block p-6 rounded-lg mt-6 text-left border border-gray-700\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-300\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-white\",children:\"Numer zam\\xF3wienia:\"}),\" \",orderDetails.orderNumber]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-300\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-white\",children:\"Data:\"}),\" \",orderDetails.date]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-300\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-white\",children:\"Kwota:\"}),\" \",orderDetails.total.toFixed(2),\" z\\u0142\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-8\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('home'),className:\"bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-8 rounded-md transition-colors\",children:\"Kontynuuj zakupy\"})})]});};const AccessDenied=_ref11=>{let{navigate}=_ref11;return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 sm:px-6 lg:px-8 py-16 text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mt-4 text-white\",children:\"Brak dost\\u0119pu\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 mt-2\",children:\"Nie masz uprawnie\\u0144, aby wy\\u015Bwietli\\u0107 t\\u0119 stron\\u0119.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('home'),className:\"mt-6 bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-8 rounded-md transition-colors\",children:\"Wr\\xF3\\u0107 na stron\\u0119 g\\u0142\\xF3wn\\u0105\"})]});};// --- KOMPONENTY LOGOWANIA I REJESTRACJI ---\nconst LoginPage=_ref12=>{let{navigate,addNotification}=_ref12;const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const[isLoading,setIsLoading]=useState(false);const handleLogin=async e=>{e.preventDefault();setError('');setIsLoading(true);try{await signInWithEmailAndPassword(auth,email,password);addNotification('Zalogowano pomyślnie!');navigate('home');}catch(err){setError('Nieprawidłowy email lub hasło.');addNotification('Błąd logowania.','error');}finally{setIsLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-[70vh]\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 bg-gray-800 border border-gray-700 shadow-xl rounded-lg w-full max-w-md\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-center mb-6 text-white\",children:\"Logowanie\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:e=>setEmail(e.target.value),placeholder:\"Email\",required:true,className:\"w-full p-3 border rounded-md bg-gray-700 border-gray-600 text-white\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),placeholder:\"Has\\u0142o\",required:true,className:\"w-full p-3 border rounded-md bg-gray-700 border-gray-600 text-white\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm\",children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading,className:\"w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-md disabled:bg-gray-500\",children:isLoading?'Logowanie...':'Zaloguj się'})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center text-gray-400 mt-4\",children:[\"Nie masz konta? \",/*#__PURE__*/_jsx(\"a\",{onClick:()=>navigate('register'),className:\"text-blue-400 hover:underline cursor-pointer\",children:\"Zarejestruj si\\u0119\"})]})]})});};const RegisterPage=_ref13=>{let{navigate,addNotification}=_ref13;const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const[isLoading,setIsLoading]=useState(false);const handleRegister=async e=>{e.preventDefault();setError('');setIsLoading(true);try{await createUserWithEmailAndPassword(auth,email,password);addNotification('Rejestracja pomyślna! Możesz się teraz zalogować.');navigate('login');}catch(err){if(err.code==='auth/email-already-in-use'){setError('Ten adres email jest już zajęty.');}else if(err.code==='auth/weak-password'){setError('Hasło musi mieć co najmniej 6 znaków.');}else{setError('Błąd rejestracji. Spróbuj ponownie.');}addNotification('Błąd rejestracji.','error');}finally{setIsLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-[70vh]\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 bg-gray-800 border border-gray-700 shadow-xl rounded-lg w-full max-w-md\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-center mb-6 text-white\",children:\"Rejestracja\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleRegister,className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:e=>setEmail(e.target.value),placeholder:\"Email\",required:true,className:\"w-full p-3 border rounded-md bg-gray-700 border-gray-600 text-white\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),placeholder:\"Has\\u0142o (min. 6 znak\\xF3w)\",required:true,className:\"w-full p-3 border rounded-md bg-gray-700 border-gray-600 text-white\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm\",children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading,className:\"w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-md disabled:bg-gray-500\",children:isLoading?'Rejestrowanie...':'Zarejestruj się'})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center text-gray-400 mt-4\",children:[\"Masz ju\\u017C konto? \",/*#__PURE__*/_jsx(\"a\",{onClick:()=>navigate('login'),className:\"text-blue-400 hover:underline cursor-pointer\",children:\"Zaloguj si\\u0119\"})]})]})});};// --- PANEL ADMINISTRACYJNY ---\nconst AdminPanel=_ref14=>{let{navigate}=_ref14;const[adminPage,setAdminPage]=useState('dashboard');return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-900 min-h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-8 text-white\",children:\"Panel Administratora\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row gap-8\",children:[/*#__PURE__*/_jsx(\"aside\",{className:\"md:w-1/4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-800 p-4 rounded-lg shadow-md border border-gray-700\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"a\",{onClick:()=>setAdminPage('dashboard'),className:`flex items-center p-3 rounded-md cursor-pointer ${adminPage==='dashboard'?'bg-blue-600/20 text-blue-400':'hover:bg-gray-700'}`,children:[/*#__PURE__*/_jsx(BarChart,{className:\"mr-3\"}),\"Dashboard\"]}),/*#__PURE__*/_jsxs(\"a\",{onClick:()=>setAdminPage('products'),className:`flex items-center p-3 rounded-md cursor-pointer ${adminPage==='products'?'bg-blue-600/20 text-blue-400':'hover:bg-gray-700'}`,children:[/*#__PURE__*/_jsx(ShoppingCart,{className:\"mr-3\"}),\"Produkty\"]}),/*#__PURE__*/_jsxs(\"a\",{onClick:()=>setAdminPage('orders'),className:`flex items-center p-3 rounded-md cursor-pointer ${adminPage==='orders'?'bg-blue-600/20 text-blue-400':'hover:bg-gray-700'}`,children:[/*#__PURE__*/_jsx(Truck,{className:\"mr-3\"}),\"Zam\\xF3wienia\"]})]})})}),/*#__PURE__*/_jsx(\"main\",{className:\"md:w-3/4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 p-8 rounded-lg shadow-md border border-gray-700\",children:[adminPage==='dashboard'&&/*#__PURE__*/_jsx(AdminDashboard,{}),adminPage==='products'&&/*#__PURE__*/_jsx(AdminProducts,{}),adminPage==='orders'&&/*#__PURE__*/_jsx(AdminOrders,{})]})})]})]})});};const AdminDashboard=()=>{const[stats,setStats]=useState({orders:0,revenue:0,products:0});const{products}=useContext(AppContext);useEffect(()=>{const fetchOrders=async()=>{const ordersData=await api.fetchOrders();const totalRevenue=ordersData.reduce((sum,order)=>sum+order.total,0);setStats({orders:ordersData.length,revenue:totalRevenue,products:products.length});};fetchOrders();},[products]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white mb-6\",children:\"Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-700 p-6 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-gray-400 text-sm\",children:\"Ca\\u0142kowita liczba zam\\xF3wie\\u0144\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-white\",children:stats.orders})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-700 p-6 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-gray-400 text-sm\",children:\"Ca\\u0142kowity przych\\xF3d\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-white\",children:[stats.revenue.toFixed(2),\" z\\u0142\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-700 p-6 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-gray-400 text-sm\",children:\"Liczba produkt\\xF3w\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-white\",children:stats.products})]})]})]});};const AdminProducts=()=>{const[products,setProducts]=useState([]);const[isLoading,setIsLoading]=useState(true);const[isModalOpen,setIsModalOpen]=useState(false);const[editingProduct,setEditingProduct]=useState(null);const{addNotification}=useContext(AppContext);useEffect(()=>{const fetch=async()=>{setIsLoading(true);setProducts(await api.fetchProducts());setIsLoading(false);};fetch();},[]);const handleSave=async productData=>{setIsLoading(true);try{if(editingProduct){await api.updateProduct(editingProduct.id,productData);setProducts(products.map(p=>p.id===editingProduct.id?{...productData,id:editingProduct.id}:p));addNotification('Produkt zaktualizowany.');}else{const newDocRef=await api.addProduct(productData);setProducts([...products,{...productData,id:newDocRef.id}]);addNotification('Produkt dodany.');}setIsModalOpen(false);}catch(e){addNotification('Błąd zapisu produktu.','error');}finally{setIsLoading(false);}};const handleDelete=async id=>{if(window.confirm('Czy na pewno chcesz usunąć ten produkt?')){setIsLoading(true);try{await api.deleteProduct(id);setProducts(products.filter(p=>p.id!==id));addNotification('Produkt usunięty.');}catch(e){addNotification('Błąd podczas usuwania produktu.','error');}finally{setIsLoading(false);}}};if(isLoading)return/*#__PURE__*/_jsx(\"p\",{children:\"\\u0141adowanie produkt\\xF3w...\"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white\",children:\"Produkty\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditingProduct(null);setIsModalOpen(true);},className:\"bg-blue-600 text-white font-bold py-2 px-4 rounded-md hover:bg-blue-500\",children:\"Dodaj produkt\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto bg-gray-800 rounded-lg\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-left text-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-700 text-sm text-gray-400 uppercase\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"Nazwa\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"Kategoria\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"Cena\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"Akcje\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.map(p=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-700 hover:bg-gray-700/50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"p-3 font-medium text-white\",children:p.name}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:p.category}),/*#__PURE__*/_jsxs(\"td\",{className:\"p-3\",children:[p.price.toFixed(2),\" z\\u0142\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"p-3 space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditingProduct(p);setIsModalOpen(true);},className:\"text-blue-400 hover:underline\",children:\"Edytuj\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(p.id),className:\"text-red-400 hover:underline\",children:\"Usu\\u0144\"})]})]},p.id))})]})}),isModalOpen&&/*#__PURE__*/_jsx(ProductEditModal,{product:editingProduct,onSave:handleSave,onClose:()=>setIsModalOpen(false)})]});};const ProductEditModal=_ref15=>{let{product,onSave,onClose}=_ref15;const[formData,setFormData]=useState(product||{name:'',price:0,category:'Ładowarki',brand:'',description:'',imageUrls:[],bestseller:false,rating:0});const[isUploading,setIsUploading]=useState(false);const{addNotification,categories}=useContext(AppContext);const handleChange=e=>{const{name,value,type,checked}=e.target;setFormData(prev=>({...prev,[name]:type==='checkbox'?checked:value}));};const handlePriceChange=e=>{setFormData(prev=>({...prev,price:parseFloat(e.target.value)||0}));};const handleImageUpload=async e=>{const file=e.target.files[0];if(!file)return;setIsUploading(true);try{const url=await api.uploadImage(file);setFormData(prev=>({...prev,imageUrls:[...prev.imageUrls,url]}));addNotification('Zdjęcie dodane.');}catch(error){addNotification('Błąd uploadu zdjęcia.','error');}finally{setIsUploading(false);}};const handleSubmit=e=>{e.preventDefault();onSave(formData);};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 p-8 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto border border-gray-700\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-6 text-white\",children:product?'Edytuj produkt':'Dodaj produkt'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{name:\"name\",value:formData.name,onChange:handleChange,placeholder:\"Nazwa produktu\",className:\"w-full p-2 border rounded bg-gray-700 border-gray-600 text-white\",required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"price\",type:\"number\",step:\"0.01\",value:formData.price,onChange:handlePriceChange,placeholder:\"Cena\",className:\"w-full p-2 border rounded bg-gray-700 border-gray-600 text-white\",required:true}),/*#__PURE__*/_jsx(\"select\",{name:\"category\",value:formData.category,onChange:handleChange,className:\"w-full p-2 border rounded bg-gray-700 border-gray-600 text-white\",children:categories.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c.name,children:c.name},c.name))}),/*#__PURE__*/_jsx(\"input\",{name:\"brand\",value:formData.brand,onChange:handleChange,placeholder:\"Marka\",className:\"w-full p-2 border rounded bg-gray-700 border-gray-600 text-white\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:formData.description,onChange:handleChange,placeholder:\"Opis\",className:\"w-full p-2 border rounded h-32 bg-gray-700 border-gray-600 text-white\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"bestseller\",name:\"bestseller\",checked:formData.bestseller,onChange:handleChange,className:\"h-4 w-4 text-blue-600 bg-gray-700 border-gray-600 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"bestseller\",className:\"ml-2 text-white\",children:\"Bestseller\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-400 mb-2\",children:\"Zdj\\u0119cia\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-4 gap-2 mb-2\",children:formData.imageUrls.map(url=>/*#__PURE__*/_jsx(\"img\",{src:url,className:\"w-full h-16 object-cover rounded\"},url))}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleImageUpload,className:\"text-white\"}),isUploading&&/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-400\",children:\"Przesy\\u0142anie...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4 mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"bg-gray-600 text-white font-bold py-2 px-4 rounded hover:bg-gray-500\",children:\"Anuluj\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-blue-600 text-white font-bold py-2 px-4 rounded hover:bg-blue-500\",children:\"Zapisz\"})]})]})]})});};const AdminOrders=()=>{const[orders,setOrders]=useState([]);const[isLoading,setIsLoading]=useState(true);useEffect(()=>{const fetch=async()=>{setIsLoading(true);setOrders(await api.fetchOrders());setIsLoading(false);};fetch();},[]);const handleStatusChange=async(orderId,newStatus)=>{try{await api.updateOrderStatus(orderId,newStatus);setOrders(orders.map(o=>o.id===orderId?{...o,status:newStatus}:o));}catch(e){console.error(\"Error updating status: \",e);}};if(isLoading)return/*#__PURE__*/_jsx(\"p\",{children:\"\\u0141adowanie zam\\xF3wie\\u0144...\"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white mb-6\",children:\"Zam\\xF3wienia\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto bg-gray-800 rounded-lg\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-left text-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-700 text-sm text-gray-400 uppercase\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"Klient\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"Data\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"Suma\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3\",children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(order=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-700 hover:bg-gray-700/50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"p-3 font-medium text-white truncate max-w-xs\",children:order.id}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:order.customer.email}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:new Date(order.createdAt.seconds*1000).toLocaleDateString()}),/*#__PURE__*/_jsxs(\"td\",{className:\"p-3\",children:[order.total.toFixed(2),\" z\\u0142\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:/*#__PURE__*/_jsxs(\"select\",{value:order.status,onChange:e=>handleStatusChange(order.id,e.target.value),className:\"p-1 border rounded-md bg-gray-700 border-gray-600 text-white\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"Nowe\"}),/*#__PURE__*/_jsx(\"option\",{children:\"W trakcie realizacji\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Wys\\u0142ane\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Zako\\u0144czone\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Anulowane\"})]})})]},order.id))})]})})]});};// --- GŁÓWNY KOMPONENT APLIKACJI ---\nexport default function App(){const[page,setPage]=useState('home');const[pageData,setPageData]=useState(null);const[cart,setCart]=useState(()=>JSON.parse(localStorage.getItem('cart'))||[]);const[products,setProducts]=useState([]);const[categories,setCategories]=useState([]);const[user,setUser]=useState(null);const[userRole,setUserRole]=useState(null);const[isMobileMenuOpen,setIsMobileMenuOpen]=useState(false);const[isLoading,setIsLoading]=useState(true);const[notifications,setNotifications]=useState([]);const[permissionError,setPermissionError]=useState(null);useEffect(()=>{const loadInitialData=async()=>{setIsLoading(true);try{const[productsData,categoriesData]=await Promise.all([api.fetchProducts(),api.fetchCategories()]);setProducts(productsData);setCategories(categoriesData);setPermissionError(null);}catch(error){if(error.code==='permission-denied'){setPermissionError(\"Nie można pobrać danych z Firebase z powodu niewystarczających uprawnień. Upewnij się, że poprawnie skonfigurowałeś reguły bezpieczeństwa w swojej bazie danych Firestore.\");}else{setPermissionError(\"Wystąpił nieoczekiwany błąd podczas ładowania danych.\");}console.error(\"Błąd ładowania danych:\",error);}finally{setIsLoading(false);}};const unsubscribeAuth=onAuthStateChanged(auth,async currentUser=>{if(currentUser){const tokenResult=await currentUser.getIdTokenResult();setUser(currentUser);setUserRole(tokenResult.claims.role||'user');}else{setUser(null);setUserRole(null);}await loadInitialData();});return()=>unsubscribeAuth();},[]);useEffect(()=>{localStorage.setItem('cart',JSON.stringify(cart));},[cart]);const addNotification=function(message){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'success';const id=Date.now();setNotifications(prev=>[...prev,{id,message,type}]);setTimeout(()=>{setNotifications(prev=>prev.filter(n=>n.id!==id));},3000);};const navigate=function(newPage){let data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;window.scrollTo(0,0);setPage(newPage);setPageData(data);setIsMobileMenuOpen(false);};const addToCart=function(product){let quantity=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;setCart(prevCart=>{const existingProduct=prevCart.find(item=>item.id===product.id);if(existingProduct){return prevCart.map(item=>item.id===product.id?{...item,quantity:item.quantity+quantity}:item);}return[...prevCart,{...product,quantity}];});addNotification(`Dodano do koszyka: ${product.name}`);};const updateCartQuantity=(productId,newQuantity)=>{if(newQuantity<=0){removeFromCart(productId);}else{setCart(prevCart=>prevCart.map(item=>item.id===productId?{...item,quantity:newQuantity}:item));}};const removeFromCart=productId=>{setCart(prevCart=>prevCart.filter(item=>item.id!==productId));};const clearCart=()=>setCart([]);const cartTotal=cart.reduce((total,item)=>total+item.price*item.quantity,0);const cartItemCount=cart.reduce((count,item)=>count+item.quantity,0);const handleLogout=async()=>{await signOut(auth);navigate('home');};const renderPage=()=>{if(isLoading)return/*#__PURE__*/_jsx(LoadingScreen,{});// The permissionError check is now handled at a higher level.\nswitch(page){case'home':return/*#__PURE__*/_jsx(HomePage,{navigate:navigate,products:products,categories:categories});case'category':return/*#__PURE__*/_jsx(CategoryPage,{navigate:navigate,products:products,categoryName:pageData});case'product':return/*#__PURE__*/_jsx(ProductPage,{navigate:navigate,productId:pageData});case'cart':return/*#__PURE__*/_jsx(CartPage,{navigate:navigate});case'checkout':return user?/*#__PURE__*/_jsx(CheckoutPage,{navigate:navigate}):/*#__PURE__*/_jsx(LoginPage,{navigate:navigate,addNotification:addNotification});case'orderConfirmation':return/*#__PURE__*/_jsx(OrderConfirmationPage,{navigate:navigate,orderDetails:pageData});case'admin':return userRole==='admin'?/*#__PURE__*/_jsx(AdminPanel,{navigate:navigate}):/*#__PURE__*/_jsx(AccessDenied,{navigate:navigate});case'login':return/*#__PURE__*/_jsx(LoginPage,{navigate:navigate,addNotification:addNotification});case'register':return/*#__PURE__*/_jsx(RegisterPage,{navigate:navigate,addNotification:addNotification});default:return/*#__PURE__*/_jsx(HomePage,{navigate:navigate,products:products,categories:categories});}};return/*#__PURE__*/_jsx(AppContext.Provider,{value:{cart,addToCart,updateCartQuantity,removeFromCart,clearCart,cartTotal,cartItemCount,user,userRole,handleLogout,navigate,products,categories,addNotification},children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-900 text-gray-200 font-sans antialiased\",children:[permissionError&&/*#__PURE__*/_jsx(PermissionErrorDisplay,{message:permissionError}),/*#__PURE__*/_jsx(NotificationCenter,{notifications:notifications}),!permissionError&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{isMobileMenuOpen:isMobileMenuOpen,setIsMobileMenuOpen:setIsMobileMenuOpen}),/*#__PURE__*/_jsx(\"main\",{className:\"pt-20 min-h-screen\",children:renderPage()}),/*#__PURE__*/_jsx(Footer,{})]})]})});}","map":{"version":3,"names":["React","useState","useEffect","createContext","useContext","useRef","initializeApp","getAuth","onAuthStateChanged","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","getFirestore","collection","getDocs","doc","getDoc","addDoc","updateDoc","deleteDoc","query","where","onSnapshot","getStorage","ref","uploadBytes","getDownloadURL","ShoppingCart","User","Star","Menu","X","Trash2","Plus","Minus","Truck","CreditCard","ShieldCheck","Search","Filter","LogOut","Settings","ArrowRight","Eye","Zap","ImagePlus","AlertCircle","CheckCircle","BarChart","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","auth","db","storage","sampleTeslaProducts","id","name","price","category","brand","rating","bestseller","description","imageUrls","api","fetchProducts","productsCol","snapshot","firebaseProducts","docs","map","data","length","allProducts","uniqueProducts","filter","product","index","self","findIndex","p","error","console","fetchCategories","products","categoryNames","Set","defaultImage","_products$find","_products$find$imageU","image","find","fetchProduct","docRef","docSnap","exists","getReviews","productId","callback","reviewsQuery","reviews","addReview","review","uploadImage","file","storageRef","Date","now","addProduct","updateProduct","deleteProduct","fetchOrders","ordersCol","updateOrderStatus","status","AppContext","PermissionErrorDisplay","_ref","message","className","children","NotificationCenter","_ref2","notifications","n","type","LoadingScreen","Header","_ref3","isMobileMenuOpen","setIsMobileMenuOpen","navigate","cartItemCount","user","userRole","handleLogout","categories","navLinks","onClick","slice","cat","email","Footer","href","getFullYear","ProductCard","_ref4","addToCart","src","alt","e","stopPropagation","toFixed","fill","HomePage","_ref5","bestsellers","autoPlay","loop","muted","playsInline","CategoryPage","_ref6","categoryName","filteredProducts","setFilteredProducts","sort","setSort","filters","setFilters","tempProducts","min","max","split","Number","a","b","localeCompare","uniqueBrands","priceRanges","label","value","htmlFor","onChange","target","checked","range","ReviewsSection","_ref7","addNotification","newReviewText","setNewReviewText","newRating","setNewRating","handleReviewSubmit","preventDefault","trim","author","text","createdAt","Array","_","i","size","onSubmit","placeholder","ProductPage","_ref8","setProduct","setReviews","isLoading","setIsLoading","mainImage","setMainImage","quantity","setQuantity","fetchData","productData","unsubscribe","relatedProducts","url","Math","round","q","CartPage","_ref9","cart","updateCartQuantity","removeFromCart","cartTotal","item","CheckoutPage","_ref0","clearCart","isProcessing","setIsProcessing","step","setStep","formData","setFormData","surname","address","zipCode","city","paymentMethod","handleChange","prev","handleSubmit","orderData","userId","uid","customer","items","total","setTimeout","orderDetails","orderNumber","date","toLocaleDateString","ProgressBar","_ref1","currentStep","required","OrderConfirmationPage","_ref10","AccessDenied","_ref11","LoginPage","_ref12","setEmail","password","setPassword","setError","handleLogin","err","disabled","RegisterPage","_ref13","handleRegister","code","AdminPanel","_ref14","adminPage","setAdminPage","AdminDashboard","AdminProducts","AdminOrders","stats","setStats","orders","revenue","ordersData","totalRevenue","reduce","sum","order","setProducts","isModalOpen","setIsModalOpen","editingProduct","setEditingProduct","fetch","handleSave","newDocRef","handleDelete","window","confirm","ProductEditModal","onSave","onClose","_ref15","isUploading","setIsUploading","handlePriceChange","parseFloat","handleImageUpload","files","c","setOrders","handleStatusChange","orderId","newStatus","o","seconds","App","page","setPage","pageData","setPageData","setCart","JSON","parse","localStorage","getItem","setCategories","setUser","setUserRole","setNotifications","permissionError","setPermissionError","loadInitialData","productsData","categoriesData","Promise","all","unsubscribeAuth","currentUser","tokenResult","getIdTokenResult","claims","role","setItem","stringify","arguments","undefined","newPage","scrollTo","prevCart","existingProduct","newQuantity","count","renderPage","Provider"],"sources":["/workspace/src/App.js"],"sourcesContent":["import React, { useState, useEffect, createContext, useContext, useRef } from 'react';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, onAuthStateChanged, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from 'firebase/auth';\nimport { getFirestore, collection, getDocs, doc, getDoc, addDoc, updateDoc, deleteDoc, query, where, onSnapshot } from 'firebase/firestore';\nimport { getStorage, ref, uploadBytes, getDownloadURL } from 'firebase/storage';\nimport { ShoppingCart, User, Star, Menu, X, Trash2, Plus, Minus, Truck, CreditCard, ShieldCheck, Search, Filter, LogOut, Settings, ArrowRight, Eye, Zap, ImagePlus, AlertCircle, CheckCircle, BarChart } from 'lucide-react';\n\n// --- KONFIGURACJA FIREBASE (ZAKTUALIZOWANA) ---\nconst firebaseConfig = {\n  apiKey: \"AIzaSyC6L-8owWH1z6Ipf2FZax7gZ7FQOvuSNJs\",\n  authDomain: \"evshop-6719a.firebaseapp.com\",\n  projectId: \"evshop-6719a\",\n  storageBucket: \"evshop-6719a.appspot.com\", // Poprawiona domena dla Storage\n  messagingSenderId: \"619247072748\",\n  appId: \"1:619247072748:web:ad274f442dba53736cbcc9\",\n  measurementId: \"G-Z80X8YRR4L\"\n};\n\n\n// Inicjalizacja Firebase\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst db = getFirestore(app);\nconst storage = getStorage(app);\n\n// --- SAMPLE TESLA PRODUCTS ---\nconst sampleTeslaProducts = [\n  {\n    id: 'tesla-wall-connector',\n    name: 'Tesla Wall Connector Gen 3',\n    price: 2499,\n    category: 'Ładowarki',\n    brand: 'Tesla',\n    rating: 4.9,\n    bestseller: true,\n    description: 'Najszybsza ładowarka domowa Tesla z mocą do 11.5 kW. Idealna do codziennego użytku domowego.',\n    imageUrls: [\n      'https://images.unsplash.com/photo-1593941707882-a5bac6861d75?q=80&w=800&auto=format&fit=crop',\n      'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?q=80&w=800&auto=format&fit=crop'\n    ]\n  },\n  {\n    id: 'tesla-mobile-connector',\n    name: 'Tesla Mobile Connector',\n    price: 899,\n    category: 'Ładowarki',\n    brand: 'Tesla',\n    rating: 4.8,\n    bestseller: true,\n    description: 'Przenośna ładowarka Tesla z adapterami do różnych gniazdek. Niezbędna w każdej podróży.',\n    imageUrls: [\n      'https://images.unsplash.com/photo-1609592606436-c0e3d0c4b3b9?q=80&w=800&auto=format&fit=crop',\n      'https://images.unsplash.com/photo-1621784377641-2c1a2c7a4b91?q=80&w=800&auto=format&fit=crop'\n    ]\n  },\n  {\n    id: 'tesla-chademo-adapter',\n    name: 'Tesla CHAdeMO Adapter',\n    price: 1299,\n    category: 'Adaptery',\n    brand: 'Tesla',\n    rating: 4.7,\n    description: 'Adapter CHAdeMO umożliwiający ładowanie Tesla na stacjach CHAdeMO o mocy do 50 kW.',\n    imageUrls: [\n      'https://images.unsplash.com/photo-1626668011687-8a114d5c1604?q=80&w=800&auto=format&fit=crop'\n    ]\n  },\n  {\n    id: 'tesla-j1772-adapter',\n    name: 'Tesla J1772 Adapter',\n    price: 399,\n    category: 'Adaptery',\n    brand: 'Tesla',\n    rating: 4.6,\n    description: 'Adapter J1772 pozwalający na ładowanie Tesla na publicznych stacjach J1772.',\n    imageUrls: [\n      'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?q=80&w=800&auto=format&fit=crop'\n    ]\n  },\n  {\n    id: 'tesla-supercharger-cable',\n    name: 'Tesla Supercharger Cable (zapasowy)',\n    price: 699,\n    category: 'Akcesoria',\n    brand: 'Tesla',\n    rating: 4.8,\n    description: 'Zapasowy kabel do ładowarki Tesla Supercharger. Wytrzymały i niezawodny.',\n    imageUrls: [\n      'https://images.unsplash.com/photo-1609592606436-c0e3d0c4b3b9?q=80&w=800&auto=format&fit=crop'\n    ]\n  },\n  {\n    id: 'tesla-powerwall',\n    name: 'Tesla Powerwall 2',\n    price: 28999,\n    category: 'Baterie',\n    brand: 'Tesla',\n    rating: 4.9,\n    bestseller: true,\n    description: 'Domowa bateria Tesla Powerwall 2 o pojemności 13,5 kWh. Zapewnia niezależność energetyczną.',\n    imageUrls: [\n      'https://images.unsplash.com/photo-1497435334941-8c899ee9e8e9?q=80&w=800&auto=format&fit=crop'\n    ]\n  },\n  {\n    id: 'tesla-model-s-floor-mats',\n    name: 'Tesla Model S - Dywaniki podłogowe',\n    price: 459,\n    category: 'Akcesoria',\n    brand: 'Tesla',\n    rating: 4.5,\n    description: 'Oryginalne dywaniki podłogowe Tesla Model S. Idealne dopasowanie i wysoka jakość.',\n    imageUrls: [\n      'https://images.unsplash.com/photo-1549924231-f129b911e442?q=80&w=800&auto=format&fit=crop'\n    ]\n  },\n  {\n    id: 'tesla-model-3-trunk-mat',\n    name: 'Tesla Model 3 - Mata bagażnika',\n    price: 299,\n    category: 'Akcesoria',\n    brand: 'Tesla',\n    rating: 4.4,\n    description: 'Wodoodporna mata bagażnika dla Tesla Model 3. Chroni przed zabrudzeniem i wilgocią.',\n    imageUrls: [\n      'https://images.unsplash.com/photo-1549924231-f129b911e442?q=80&w=800&auto=format&fit=crop'\n    ]\n  },\n  {\n    id: 'tesla-wireless-charger',\n    name: 'Tesla Wireless Phone Charger',\n    price: 329,\n    category: 'Akcesoria',\n    brand: 'Tesla',\n    rating: 4.3,\n    description: 'Bezprzewodowa ładowarka do telefonu Tesla. Kompatybilna z Model S, 3, X i Y.',\n    imageUrls: [\n      'https://images.unsplash.com/photo-1594736797933-d0401ba4b7c0?q=80&w=800&auto=format&fit=crop'\n    ]\n  },\n  {\n    id: 'tesla-gen2-mobile-connector',\n    name: 'Tesla Gen 2 Mobile Connector Bundle',\n    price: 1299,\n    category: 'Ładowarki',\n    brand: 'Tesla',\n    rating: 4.8,\n    description: 'Kompletny zestaw Gen 2 Mobile Connector z adapterami NEMA 14-50, 5-15 i J1772.',\n    imageUrls: [\n      'https://images.unsplash.com/photo-1609592606436-c0e3d0c4b3b9?q=80&w=800&auto=format&fit=crop'\n    ]\n  }\n];\n\n// --- API SERWIS (LIVE) ---\n// Funkcje do interakcji z Firebase\nconst api = {\n  fetchProducts: async () => {\n    try {\n      const productsCol = collection(db, 'products');\n      const snapshot = await getDocs(productsCol);\n      const firebaseProducts = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n      \n      // Jeśli baza danych jest pusta, zwróć sample produkty Tesla\n      if (firebaseProducts.length === 0) {\n        return sampleTeslaProducts;\n      }\n      \n      // Połącz produkty z Firebase z sample produktami Tesla\n      const allProducts = [...firebaseProducts, ...sampleTeslaProducts];\n      // Usuń duplikaty na podstawie ID\n      const uniqueProducts = allProducts.filter((product, index, self) => \n        index === self.findIndex(p => p.id === product.id)\n      );\n      \n      return uniqueProducts;\n    } catch (error) {\n      console.error('Błąd podczas pobierania produktów:', error);\n      // W przypadku błędu, zwróć sample produkty Tesla\n      return sampleTeslaProducts;\n    }\n  },\n  fetchCategories: async () => {\n    const products = await api.fetchProducts();\n    const categoryNames = [...new Set(products.map(p => p.category))];\n    // Użyj prawdziwych zdjęć dla kategorii, jeśli są dostępne, w przeciwnym razie placeholder\n    const defaultImage = \"https://images.unsplash.com/photo-1633886122439-d852891157c3?q=80&w=800&auto=format&fit=crop\";\n    return categoryNames.map(name => ({\n        name,\n        image: products.find(p => p.category === name)?.imageUrls?.[0] || defaultImage\n    }));\n  },\n  fetchProduct: async (id) => {\n    const docRef = doc(db, 'products', id);\n    const docSnap = await getDoc(docRef);\n    return docSnap.exists() ? { id: docSnap.id, ...docSnap.data() } : null;\n  },\n  getReviews: (productId, callback) => {\n    const reviewsQuery = query(collection(db, `products/${productId}/reviews`));\n    return onSnapshot(reviewsQuery, (snapshot) => {\n      const reviews = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n      callback(reviews);\n    });\n  },\n  addReview: async (productId, review) => {\n    await addDoc(collection(db, `products/${productId}/reviews`), review);\n  },\n  uploadImage: async (file) => {\n    const storageRef = ref(storage, `products/${Date.now()}_${file.name}`);\n    await uploadBytes(storageRef, file);\n    return await getDownloadURL(storageRef);\n  },\n  // Funkcje dla admina\n  addProduct: async (product) => addDoc(collection(db, 'products'), product),\n  updateProduct: async (id, product) => updateDoc(doc(db, 'products', id), product),\n  deleteProduct: async (id) => deleteDoc(doc(db, 'products', id)),\n  fetchOrders: async () => {\n    const ordersCol = collection(db, 'orders');\n    const snapshot = await getDocs(ordersCol);\n    return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n  },\n  updateOrderStatus: async (id, status) => updateDoc(doc(db, 'orders', id), { status }),\n};\n\n// --- CONTEXT API ---\nconst AppContext = createContext();\n\n// --- KOMPONENTY UI ---\n\nconst PermissionErrorDisplay = ({ message }) => (\n    <div className=\"fixed inset-0 bg-gray-900/95 flex items-center justify-center z-[100] p-8 text-center\">\n        <div className=\"bg-red-900/50 border border-red-700 rounded-lg p-8 max-w-2xl\">\n            <AlertCircle className=\"h-16 w-16 mx-auto text-red-400 mb-4\" />\n            <h2 className=\"text-2xl font-bold text-white mb-2\">Błąd Konfiguracji Firebase</h2>\n            <p className=\"text-red-200\">{message}</p>\n            <p className=\"text-gray-400 mt-4 text-sm\">\n                Wygląda na to, że Twoja baza danych Firestore ma nieprawidłowe reguły bezpieczeństwa. Przejdź do panelu Firebase, wybierz bazę Firestore, przejdź do zakładki \"Reguły\" (Rules) i wklej reguły podane w dokumentacji projektu.\n            </p>\n        </div>\n    </div>\n);\n\nconst NotificationCenter = ({ notifications }) => (\n    <div className=\"fixed top-24 right-4 z-[100] space-y-2\">\n        {notifications.map(n => (\n            <div key={n.id} className={`flex items-center p-4 rounded-lg shadow-lg animate-fade-in-right ${n.type === 'success' ? 'bg-green-600' : 'bg-red-600'} text-white`}>\n                {n.type === 'success' ? <CheckCircle className=\"mr-2\" /> : <AlertCircle className=\"mr-2\" />}\n                {n.message}\n            </div>\n        ))}\n    </div>\n);\n\nconst LoadingScreen = () => (\n    <div className=\"fixed inset-0 bg-gray-900 flex flex-col items-center justify-center z-[100]\">\n        <div className=\"flex items-center space-x-3\">\n            <Zap className=\"h-12 w-12 text-blue-500 animate-pulse\" />\n            <span className=\"text-3xl font-bold text-white\">EV Akcesoria</span>\n        </div>\n        <p className=\"text-gray-400 mt-4\">Ładowanie przyszłości...</p>\n    </div>\n);\n\nconst Header = ({ isMobileMenuOpen, setIsMobileMenuOpen }) => {\n    const { navigate, cartItemCount, user, userRole, handleLogout, categories } = useContext(AppContext);\n    const navLinks = (\n        <>\n            <a onClick={() => navigate('home')} className=\"cursor-pointer hover:text-blue-400 transition-colors\">Strona główna</a>\n            <a onClick={() => navigate('category', 'Wszystkie')} className=\"cursor-pointer hover:text-blue-400 transition-colors\">Produkty</a>\n            {categories.slice(0, 3).map(cat => (\n                 <a key={cat.name} onClick={() => navigate('category', cat.name)} className=\"cursor-pointer hover:text-blue-400 transition-colors\">{cat.name}</a>\n            ))}\n        </>\n    );\n\n    return (\n        <header className=\"bg-gray-900/70 backdrop-blur-lg border-b border-gray-700/50 fixed top-0 left-0 right-0 z-50\">\n            <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\n                <div className=\"flex items-center justify-between h-20\">\n                    <div className=\"flex-shrink-0\">\n                        <a onClick={() => navigate('home')} className=\"flex items-center space-x-2 cursor-pointer\">\n                            <Zap className=\"h-8 w-8 text-blue-500\" />\n                            <span className=\"text-2xl font-bold text-white\">EV Akcesoria</span>\n                        </a>\n                    </div>\n                    <nav className=\"hidden md:flex md:space-x-8 items-center text-lg font-medium text-gray-300\">\n                        {navLinks}\n                    </nav>\n                    <div className=\"flex items-center space-x-4\">\n                        <a onClick={() => navigate('cart')} className=\"relative cursor-pointer group\">\n                            <ShoppingCart className=\"h-7 w-7 text-gray-400 group-hover:text-blue-400 transition-colors\" />\n                            {cartItemCount > 0 && (\n                                <span className=\"absolute -top-2 -right-2 bg-blue-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center animate-pulse\">{cartItemCount}</span>\n                            )}\n                        </a>\n                        <div className=\"relative group\">\n                             <a onClick={() => user ? null : navigate('login')} className=\"cursor-pointer\">\n                                <User className=\"h-7 w-7 text-gray-400 group-hover:text-blue-400 transition-colors\" />\n                            </a>\n                            {user ? (\n                                <div className=\"absolute right-0 mt-2 w-56 bg-gray-800 border border-gray-700 rounded-md shadow-lg py-1 z-20 opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\n                                    <p className=\"px-4 py-2 text-sm text-gray-400 border-b border-gray-700\">Zalogowano jako:</p>\n                                    <p className=\"px-4 pt-1 pb-2 text-sm text-white truncate\">{user.email}</p>\n                                    {userRole === 'admin' && <a onClick={() => navigate('admin')} className=\"flex items-center w-full px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 cursor-pointer\"><Settings className=\"w-4 h-4 mr-2\" />Panel Admina</a>}\n                                    <a onClick={handleLogout} className=\"flex items-center w-full px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 cursor-pointer\"><LogOut className=\"w-4 h-4 mr-2\" />Wyloguj</a>\n                                </div>\n                            ) : (\n                                <div className=\"absolute right-0 mt-2 w-48 bg-gray-800 border border-gray-700 rounded-md shadow-lg py-1 z-20 opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\n                                    <a onClick={() => navigate('login')} className=\"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 cursor-pointer\">Zaloguj się</a>\n                                    <a onClick={() => navigate('register')} className=\"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 cursor-pointer\">Zarejestruj się</a>\n                                </div>\n                            )}\n                        </div>\n                        <div className=\"md:hidden\">\n                            <button onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}>\n                                {isMobileMenuOpen ? <X className=\"h-7 w-7 text-gray-300\" /> : <Menu className=\"h-7 w-7 text-gray-300\" />}\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            {isMobileMenuOpen && (\n                <div className=\"md:hidden bg-gray-900 shadow-lg border-t border-gray-700\">\n                    <nav className=\"flex flex-col space-y-4 p-4 text-center text-gray-300\">\n                        {navLinks}\n                    </nav>\n                </div>\n            )}\n        </header>\n    );\n};\n\nconst Footer = () => (\n    <footer className=\"relative bg-gray-900 border-t border-gray-800 text-white overflow-hidden\">\n        <div className=\"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-5\"></div>\n        <div className=\"relative container mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-8\">\n                <div>\n                    <h3 className=\"text-lg font-semibold mb-4 text-blue-400\">EV Akcesoria</h3>\n                    <p className=\"text-gray-400\">Napędzamy rewolucję. Najlepsze akcesoria dla Twojego EV, dostępne od ręki.</p>\n                </div>\n                <div>\n                    <h3 className=\"text-lg font-semibold mb-4\">Informacje</h3>\n                    <ul className=\"space-y-2\">\n                        <li><a href=\"#\" className=\"text-gray-400 hover:text-white\">O nas</a></li>\n                        <li><a href=\"#\" className=\"text-gray-400 hover:text-white\">Kontakt</a></li>\n                        <li><a href=\"#\" className=\"text-gray-400 hover:text-white\">Polityka prywatności</a></li>\n                        <li><a href=\"#\" className=\"text-gray-400 hover:text-white\">Regulamin</a></li>\n                    </ul>\n                </div>\n                <div>\n                    <h3 className=\"text-lg font-semibold mb-4\">Obsługa klienta</h3>\n                    <ul className=\"space-y-2\">\n                         <li><a href=\"#\" className=\"text-gray-400 hover:text-white\">Dostawa i płatności</a></li>\n                         <li><a href=\"#\" className=\"text-gray-400 hover:text-white\">Zwroty i reklamacje</a></li>\n                         <li><a href=\"#\" className=\"text-gray-400 hover:text-white\">FAQ</a></li>\n                    </ul>\n                </div>\n                <div>\n                    <h3 className=\"text-lg font-semibold mb-4\">Kontakt</h3>\n                    <p className=\"text-gray-400\">ul. Elektryczna 1, Warszawa</p>\n                    <p className=\"text-gray-400\">kontakt@ev-akcesoria.pl</p>\n                    <p className=\"text-gray-400\">+48 123 456 789</p>\n                </div>\n            </div>\n            <div className=\"mt-8 border-t border-gray-700 pt-8 text-center text-gray-500\">\n                <p>&copy; {new Date().getFullYear()} EV Akcesoria. Wszelkie prawa zastrzeżone. Stworzone z pasji do elektromobilności.</p>\n            </div>\n        </div>\n    </footer>\n);\n\nconst ProductCard = ({ product, navigate }) => {\n    const { addToCart } = useContext(AppContext);\n    return (\n        <div className=\"bg-gray-800 border border-gray-700 rounded-lg shadow-lg overflow-hidden group transition-all duration-300 hover:shadow-blue-500/20 hover:border-blue-800/50 transform hover:-translate-y-2\">\n            <div className=\"relative\">\n                <img src={product.imageUrls && product.imageUrls[0] ? product.imageUrls[0] : 'https://placehold.co/600x600/111827/ffffff?text=Brak+zdjęcia'} alt={product.name} className=\"w-full h-64 object-cover\" />\n                <div className=\"absolute top-0 right-0 bg-blue-600 text-white px-3 py-1 m-2 rounded-full text-sm font-semibold\">\n                    {product.category}\n                </div>\n                <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300\"></div>\n                <div className=\"absolute bottom-4 left-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex justify-center space-x-2\">\n                    <button onClick={(e) => { e.stopPropagation(); addToCart(product); }} className=\"bg-blue-600 text-white font-bold py-2 px-4 rounded-full hover:bg-blue-500 flex-1\">Do koszyka</button>\n                    <button onClick={() => navigate('product', product.id)} className=\"bg-gray-200/80 text-gray-900 font-bold p-2 rounded-full hover:bg-white\"><Eye /></button>\n                </div>\n            </div>\n            <div className=\"p-4 cursor-pointer\" onClick={() => navigate('product', product.id)}>\n                <h3 className=\"text-lg font-semibold truncate text-white\">{product.name}</h3>\n                <div className=\"flex items-center justify-between mt-2\">\n                    <p className=\"text-xl font-bold text-blue-400\">{product.price.toFixed(2)} zł</p>\n                    <div className=\"flex items-center\">\n                        <Star className=\"h-5 w-5 text-yellow-400\" fill=\"currentColor\" />\n                        <span className=\"text-gray-400 ml-1\">{product.rating || 'Brak'}</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst HomePage = ({ navigate, products, categories }) => {\n    const bestsellers = products.filter(p => p.bestseller).slice(0, 4);\n\n    return (\n        <div className=\"space-y-24 md:space-y-32 pb-24\">\n            <section className=\"relative h-[85vh] text-white flex items-center justify-center overflow-hidden\">\n                <video autoPlay loop muted playsInline className=\"absolute z-0 w-auto min-w-full min-h-full max-w-none object-cover\">\n                    <source src=\"https://assets.mixkit.co/videos/preview/mixkit-electric-car-charging-at-a-modern-charging-station-43304-large.mp4\" type=\"video/mp4\" />\n                    [Film przedstawiający ładowanie samochodu elektrycznego]\n                </video>\n                <div className=\"absolute inset-0 bg-black/60 z-10\"></div>\n                <div className=\"relative z-20 text-center p-4 animate-fade-in-up\">\n                    <h1 className=\"text-4xl md:text-7xl font-extrabold tracking-tight mb-4\">Przyszłość jest Elektryczna.</h1>\n                    <p className=\"text-lg md:text-2xl max-w-3xl mx-auto mb-8 text-gray-300\">Wyposaż swój samochód w najlepsze akcesoria na rynku.</p>\n                    <button onClick={() => navigate('category', 'Wszystkie')} className=\"bg-blue-600 hover:bg-blue-500 text-white font-bold py-4 px-10 rounded-full text-xl transition-all transform hover:scale-105 shadow-lg shadow-blue-600/30 flex items-center justify-center mx-auto\">\n                        Odkryj produkty <ArrowRight className=\"ml-3 h-6 w-6\" />\n                    </button>\n                </div>\n            </section>\n\n            <section className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\n                <h2 className=\"text-3xl md:text-4xl font-bold text-center mb-12 text-white\">Przeglądaj Kategorie</h2>\n                <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 md:gap-8\">\n                    {categories.map(category => (\n                        <div key={category.name} onClick={() => navigate('category', category.name)} className=\"group cursor-pointer text-center transform transition-all duration-300 hover:!scale-105 hover:z-10\">\n                            <div className=\"relative rounded-lg overflow-hidden shadow-lg mb-4 aspect-w-4 aspect-h-3\">\n                                <img src={category.image} alt={category.name} className=\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300\" />\n                                <div className=\"absolute inset-0 bg-black/40 group-hover:bg-black/20 transition-colors\"></div>\n                            </div>\n                            <h3 className=\"text-xl font-semibold text-gray-200\">{category.name}</h3>\n                        </div>\n                    ))}\n                </div>\n            </section>\n\n            <section className=\"bg-gray-900 py-24\">\n                <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\n                    <h2 className=\"text-3xl md:text-4xl font-bold text-center mb-12 text-white\">Nasze Bestsellery</h2>\n                     {bestsellers.length > 0 ? (\n                        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8\">\n                            {bestsellers.map(product => (\n                                <ProductCard key={product.id} product={product} navigate={navigate} />\n                            ))}\n                        </div>\n                    ) : (\n                        <p className=\"text-center text-gray-400\">Brak bestsellerów do wyświetlenia. Dodaj produkty w panelu admina.</p>\n                    )}\n                </div>\n            </section>\n        </div>\n    );\n};\n\nconst CategoryPage = ({ navigate, products, categoryName }) => {\n    const [filteredProducts, setFilteredProducts] = useState([]);\n    const [sort, setSort] = useState('popular');\n    const [filters, setFilters] = useState({ brand: 'all', price: 'all' });\n\n    useEffect(() => {\n        let tempProducts = categoryName === 'Wszystkie' ? [...products] : products.filter(p => p.category === categoryName);\n\n        if (filters.brand !== 'all') tempProducts = tempProducts.filter(p => p.brand === filters.brand);\n        if (filters.price !== 'all') {\n            const [min, max] = filters.price.split('-').map(Number);\n            tempProducts = tempProducts.filter(p => p.price >= min && (max ? p.price <= max : true));\n        }\n\n        switch (sort) {\n            case 'price-asc': tempProducts.sort((a, b) => a.price - b.price); break;\n            case 'price-desc': tempProducts.sort((a, b) => b.price - a.price); break;\n            case 'name-asc': tempProducts.sort((a, b) => a.name.localeCompare(b.name)); break;\n            default: tempProducts.sort((a, b) => (b.reviews || 0) - (a.reviews || 0)); break;\n        }\n\n        setFilteredProducts(tempProducts);\n    }, [categoryName, products, sort, filters]);\n\n    const uniqueBrands = ['all', ...new Set(products.map(p => p.brand))];\n    const priceRanges = [\n        { label: 'Wszystkie', value: 'all' }, { label: 'Poniżej 100 zł', value: '0-100' },\n        { label: '100 - 500 zł', value: '100-500' }, { label: '500 - 2000 zł', value: '500-2000' },\n        { label: 'Powyżej 2000 zł', value: '2000' },\n    ];\n\n    return (\n        <div className=\"container mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n            <h1 className=\"text-4xl font-bold mb-8 text-white\">{categoryName}</h1>\n            <div className=\"flex flex-col md:flex-row gap-8\">\n                <aside className=\"w-full md:w-1/4\">\n                    <div className=\"bg-gray-800 p-6 rounded-lg shadow-md space-y-6 border border-gray-700\">\n                        <h3 className=\"text-xl font-semibold flex items-center text-white\"><Filter className=\"mr-2\" /> Filtry</h3>\n                        <div>\n                            <label htmlFor=\"sort\" className=\"block text-sm font-medium text-gray-400\">Sortuj według</label>\n                            <select id=\"sort\" value={sort} onChange={e => setSort(e.target.value)} className=\"mt-1 block w-full pl-3 pr-10 py-2 text-base bg-gray-700 border-gray-600 text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md\">\n                                <option value=\"popular\">Popularność</option> <option value=\"price-asc\">Cena: rosnąco</option>\n                                <option value=\"price-desc\">Cena: malejąco</option> <option value=\"name-asc\">Nazwa: A-Z</option>\n                            </select>\n                        </div>\n                        <div>\n                            <h4 className=\"font-semibold mb-2 text-white\">Marka</h4>\n                            <div className=\"space-y-2\">\n                                {uniqueBrands.map(brand => (\n                                    <div key={brand} className=\"flex items-center\">\n                                        <input id={`brand-${brand}`} name=\"brand\" type=\"radio\" value={brand} checked={filters.brand === brand} onChange={e => setFilters({...filters, brand: e.target.value})} className=\"h-4 w-4 text-blue-600 bg-gray-700 border-gray-600 focus:ring-blue-500\" />\n                                        <label htmlFor={`brand-${brand}`} className=\"ml-3 text-sm text-gray-300\">{brand === 'all' ? 'Wszystkie' : brand}</label>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                        <div>\n                            <h4 className=\"font-semibold mb-2 text-white\">Cena</h4>\n                            <div className=\"space-y-2\">\n                                {priceRanges.map(range => (\n                                    <div key={range.value} className=\"flex items-center\">\n                                        <input id={`price-${range.value}`} name=\"price\" type=\"radio\" value={range.value} checked={filters.price === range.value} onChange={e => setFilters({...filters, price: e.target.value})} className=\"h-4 w-4 text-blue-600 bg-gray-700 border-gray-600 focus:ring-blue-500\" />\n                                        <label htmlFor={`price-${range.value}`} className=\"ml-3 text-sm text-gray-300\">{range.label}</label>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                    </div>\n                </aside>\n                <main className=\"w-full md:w-3/4\">\n                    {filteredProducts.length > 0 ? (\n                        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8\">\n                            {filteredProducts.map(product => <ProductCard key={product.id} product={product} navigate={navigate} />)}\n                        </div>\n                    ) : (\n                        <div className=\"text-center py-16 bg-gray-800 rounded-lg\">\n                            <h2 className=\"text-2xl font-semibold text-white\">Brak produktów</h2>\n                            <p className=\"text-gray-400 mt-2\">Nie znaleziono produktów w tej kategorii.</p>\n                        </div>\n                    )}\n                </main>\n            </div>\n        </div>\n    );\n};\n\nconst ReviewsSection = ({ productId, reviews }) => {\n    const { user, addNotification, navigate } = useContext(AppContext);\n    const [newReviewText, setNewReviewText] = useState('');\n    const [newRating, setNewRating] = useState(5);\n\n    const handleReviewSubmit = async (e) => {\n        e.preventDefault();\n        if (!user) {\n            addNotification('Musisz być zalogowany, aby dodać opinię.', 'error');\n            navigate('login');\n            return;\n        }\n        if (newReviewText.trim() === '') {\n            addNotification('Opinia nie może być pusta.', 'error');\n            return;\n        }\n        const review = {\n            author: user.email,\n            text: newReviewText,\n            rating: newRating,\n            createdAt: new Date(),\n        };\n        try {\n            await api.addReview(productId, review);\n            setNewReviewText('');\n            setNewRating(5);\n            addNotification('Dziękujemy za Twoją opinię!');\n        } catch (error) {\n            addNotification('Wystąpił błąd podczas dodawania opinii.', 'error');\n        }\n    };\n\n    return (\n        <div className=\"mt-16\">\n            <h2 className=\"text-3xl font-bold text-white mb-8\">Opinie klientów</h2>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n                <div className=\"space-y-6\">\n                    {reviews.length > 0 ? reviews.map(review => (\n                        <div key={review.id} className=\"bg-gray-800 p-6 rounded-lg border border-gray-700\">\n                            <div className=\"flex justify-between items-center mb-2\">\n                                <p className=\"font-semibold text-white\">{review.author}</p>\n                                <div className=\"flex items-center\">\n                                    {[...Array(5)].map((_, i) => <Star key={i} size={16} className={i < review.rating ? 'text-yellow-400' : 'text-gray-600'} fill=\"currentColor\" />)}\n                                </div>\n                            </div>\n                            <p className=\"text-gray-300\">{review.text}</p>\n                        </div>\n                    )) : <p className=\"text-gray-400\">Brak opinii dla tego produktu. Bądź pierwszy!</p>}\n                </div>\n                <div className=\"sticky top-24\">\n                    <form onSubmit={handleReviewSubmit} className=\"bg-gray-800 p-6 rounded-lg border border-gray-700\">\n                        <h3 className=\"text-xl font-bold text-white mb-4\">Dodaj swoją opinię</h3>\n                        <div className=\"mb-4\">\n                            <label className=\"block text-gray-400 mb-2\">Ocena</label>\n                            <div className=\"flex\">\n                                {[...Array(5)].map((_, i) => <Star key={i} size={24} className={`cursor-pointer ${i < newRating ? 'text-yellow-400' : 'text-gray-600'}`} fill=\"currentColor\" onClick={() => setNewRating(i + 1)} />)}\n                            </div>\n                        </div>\n                        <textarea value={newReviewText} onChange={e => setNewReviewText(e.target.value)} placeholder=\"Twoja opinia...\" className=\"w-full p-2 border rounded bg-gray-700 border-gray-600 text-white h-32\"></textarea>\n                        <button type=\"submit\" className=\"mt-4 w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 rounded-md\">Wyślij opinię</button>\n                    </form>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst ProductPage = ({ navigate, productId }) => {\n    const { addToCart, products } = useContext(AppContext);\n    const [product, setProduct] = useState(null);\n    const [reviews, setReviews] = useState([]);\n    const [isLoading, setIsLoading] = useState(true);\n    const [mainImage, setMainImage] = useState('');\n    const [quantity, setQuantity] = useState(1);\n\n    useEffect(() => {\n        const fetchData = async () => {\n            setIsLoading(true);\n            const productData = await api.fetchProduct(productId);\n            setProduct(productData);\n            if (productData && productData.imageUrls && productData.imageUrls.length > 0) {\n                setMainImage(productData.imageUrls[0]);\n            }\n            setIsLoading(false);\n        };\n        fetchData();\n        const unsubscribe = api.getReviews(productId, setReviews);\n        return () => unsubscribe();\n    }, [productId]);\n\n    if (isLoading || !product) return <LoadingScreen />;\n    \n    const relatedProducts = products.filter(p => p.category === product.category && p.id !== product.id).slice(0, 4);\n\n    return (\n        <div className=\"bg-gray-900\">\n            <div className=\"container mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-12\">\n                    <div>\n                        <div className=\"aspect-w-1 aspect-h-1 w-full bg-gray-800 rounded-lg overflow-hidden shadow-lg mb-4\">\n                            <img src={mainImage || (product.imageUrls && product.imageUrls[0])} alt={product.name} className=\"w-full h-full object-cover transition-all duration-300 hover:scale-105\" />\n                        </div>\n                        <div className=\"grid grid-cols-4 gap-2\">\n                            {product.imageUrls.map((url, index) => (\n                                <div key={index} onClick={() => setMainImage(url)} className={`cursor-pointer rounded-md overflow-hidden border-2 transition-all ${mainImage === url ? 'border-blue-500' : 'border-gray-700 hover:border-blue-600'}`}>\n                                    <img src={url} alt={`${product.name} - widok ${index + 1}`} className=\"w-full h-full object-cover\" />\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n                    <div className=\"flex flex-col justify-center\">\n                        <h1 className=\"text-3xl md:text-4xl font-bold tracking-tight text-white\">{product.name}</h1>\n                        <div className=\"flex items-center mt-2\">\n                            <div className=\"flex items-center\">\n                                {[...Array(5)].map((_, i) => <Star key={i} className={`h-5 w-5 ${i < Math.round(product.rating) ? 'text-yellow-400' : 'text-gray-600'}`} fill=\"currentColor\" />)}\n                            </div>\n                            <span className=\"ml-2 text-gray-400\">({reviews.length} opinii)</span>\n                        </div>\n                        <p className=\"text-4xl font-bold text-blue-400 my-4\">{product.price.toFixed(2)} zł</p>\n                        <div className=\"flex items-center space-x-4 my-6\">\n                            <div className=\"flex items-center border border-gray-600 rounded-md bg-gray-800\">\n                                <button onClick={() => setQuantity(q => Math.max(1, q - 1))} className=\"p-3 text-gray-400 hover:bg-gray-700\"><Minus className=\"h-5 w-5\" /></button>\n                                <span className=\"px-4 text-lg font-semibold text-white\">{quantity}</span>\n                                <button onClick={() => setQuantity(q => q + 1)} className=\"p-3 text-gray-400 hover:bg-gray-700\"><Plus className=\"h-5 w-5\" /></button>\n                            </div>\n                            <button onClick={() => addToCart(product, quantity)} className=\"flex-1 bg-blue-600 text-white font-bold py-3 px-6 rounded-md hover:bg-blue-500 transition-colors flex items-center justify-center space-x-2\">\n                                <ShoppingCart className=\"h-5 w-5\" /><span>Dodaj do koszyka</span>\n                            </button>\n                        </div>\n                        <button onClick={() => { addToCart(product, quantity); navigate('checkout'); }} className=\"w-full bg-green-600 text-white font-bold py-3 px-6 rounded-md hover:bg-green-500 transition-colors\">Kup teraz</button>\n                    </div>\n                </div>\n                <ReviewsSection productId={productId} reviews={reviews} />\n                 <div className=\"mt-24\">\n                    <h2 className=\"text-3xl font-bold text-white mb-8\">Zobacz również</h2>\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8\">\n                        {relatedProducts.map(p => <ProductCard key={p.id} product={p} navigate={navigate} />)}\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst CartPage = ({ navigate }) => {\n    const { cart, updateCartQuantity, removeFromCart, cartTotal, cartItemCount } = useContext(AppContext);\n\n    if (cartItemCount === 0) {\n        return (\n            <div className=\"container mx-auto px-4 sm:px-6 lg:px-8 py-16 text-center\">\n                <ShoppingCart className=\"h-24 w-24 mx-auto text-gray-600\" />\n                <h1 className=\"text-3xl font-bold mt-4 text-white\">Twój koszyk jest pusty</h1>\n                <p className=\"text-gray-400 mt-2\">Odkryj nasze produkty i dodaj coś do koszyka.</p>\n                <button onClick={() => navigate('category', 'Wszystkie')} className=\"mt-6 bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-8 rounded-md transition-colors\">Wróć do sklepu</button>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"bg-gray-900 min-h-screen\">\n            <div className=\"container mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n                <h1 className=\"text-3xl font-bold mb-8 text-white\">Twój Koszyk</h1>\n                <div className=\"flex flex-col lg:flex-row gap-8\">\n                    <div className=\"lg:w-2/3 bg-gray-800 rounded-lg shadow-md p-6 space-y-4 border border-gray-700\">\n                        {cart.map(item => (\n                            <div key={item.id} className=\"flex items-center space-x-4 border-b border-gray-700 pb-4 last:border-b-0\">\n                                <img src={item.imageUrls[0]} alt={item.name} className=\"w-24 h-24 object-cover rounded-md\" />\n                                <div className=\"flex-grow\">\n                                    <h3 className=\"font-semibold text-lg text-white\">{item.name}</h3>\n                                    <p className=\"text-gray-400 text-sm\">{item.category}</p>\n                                    <p className=\"font-bold text-blue-400 mt-1\">{(item.price * item.quantity).toFixed(2)} zł</p>\n                                </div>\n                                <div className=\"flex items-center border border-gray-600 rounded-md bg-gray-700\">\n                                    <button onClick={() => updateCartQuantity(item.id, item.quantity - 1)} className=\"p-2 text-gray-400 hover:bg-gray-600\"><Minus className=\"h-4 w-4\" /></button>\n                                    <span className=\"px-3 text-md font-semibold text-white\">{item.quantity}</span>\n                                    <button onClick={() => updateCartQuantity(item.id, item.quantity + 1)} className=\"p-2 text-gray-400 hover:bg-gray-600\"><Plus className=\"h-4 w-4\" /></button>\n                                </div>\n                                <button onClick={() => removeFromCart(item.id)} className=\"text-gray-500 hover:text-red-500\"><Trash2 className=\"h-5 w-5\" /></button>\n                            </div>\n                        ))}\n                    </div>\n                    <div className=\"lg:w-1/3\">\n                        <div className=\"bg-gray-800 rounded-lg shadow-md p-6 sticky top-24 border border-gray-700\">\n                            <h2 className=\"text-2xl font-bold border-b border-gray-700 pb-4 text-white\">Podsumowanie</h2>\n                            <div className=\"space-y-2 mt-4 text-gray-300\">\n                                <div className=\"flex justify-between\"><span>Wartość produktów</span><span>{cartTotal.toFixed(2)} zł</span></div>\n                                <div className=\"flex justify-between\"><span>Dostawa</span><span>Darmowa</span></div>\n                            </div>\n                            <div className=\"flex justify-between font-bold text-xl mt-4 pt-4 border-t border-gray-700 text-white\"><span>Do zapłaty</span><span>{cartTotal.toFixed(2)} zł</span></div>\n                            <button onClick={() => navigate('checkout')} className=\"mt-6 w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-md transition-colors\">Przejdź do kasy</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst CheckoutPage = ({ navigate }) => {\n    const { cart, cartTotal, clearCart, user, addNotification } = useContext(AppContext);\n    const [isProcessing, setIsProcessing] = useState(false);\n    const [step, setStep] = useState(1);\n    const [formData, setFormData] = useState({\n        name: '',\n        surname: '',\n        email: user?.email || '',\n        address: '',\n        zipCode: '',\n        city: '',\n        paymentMethod: 'stripe'\n    });\n\n    const handleChange = (e) => {\n        setFormData(prev => ({ ...prev, [e.target.name]: e.target.value }));\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setIsProcessing(true);\n        \n        const orderData = {\n            userId: user.uid,\n            customer: formData,\n            items: cart,\n            total: cartTotal,\n            status: 'Nowe',\n            createdAt: new Date(),\n        };\n\n        try {\n            const docRef = await addDoc(collection(db, \"orders\"), orderData);\n            setTimeout(() => {\n                const orderDetails = {\n                    orderNumber: docRef.id,\n                    total: cartTotal,\n                    date: new Date().toLocaleDateString('pl-PL'),\n                };\n                clearCart();\n                setIsProcessing(false);\n                navigate('orderConfirmation', orderDetails);\n            }, 2000);\n        } catch (error) {\n            addNotification('Wystąpił błąd podczas składania zamówienia.', 'error');\n            setIsProcessing(false);\n        }\n    };\n\n    if (isProcessing) {\n        return (\n            <div className=\"flex flex-col items-center justify-center min-h-[60vh]\">\n                <div className=\"loader ease-linear rounded-full border-8 border-t-8 border-gray-700 h-32 w-32 mb-4 border-t-blue-500 animate-spin\"></div>\n                <h2 className=\"text-2xl font-semibold text-center text-white\">Przetwarzanie zamówienia...</h2>\n                <p className=\"text-gray-400\">Proszę czekać, finalizujemy Twoje zakupy.</p>\n            </div>\n        );\n    }\n    \n    const ProgressBar = ({ currentStep }) => (\n        <div className=\"flex items-center mb-12\">\n            <div className={`flex-1 flex items-center ${currentStep >= 1 ? 'text-blue-400' : 'text-gray-500'}`}>\n                <div className={`w-8 h-8 rounded-full border-2 flex items-center justify-center ${currentStep >= 1 ? 'border-blue-400' : 'border-gray-500'}`}>{currentStep > 1 ? <CheckCircle size={16}/> : '1'}</div>\n                <span className=\"ml-2 font-semibold\">Dostawa</span>\n            </div>\n            <div className={`flex-1 h-1 mx-4 ${currentStep >= 2 ? 'bg-blue-400' : 'bg-gray-700'}`}></div>\n            <div className={`flex-1 flex items-center ${currentStep >= 2 ? 'text-blue-400' : 'text-gray-500'}`}>\n                <div className={`w-8 h-8 rounded-full border-2 flex items-center justify-center ${currentStep >= 2 ? 'border-blue-400' : 'border-gray-500'}`}>{currentStep > 2 ? <CheckCircle size={16}/> : '2'}</div>\n                <span className=\"ml-2 font-semibold\">Płatność</span>\n            </div>\n            <div className={`flex-1 h-1 mx-4 ${currentStep >= 3 ? 'bg-blue-400' : 'bg-gray-700'}`}></div>\n            <div className={`flex-1 flex items-center ${currentStep >= 3 ? 'text-blue-400' : 'text-gray-500'}`}>\n                <div className={`w-8 h-8 rounded-full border-2 flex items-center justify-center ${currentStep >= 3 ? 'border-blue-400' : 'border-gray-500'}`}>3</div>\n                <span className=\"ml-2 font-semibold\">Podsumowanie</span>\n            </div>\n        </div>\n    );\n\n    return (\n        <div className=\"bg-gray-900\">\n            <div className=\"container mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n                <div className=\"max-w-4xl mx-auto bg-gray-800 p-8 rounded-lg border border-gray-700\">\n                    <h1 className=\"text-3xl font-bold text-center mb-4 text-white\">Finalizacja zamówienia</h1>\n                    <ProgressBar currentStep={step} />\n                    <form onSubmit={handleSubmit}>\n                        {step === 1 && (\n                            <div>\n                                <h2 className=\"text-2xl font-bold text-white mb-4\">1. Adres dostawy</h2>\n                                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                                    <input name=\"name\" onChange={handleChange} value={formData.name} type=\"text\" placeholder=\"Imię\" required className=\"p-3 border rounded-md bg-gray-700 border-gray-600 text-white\" />\n                                    <input name=\"surname\" onChange={handleChange} value={formData.surname} type=\"text\" placeholder=\"Nazwisko\" required className=\"p-3 border rounded-md bg-gray-700 border-gray-600 text-white\" />\n                                    <input name=\"email\" onChange={handleChange} value={formData.email} type=\"email\" placeholder=\"Email\" required className=\"p-3 border rounded-md sm:col-span-2 bg-gray-700 border-gray-600 text-white\" />\n                                    <input name=\"address\" onChange={handleChange} value={formData.address} type=\"text\" placeholder=\"Adres\" required className=\"p-3 border rounded-md sm:col-span-2 bg-gray-700 border-gray-600 text-white\" />\n                                    <input name=\"zipCode\" onChange={handleChange} value={formData.zipCode} type=\"text\" placeholder=\"Kod pocztowy\" required className=\"p-3 border rounded-md bg-gray-700 border-gray-600 text-white\" />\n                                    <input name=\"city\" onChange={handleChange} value={formData.city} type=\"text\" placeholder=\"Miasto\" required className=\"p-3 border rounded-md bg-gray-700 border-gray-600 text-white\" />\n                                </div>\n                                <button onClick={() => setStep(2)} className=\"mt-6 w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-md transition-colors\">Dalej</button>\n                            </div>\n                        )}\n                        {step === 2 && (\n                             <div>\n                                <h2 className=\"text-2xl font-bold text-white mb-4\">2. Metoda płatności</h2>\n                                <div className=\"space-y-4\">\n                                     <label className=\"flex items-center p-4 border rounded-md cursor-pointer transition-all border-gray-600 bg-gray-700 hover:bg-gray-600\"><input type=\"radio\" name=\"paymentMethod\" value=\"stripe\" checked={formData.paymentMethod === 'stripe'} onChange={handleChange} className=\"h-5 w-5 text-blue-600\"/><span className=\"ml-4 font-semibold text-white\">Karta płatnicza</span></label>\n                                     <label className=\"flex items-center p-4 border rounded-md cursor-pointer transition-all border-gray-600 bg-gray-700 hover:bg-gray-600\"><input type=\"radio\" name=\"paymentMethod\" value=\"blik\" checked={formData.paymentMethod === 'blik'} onChange={handleChange} className=\"h-5 w-5 text-blue-600\"/><span className=\"ml-4 font-semibold text-white\">BLIK</span></label>\n                                     <label className=\"flex items-center p-4 border rounded-md cursor-pointer transition-all border-gray-600 bg-gray-700 hover:bg-gray-600\"><input type=\"radio\" name=\"paymentMethod\" value=\"payu\" checked={formData.paymentMethod === 'payu'} onChange={handleChange} className=\"h-5 w-5 text-blue-600\"/><span className=\"ml-4 font-semibold text-white\">Szybki przelew</span></label>\n                                </div>\n                                <div className=\"flex justify-between mt-6\">\n                                    <button onClick={() => setStep(1)} className=\"bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-md transition-colors\">Wstecz</button>\n                                    <button onClick={() => setStep(3)} className=\"bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-6 rounded-md transition-colors\">Dalej</button>\n                                </div>\n                            </div>\n                        )}\n                        {step === 3 && (\n                            <div>\n                                <h2 className=\"text-2xl font-bold text-white mb-4\">3. Podsumowanie</h2>\n                                <div className=\"bg-gray-700 p-6 rounded-lg space-y-2 text-gray-300\">\n                                    <div className=\"flex justify-between\"><span>Wartość produktów:</span><span>{cartTotal.toFixed(2)} zł</span></div>\n                                    <div className=\"flex justify-between\"><span>Dostawa:</span><span>Darmowa</span></div>\n                                    <div className=\"flex justify-between font-bold text-xl mt-2 pt-2 border-t border-gray-600 text-white\"><span>Do zapłaty:</span><span>{cartTotal.toFixed(2)} zł</span></div>\n                                </div>\n                                <div className=\"flex justify-between mt-8\">\n                                    <button onClick={() => setStep(2)} className=\"bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-md transition-colors\">Wstecz</button>\n                                    <button type=\"submit\" className=\"bg-green-600 hover:bg-green-500 text-white font-bold py-3 px-6 rounded-md transition-colors flex items-center space-x-2\"><ShieldCheck /><span>Zamawiam i płacę</span></button>\n                                </div>\n                            </div>\n                        )}\n                    </form>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst OrderConfirmationPage = ({ navigate, orderDetails }) => (\n    <div className=\"container mx-auto px-4 sm:px-6 lg:px-8 py-16 text-center\">\n        <ShieldCheck className=\"h-24 w-24 mx-auto text-green-500 animate-pulse\" />\n        <h1 className=\"text-3xl font-bold mt-4 text-white\">Dziękujemy za zamówienie!</h1>\n        <p className=\"text-gray-400 mt-2\">Twoje zamówienie zostało przyjęte do realizacji. Potwierdzenie wysłaliśmy na Twój adres e-mail.</p>\n        <div className=\"bg-gray-800 inline-block p-6 rounded-lg mt-6 text-left border border-gray-700\">\n            <p className=\"text-gray-300\"><span className=\"font-semibold text-white\">Numer zamówienia:</span> {orderDetails.orderNumber}</p>\n            <p className=\"text-gray-300\"><span className=\"font-semibold text-white\">Data:</span> {orderDetails.date}</p>\n            <p className=\"text-gray-300\"><span className=\"font-semibold text-white\">Kwota:</span> {orderDetails.total.toFixed(2)} zł</p>\n        </div>\n        <div className=\"mt-8\">\n            <button onClick={() => navigate('home')} className=\"bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-8 rounded-md transition-colors\">Kontynuuj zakupy</button>\n        </div>\n    </div>\n);\n\nconst AccessDenied = ({ navigate }) => (\n     <div className=\"container mx-auto px-4 sm:px-6 lg:px-8 py-16 text-center\">\n        <h1 className=\"text-3xl font-bold mt-4 text-white\">Brak dostępu</h1>\n        <p className=\"text-gray-400 mt-2\">Nie masz uprawnień, aby wyświetlić tę stronę.</p>\n        <button onClick={() => navigate('home')} className=\"mt-6 bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-8 rounded-md transition-colors\">Wróć na stronę główną</button>\n    </div>\n);\n\n// --- KOMPONENTY LOGOWANIA I REJESTRACJI ---\nconst LoginPage = ({ navigate, addNotification }) => {\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [error, setError] = useState('');\n    const [isLoading, setIsLoading] = useState(false);\n\n    const handleLogin = async (e) => {\n        e.preventDefault();\n        setError('');\n        setIsLoading(true);\n        try {\n            await signInWithEmailAndPassword(auth, email, password);\n            addNotification('Zalogowano pomyślnie!');\n            navigate('home');\n        } catch (err) {\n            setError('Nieprawidłowy email lub hasło.');\n            addNotification('Błąd logowania.', 'error');\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"flex items-center justify-center min-h-[70vh]\">\n            <div className=\"p-8 bg-gray-800 border border-gray-700 shadow-xl rounded-lg w-full max-w-md\">\n                <h2 className=\"text-2xl font-bold text-center mb-6 text-white\">Logowanie</h2>\n                <form onSubmit={handleLogin} className=\"space-y-4\">\n                    <input type=\"email\" value={email} onChange={e => setEmail(e.target.value)} placeholder=\"Email\" required className=\"w-full p-3 border rounded-md bg-gray-700 border-gray-600 text-white\" />\n                    <input type=\"password\" value={password} onChange={e => setPassword(e.target.value)} placeholder=\"Hasło\" required className=\"w-full p-3 border rounded-md bg-gray-700 border-gray-600 text-white\" />\n                    {error && <p className=\"text-red-500 text-sm\">{error}</p>}\n                    <button type=\"submit\" disabled={isLoading} className=\"w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-md disabled:bg-gray-500\">\n                        {isLoading ? 'Logowanie...' : 'Zaloguj się'}\n                    </button>\n                </form>\n                <p className=\"text-center text-gray-400 mt-4\">Nie masz konta? <a onClick={() => navigate('register')} className=\"text-blue-400 hover:underline cursor-pointer\">Zarejestruj się</a></p>\n            </div>\n        </div>\n    );\n};\n\nconst RegisterPage = ({ navigate, addNotification }) => {\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [error, setError] = useState('');\n    const [isLoading, setIsLoading] = useState(false);\n\n    const handleRegister = async (e) => {\n        e.preventDefault();\n        setError('');\n        setIsLoading(true);\n        try {\n            await createUserWithEmailAndPassword(auth, email, password);\n            addNotification('Rejestracja pomyślna! Możesz się teraz zalogować.');\n            navigate('login');\n        } catch (err) {\n            if (err.code === 'auth/email-already-in-use') {\n                setError('Ten adres email jest już zajęty.');\n            } else if (err.code === 'auth/weak-password') {\n                setError('Hasło musi mieć co najmniej 6 znaków.');\n            } else {\n                setError('Błąd rejestracji. Spróbuj ponownie.');\n            }\n            addNotification('Błąd rejestracji.', 'error');\n        } finally {\n            setIsLoading(false);\n        }\n    };\n    return (\n        <div className=\"flex items-center justify-center min-h-[70vh]\">\n            <div className=\"p-8 bg-gray-800 border border-gray-700 shadow-xl rounded-lg w-full max-w-md\">\n                <h2 className=\"text-2xl font-bold text-center mb-6 text-white\">Rejestracja</h2>\n                <form onSubmit={handleRegister} className=\"space-y-4\">\n                    <input type=\"email\" value={email} onChange={e => setEmail(e.target.value)} placeholder=\"Email\" required className=\"w-full p-3 border rounded-md bg-gray-700 border-gray-600 text-white\" />\n                    <input type=\"password\" value={password} onChange={e => setPassword(e.target.value)} placeholder=\"Hasło (min. 6 znaków)\" required className=\"w-full p-3 border rounded-md bg-gray-700 border-gray-600 text-white\" />\n                    {error && <p className=\"text-red-500 text-sm\">{error}</p>}\n                    <button type=\"submit\" disabled={isLoading} className=\"w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-md disabled:bg-gray-500\">\n                        {isLoading ? 'Rejestrowanie...' : 'Zarejestruj się'}\n                    </button>\n                </form>\n                <p className=\"text-center text-gray-400 mt-4\">Masz już konto? <a onClick={() => navigate('login')} className=\"text-blue-400 hover:underline cursor-pointer\">Zaloguj się</a></p>\n            </div>\n        </div>\n    );\n};\n\n\n// --- PANEL ADMINISTRACYJNY ---\nconst AdminPanel = ({ navigate }) => {\n    const [adminPage, setAdminPage] = useState('dashboard');\n    \n    return (\n        <div className=\"bg-gray-900 min-h-screen\">\n            <div className=\"container mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n                <h1 className=\"text-3xl font-bold mb-8 text-white\">Panel Administratora</h1>\n                <div className=\"flex flex-col md:flex-row gap-8\">\n                    <aside className=\"md:w-1/4\">\n                        <div className=\"bg-gray-800 p-4 rounded-lg shadow-md border border-gray-700\">\n                            <nav className=\"space-y-2\">\n                                <a onClick={() => setAdminPage('dashboard')} className={`flex items-center p-3 rounded-md cursor-pointer ${adminPage === 'dashboard' ? 'bg-blue-600/20 text-blue-400' : 'hover:bg-gray-700'}`}><BarChart className=\"mr-3\"/>Dashboard</a>\n                                <a onClick={() => setAdminPage('products')} className={`flex items-center p-3 rounded-md cursor-pointer ${adminPage === 'products' ? 'bg-blue-600/20 text-blue-400' : 'hover:bg-gray-700'}`}><ShoppingCart className=\"mr-3\"/>Produkty</a>\n                                <a onClick={() => setAdminPage('orders')} className={`flex items-center p-3 rounded-md cursor-pointer ${adminPage === 'orders' ? 'bg-blue-600/20 text-blue-400' : 'hover:bg-gray-700'}`}><Truck className=\"mr-3\"/>Zamówienia</a>\n                            </nav>\n                        </div>\n                    </aside>\n                    <main className=\"md:w-3/4\">\n                        <div className=\"bg-gray-800 p-8 rounded-lg shadow-md border border-gray-700\">\n                            {adminPage === 'dashboard' && <AdminDashboard />}\n                            {adminPage === 'products' && <AdminProducts />}\n                            {adminPage === 'orders' && <AdminOrders />}\n                        </div>\n                    </main>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst AdminDashboard = () => {\n    const [stats, setStats] = useState({ orders: 0, revenue: 0, products: 0 });\n    const { products } = useContext(AppContext);\n\n    useEffect(() => {\n        const fetchOrders = async () => {\n            const ordersData = await api.fetchOrders();\n            const totalRevenue = ordersData.reduce((sum, order) => sum + order.total, 0);\n            setStats({\n                orders: ordersData.length,\n                revenue: totalRevenue,\n                products: products.length\n            });\n        };\n        fetchOrders();\n    }, [products]);\n\n    return (\n        <div>\n            <h2 className=\"text-2xl font-bold text-white mb-6\">Dashboard</h2>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                <div className=\"bg-gray-700 p-6 rounded-lg\"><h3 className=\"text-gray-400 text-sm\">Całkowita liczba zamówień</h3><p className=\"text-3xl font-bold text-white\">{stats.orders}</p></div>\n                <div className=\"bg-gray-700 p-6 rounded-lg\"><h3 className=\"text-gray-400 text-sm\">Całkowity przychód</h3><p className=\"text-3xl font-bold text-white\">{stats.revenue.toFixed(2)} zł</p></div>\n                <div className=\"bg-gray-700 p-6 rounded-lg\"><h3 className=\"text-gray-400 text-sm\">Liczba produktów</h3><p className=\"text-3xl font-bold text-white\">{stats.products}</p></div>\n            </div>\n        </div>\n    );\n};\n\nconst AdminProducts = () => {\n    const [products, setProducts] = useState([]);\n    const [isLoading, setIsLoading] = useState(true);\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [editingProduct, setEditingProduct] = useState(null);\n    const { addNotification } = useContext(AppContext);\n\n    useEffect(() => {\n        const fetch = async () => {\n            setIsLoading(true);\n            setProducts(await api.fetchProducts());\n            setIsLoading(false);\n        };\n        fetch();\n    }, []);\n\n    const handleSave = async (productData) => {\n        setIsLoading(true);\n        try {\n            if (editingProduct) {\n                await api.updateProduct(editingProduct.id, productData);\n                setProducts(products.map(p => p.id === editingProduct.id ? { ...productData, id: editingProduct.id } : p));\n                addNotification('Produkt zaktualizowany.');\n            } else {\n                const newDocRef = await api.addProduct(productData);\n                setProducts([...products, { ...productData, id: newDocRef.id }]);\n                addNotification('Produkt dodany.');\n            }\n            setIsModalOpen(false);\n        } catch (e) {\n            addNotification('Błąd zapisu produktu.', 'error');\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    const handleDelete = async (id) => {\n        if (window.confirm('Czy na pewno chcesz usunąć ten produkt?')) {\n            setIsLoading(true);\n            try {\n                await api.deleteProduct(id);\n                setProducts(products.filter(p => p.id !== id));\n                addNotification('Produkt usunięty.');\n            } catch (e) {\n                addNotification('Błąd podczas usuwania produktu.', 'error');\n            } finally {\n                setIsLoading(false);\n            }\n        }\n    };\n    \n    if (isLoading) return <p>Ładowanie produktów...</p>;\n    \n    return (\n        <div>\n            <div className=\"flex justify-between items-center mb-6\">\n                <h2 className=\"text-2xl font-bold text-white\">Produkty</h2>\n                <button onClick={() => { setEditingProduct(null); setIsModalOpen(true); }} className=\"bg-blue-600 text-white font-bold py-2 px-4 rounded-md hover:bg-blue-500\">Dodaj produkt</button>\n            </div>\n             <div className=\"overflow-x-auto bg-gray-800 rounded-lg\">\n                <table className=\"w-full text-left text-gray-300\">\n                    <thead className=\"bg-gray-700 text-sm text-gray-400 uppercase\"><tr>\n                        <th className=\"p-3\">Nazwa</th><th className=\"p-3\">Kategoria</th><th className=\"p-3\">Cena</th><th className=\"p-3\">Akcje</th>\n                    </tr></thead>\n                    <tbody>{products.map(p => (\n                        <tr key={p.id} className=\"border-b border-gray-700 hover:bg-gray-700/50\">\n                            <td className=\"p-3 font-medium text-white\">{p.name}</td><td className=\"p-3\">{p.category}</td><td className=\"p-3\">{p.price.toFixed(2)} zł</td>\n                            <td className=\"p-3 space-x-2\">\n                                <button onClick={() => { setEditingProduct(p); setIsModalOpen(true); }} className=\"text-blue-400 hover:underline\">Edytuj</button>\n                                <button onClick={() => handleDelete(p.id)} className=\"text-red-400 hover:underline\">Usuń</button>\n                            </td>\n                        </tr>\n                    ))}</tbody>\n                </table>\n            </div>\n            {isModalOpen && <ProductEditModal product={editingProduct} onSave={handleSave} onClose={() => setIsModalOpen(false)} />}\n        </div>\n    );\n};\n\nconst ProductEditModal = ({ product, onSave, onClose }) => {\n    const [formData, setFormData] = useState(\n        product || { name: '', price: 0, category: 'Ładowarki', brand: '', description: '', imageUrls: [], bestseller: false, rating: 0 }\n    );\n    const [isUploading, setIsUploading] = useState(false);\n    const { addNotification, categories } = useContext(AppContext);\n\n    const handleChange = (e) => {\n        const { name, value, type, checked } = e.target;\n        setFormData(prev => ({ ...prev, [name]: type === 'checkbox' ? checked : value }));\n    };\n    \n    const handlePriceChange = (e) => {\n        setFormData(prev => ({ ...prev, price: parseFloat(e.target.value) || 0 }));\n    }\n\n    const handleImageUpload = async (e) => {\n        const file = e.target.files[0];\n        if (!file) return;\n        setIsUploading(true);\n        try {\n            const url = await api.uploadImage(file);\n            setFormData(prev => ({ ...prev, imageUrls: [...prev.imageUrls, url] }));\n            addNotification('Zdjęcie dodane.');\n        } catch (error) {\n            addNotification('Błąd uploadu zdjęcia.', 'error');\n        } finally {\n            setIsUploading(false);\n        }\n    };\n    \n    const handleSubmit = (e) => {\n        e.preventDefault();\n        onSave(formData);\n    };\n\n    return (\n        <div className=\"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-gray-800 p-8 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto border border-gray-700\">\n                <h2 className=\"text-2xl font-bold mb-6 text-white\">{product ? 'Edytuj produkt' : 'Dodaj produkt'}</h2>\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\n                    <input name=\"name\" value={formData.name} onChange={handleChange} placeholder=\"Nazwa produktu\" className=\"w-full p-2 border rounded bg-gray-700 border-gray-600 text-white\" required />\n                    <input name=\"price\" type=\"number\" step=\"0.01\" value={formData.price} onChange={handlePriceChange} placeholder=\"Cena\" className=\"w-full p-2 border rounded bg-gray-700 border-gray-600 text-white\" required />\n                    <select name=\"category\" value={formData.category} onChange={handleChange} className=\"w-full p-2 border rounded bg-gray-700 border-gray-600 text-white\">\n                        {categories.map(c => <option key={c.name} value={c.name}>{c.name}</option>)}\n                    </select>\n                    <input name=\"brand\" value={formData.brand} onChange={handleChange} placeholder=\"Marka\" className=\"w-full p-2 border rounded bg-gray-700 border-gray-600 text-white\" />\n                    <textarea name=\"description\" value={formData.description} onChange={handleChange} placeholder=\"Opis\" className=\"w-full p-2 border rounded h-32 bg-gray-700 border-gray-600 text-white\"></textarea>\n                    <div className=\"flex items-center\">\n                        <input type=\"checkbox\" id=\"bestseller\" name=\"bestseller\" checked={formData.bestseller} onChange={handleChange} className=\"h-4 w-4 text-blue-600 bg-gray-700 border-gray-600 rounded\" />\n                        <label htmlFor=\"bestseller\" className=\"ml-2 text-white\">Bestseller</label>\n                    </div>\n                    <div className=\"mb-4\">\n                        <label className=\"block text-gray-400 mb-2\">Zdjęcia</label>\n                        <div className=\"grid grid-cols-4 gap-2 mb-2\">\n                            {formData.imageUrls.map(url => <img key={url} src={url} className=\"w-full h-16 object-cover rounded\" />)}\n                        </div>\n                        <input type=\"file\" onChange={handleImageUpload} className=\"text-white\" />\n                        {isUploading && <p className=\"text-blue-400\">Przesyłanie...</p>}\n                    </div>\n                    <div className=\"flex justify-end space-x-4 mt-6\">\n                        <button type=\"button\" onClick={onClose} className=\"bg-gray-600 text-white font-bold py-2 px-4 rounded hover:bg-gray-500\">Anuluj</button>\n                        <button type=\"submit\" className=\"bg-blue-600 text-white font-bold py-2 px-4 rounded hover:bg-blue-500\">Zapisz</button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n};\n\nconst AdminOrders = () => {\n    const [orders, setOrders] = useState([]);\n    const [isLoading, setIsLoading] = useState(true);\n\n    useEffect(() => {\n        const fetch = async () => {\n            setIsLoading(true);\n            setOrders(await api.fetchOrders());\n            setIsLoading(false);\n        };\n        fetch();\n    }, []);\n\n    const handleStatusChange = async (orderId, newStatus) => {\n        try {\n            await api.updateOrderStatus(orderId, newStatus);\n            setOrders(orders.map(o => o.id === orderId ? {...o, status: newStatus} : o));\n        } catch (e) {\n            console.error(\"Error updating status: \", e);\n        }\n    };\n\n    if (isLoading) return <p>Ładowanie zamówień...</p>;\n\n    return (\n        <div>\n            <h2 className=\"text-2xl font-bold text-white mb-6\">Zamówienia</h2>\n            <div className=\"overflow-x-auto bg-gray-800 rounded-lg\">\n                <table className=\"w-full text-left text-gray-300\">\n                    <thead className=\"bg-gray-700 text-sm text-gray-400 uppercase\"><tr>\n                        <th className=\"p-3\">ID</th><th className=\"p-3\">Klient</th><th className=\"p-3\">Data</th><th className=\"p-3\">Suma</th><th className=\"p-3\">Status</th>\n                    </tr></thead>\n                    <tbody>{orders.map(order => (\n                        <tr key={order.id} className=\"border-b border-gray-700 hover:bg-gray-700/50\">\n                            <td className=\"p-3 font-medium text-white truncate max-w-xs\">{order.id}</td>\n                            <td className=\"p-3\">{order.customer.email}</td>\n                            <td className=\"p-3\">{new Date(order.createdAt.seconds * 1000).toLocaleDateString()}</td>\n                            <td className=\"p-3\">{order.total.toFixed(2)} zł</td>\n                            <td className=\"p-3\">\n                                <select value={order.status} onChange={(e) => handleStatusChange(order.id, e.target.value)} className=\"p-1 border rounded-md bg-gray-700 border-gray-600 text-white\">\n                                    <option>Nowe</option><option>W trakcie realizacji</option><option>Wysłane</option>\n                                    <option>Zakończone</option><option>Anulowane</option>\n                                </select>\n                            </td>\n                        </tr>\n                    ))}</tbody>\n                </table>\n            </div>\n        </div>\n    );\n};\n\n// --- GŁÓWNY KOMPONENT APLIKACJI ---\nexport default function App() {\n    const [page, setPage] = useState('home');\n    const [pageData, setPageData] = useState(null);\n    const [cart, setCart] = useState(() => JSON.parse(localStorage.getItem('cart')) || []);\n    const [products, setProducts] = useState([]);\n    const [categories, setCategories] = useState([]);\n    const [user, setUser] = useState(null);\n    const [userRole, setUserRole] = useState(null);\n    const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\n    const [isLoading, setIsLoading] = useState(true);\n    const [notifications, setNotifications] = useState([]);\n    const [permissionError, setPermissionError] = useState(null);\n\n    useEffect(() => {\n        const loadInitialData = async () => {\n            setIsLoading(true);\n            try {\n                const [productsData, categoriesData] = await Promise.all([api.fetchProducts(), api.fetchCategories()]);\n                setProducts(productsData);\n                setCategories(categoriesData);\n                setPermissionError(null);\n            } catch (error) {\n                if (error.code === 'permission-denied') {\n                    setPermissionError(\"Nie można pobrać danych z Firebase z powodu niewystarczających uprawnień. Upewnij się, że poprawnie skonfigurowałeś reguły bezpieczeństwa w swojej bazie danych Firestore.\");\n                } else {\n                    setPermissionError(\"Wystąpił nieoczekiwany błąd podczas ładowania danych.\");\n                }\n                console.error(\"Błąd ładowania danych:\", error);\n            } finally {\n                setIsLoading(false);\n            }\n        };\n\n        const unsubscribeAuth = onAuthStateChanged(auth, async (currentUser) => {\n            if (currentUser) {\n                const tokenResult = await currentUser.getIdTokenResult();\n                setUser(currentUser);\n                setUserRole(tokenResult.claims.role || 'user');\n            } else {\n                setUser(null);\n                setUserRole(null);\n            }\n            await loadInitialData();\n        });\n\n        return () => unsubscribeAuth();\n    }, []);\n\n    useEffect(() => {\n        localStorage.setItem('cart', JSON.stringify(cart));\n    }, [cart]);\n\n    const addNotification = (message, type = 'success') => {\n        const id = Date.now();\n        setNotifications(prev => [...prev, { id, message, type }]);\n        setTimeout(() => {\n            setNotifications(prev => prev.filter(n => n.id !== id));\n        }, 3000);\n    };\n\n    const navigate = (newPage, data = null) => {\n        window.scrollTo(0, 0);\n        setPage(newPage);\n        setPageData(data);\n        setIsMobileMenuOpen(false);\n    };\n\n    const addToCart = (product, quantity = 1) => {\n        setCart(prevCart => {\n            const existingProduct = prevCart.find(item => item.id === product.id);\n            if (existingProduct) {\n                return prevCart.map(item =>\n                    item.id === product.id ? { ...item, quantity: item.quantity + quantity } : item\n                );\n            }\n            return [...prevCart, { ...product, quantity }];\n        });\n        addNotification(`Dodano do koszyka: ${product.name}`);\n    };\n\n    const updateCartQuantity = (productId, newQuantity) => {\n        if (newQuantity <= 0) {\n            removeFromCart(productId);\n        } else {\n            setCart(prevCart => prevCart.map(item => item.id === productId ? { ...item, quantity: newQuantity } : item));\n        }\n    };\n\n    const removeFromCart = (productId) => {\n        setCart(prevCart => prevCart.filter(item => item.id !== productId));\n    };\n\n    const clearCart = () => setCart([]);\n\n    const cartTotal = cart.reduce((total, item) => total + item.price * item.quantity, 0);\n    const cartItemCount = cart.reduce((count, item) => count + item.quantity, 0);\n\n    const handleLogout = async () => {\n        await signOut(auth);\n        navigate('home');\n    };\n    \n    const renderPage = () => {\n        if (isLoading) return <LoadingScreen />;\n        // The permissionError check is now handled at a higher level.\n        switch (page) {\n            case 'home': return <HomePage navigate={navigate} products={products} categories={categories} />;\n            case 'category': return <CategoryPage navigate={navigate} products={products} categoryName={pageData} />;\n            case 'product': return <ProductPage navigate={navigate} productId={pageData} />;\n            case 'cart': return <CartPage navigate={navigate} />;\n            case 'checkout': return user ? <CheckoutPage navigate={navigate} /> : <LoginPage navigate={navigate} addNotification={addNotification} />;\n            case 'orderConfirmation': return <OrderConfirmationPage navigate={navigate} orderDetails={pageData} />;\n            case 'admin': return userRole === 'admin' ? <AdminPanel navigate={navigate} /> : <AccessDenied navigate={navigate} />;\n            case 'login': return <LoginPage navigate={navigate} addNotification={addNotification} />;\n            case 'register': return <RegisterPage navigate={navigate} addNotification={addNotification} />;\n            default: return <HomePage navigate={navigate} products={products} categories={categories} />;\n        }\n    };\n\n    return (\n        <AppContext.Provider value={{ cart, addToCart, updateCartQuantity, removeFromCart, clearCart, cartTotal, cartItemCount, user, userRole, handleLogout, navigate, products, categories, addNotification }}>\n            <div className=\"bg-gray-900 text-gray-200 font-sans antialiased\">\n                {permissionError && <PermissionErrorDisplay message={permissionError} />}\n                <NotificationCenter notifications={notifications} />\n                {!permissionError && (\n                    <>\n                        <Header isMobileMenuOpen={isMobileMenuOpen} setIsMobileMenuOpen={setIsMobileMenuOpen} />\n                        <main className=\"pt-20 min-h-screen\">\n                            {renderPage()}\n                        </main>\n                        <Footer />\n                    </>\n                )}\n            </div>\n        </AppContext.Provider>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}